import{f as S,a as $,z as V,y as N}from"./index.91a3ffa1.js";import{d as B,j as z,r as v,bE as A,ac as j,aX as O,ba as G,a6 as H,bA as J,bI as K,D as L,E as f,aI as t,aH as a,u as o,C as M,aK as i,aL as r,bG as P,b7 as U,bJ as X}from"./arco.d63f31ab.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import q from"./Edit.7ec168de.js";import"./chart.fcbefee0.js";import"./vue.576003d6.js";/* empty css               *//* empty css                *//* empty css                */import"./IconPicker.bf1c2bcd.js";/* empty css               */const Q={class:"container"},R={class:"container-header"},W={class:"action-btns"},Y={class:"container-main"},ze=B({__name:"index",setup(Z){const m=S(),_=z(!1),g=z(),c=v({status:0}),y=v({results:[]}),p=async()=>{_.value=!0;try{y.results=await $.postForm("/api/admin/menu/list",V(c))}finally{_.value=!1}};p();const w=()=>{g.value.show()},C=e=>{g.value.showEdit(e)},k=async e=>{const u=[];d(e);function d(b){b.forEach(l=>{u.push(l.id),l.children&&l.children.length&&d(l.children)})}await $.post("/api/admin/menu/update_sort",u),await p()};return(e,u)=>{const d=P,b=A,l=U,D=j,h=O,F=G,T=H,n=X,E=J,I=K;return M(),L("div",Q,[f("div",R,[t(F,{model:o(c),layout:"inline",size:o(m).table.size},{default:a(()=>[t(l,null,{default:a(()=>[t(b,{modelValue:o(c).status,"onUpdate:modelValue":u[0]||(u[0]=s=>o(c).status=s),placeholder:e.$t("pages.menu.status"),"allow-clear":"",onChange:p},{default:a(()=>[t(d,{value:0,label:e.$t("pages.menu.statusNormal")},null,8,["label"]),t(d,{value:1,label:e.$t("pages.menu.statusDisabled")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),t(l,null,{default:a(()=>[t(h,{type:"primary","html-type":"submit",onClick:p},{icon:a(()=>[t(D)]),default:a(()=>[i(" "+r(e.$t("pages.menu.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),f("div",W,[t(h,{type:"primary",size:o(m).table.size,onClick:w},{icon:a(()=>[t(T)]),default:a(()=>[i(" "+r(e.$t("pages.menu.add")),1)]),_:1},8,["size"])])]),f("div",Y,[t(I,{loading:o(_),data:o(y).results,size:o(m).table.size,bordered:o(m).table.bordered,pagination:!1,"show-empty-tree":"","column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:k},{columns:a(()=>[t(n,{title:e.$t("pages.menu.title"),"data-index":"title"},null,8,["title"]),t(n,{title:e.$t("pages.menu.type"),"data-index":"type"},{cell:a(({record:s})=>[t(E,{color:s.type==="menu"?"green":"red"},{default:a(()=>[i(r(s.type==="menu"?e.$t("pages.menu.typeMenu"):e.$t("pages.menu.typeFunc")),1)]),_:2},1032,["color"])]),_:1},8,["title"]),t(n,{title:e.$t("pages.menu.name"),"data-index":"name"},null,8,["title"]),t(n,{title:e.$t("pages.menu.component"),"data-index":"component"},null,8,["title"]),t(n,{title:e.$t("pages.menu.path"),"data-index":"path"},null,8,["title"]),t(n,{title:e.$t("pages.menu.status"),"data-index":"status"},{cell:a(({record:s})=>[i(r(s.status===0?e.$t("pages.menu.statusNormal"):e.$t("pages.menu.statusDisabled")),1)]),_:1},8,["title"]),t(n,{title:e.$t("pages.menu.createTime"),"data-index":"createTime"},{cell:a(({record:s})=>[i(r(("useFormatDate"in e?e.useFormatDate:o(N))(s.createTime)),1)]),_:1},8,["title"]),t(n,{title:e.$t("pages.menu.actions")},{cell:a(({record:s})=>[t(h,{type:"primary",size:o(m).table.size,onClick:x=>C(s.id)},{default:a(()=>[i(r(e.$t("pages.menu.edit")),1)]),_:2},1032,["size","onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered"])]),t(q,{ref_key:"edit",ref:g,onOk:p},null,512)])}}});export{ze as default};
