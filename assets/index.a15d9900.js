import{g as V,b as g,y as S,x as I}from"./index.1b6e845e.js";import{d as A,e as C,r as E,bE as N,ab as G,aV as J,b8 as O,a5 as j,bA as H,bI as K,C as P,F as h,aH as t,aG as e,u as a,B as U,aJ as l,aK as y,bG as $,b5 as q,bJ as L}from"./arco.ef2238db.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css              */import M from"./Edit.7d3a9da7.js";import"./chart.ba8df0e9.js";import"./vue.f27dce51.js";/* empty css               *//* empty css                *//* empty css                */import"./IconPicker.bd19a294.js";/* empty css               */const Q={class:"container"},R={class:"container-header"},W={class:"action-btns"},X={class:"container-main"},gt=A({__name:"index",setup(Y){const u=V(),p=C(!1),_=C(),m=E({status:0}),F=E({results:[]}),r=async()=>{p.value=!0;try{F.results=await g.postForm("/api/admin/menu/list",S(m))}finally{p.value=!1}};r();const B=()=>{_.value.show()},z=i=>{_.value.showEdit(i)},v=async i=>{const c=[];d(i);function d(b){b.forEach(s=>{c.push(s.id),s.children&&s.children.length&&d(s.children)})}await g.post("/api/admin/menu/update_sort",c),await r()};return(i,c)=>{const d=$,b=N,s=q,w=G,f=J,x=O,D=j,n=L,k=H,T=K;return U(),P("div",Q,[h("div",R,[t(x,{model:a(m),layout:"inline",size:a(u).table.size},{default:e(()=>[t(s,null,{default:e(()=>[t(b,{modelValue:a(m).status,"onUpdate:modelValue":c[0]||(c[0]=o=>a(m).status=o),placeholder:"\u72B6\u6001","allow-clear":"",onChange:r},{default:e(()=>[t(d,{value:0,label:"\u6B63\u5E38"}),t(d,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1}),t(s,null,{default:e(()=>[t(f,{type:"primary","html-type":"submit",onClick:r},{icon:e(()=>[t(w)]),default:e(()=>[l(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"]),h("div",W,[t(f,{type:"primary",size:a(u).table.size,onClick:B},{icon:e(()=>[t(D)]),default:e(()=>[l(" \u65B0\u589E ")]),_:1},8,["size"])])]),h("div",X,[t(T,{loading:a(p),data:a(F).results,size:a(u).table.size,bordered:a(u).table.bordered,pagination:!1,"show-empty-tree":"","column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:v},{columns:e(()=>[t(n,{title:"\u6807\u9898","data-index":"title"}),t(n,{title:"\u7C7B\u578B","data-index":"type"},{cell:e(({record:o})=>[t(k,{color:o.type==="menu"?"green":"red"},{default:e(()=>[l(y(o.type==="menu"?"\u83DC\u5355":"\u529F\u80FD"),1)]),_:2},1032,["color"])]),_:1}),t(n,{title:"\u540D\u79F0","data-index":"name"}),t(n,{title:"\u7EC4\u4EF6","data-index":"component"}),t(n,{title:"\u8DEF\u5F84","data-index":"path"}),t(n,{title:"\u72B6\u6001","data-index":"status"},{cell:e(({record:o})=>[l(y(o.status===0?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:1}),t(n,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"},{cell:e(({record:o})=>[l(y(("useFormatDate"in i?i.useFormatDate:a(I))(o.createTime)),1)]),_:1}),t(n,{title:"\u64CD\u4F5C"},{cell:e(({record:o})=>[t(f,{type:"primary",size:a(u).table.size,onClick:Z=>z(o.id)},{default:e(()=>[l("\u7F16\u8F91")]),_:2},1032,["size","onClick"])]),_:1})]),_:1},8,["loading","data","size","bordered"])]),t(M,{ref_key:"edit",ref:_,onOk:r},null,512)])}}});export{gt as default};
