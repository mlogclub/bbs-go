import{v as S,f as U,a as c,B as f,z as y,A as B}from"./index.13a6631b.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{d as N,j as v,r as O,b6 as P,bE as z,ba as A,aE as $,aH as r,u as t,b1 as j,C as q,aI as e,b7 as x,bG as D}from"./arco.26e78f37.js";const W=N({__name:"Edit",emits:["ok"],setup(G,{expose:b,emit:_}){const{t:n}=S.exports.useI18n(),E=_,g=U(),m=v(),s=O({visible:!1,isCreate:!1,title:""}),l=v({name:void 0,method:void 0,path:void 0,createTime:void 0,updateTime:void 0}),h={name:[{required:!0,message:n("pages.api.pleaseInputName")}],method:[{required:!0,message:n("pages.api.pleaseInputMethod")}],path:[{required:!0,message:n("pages.api.pleaseInputPath")}]},T=()=>{m.value.resetFields(),s.isCreate=!0,s.title=n("pages.api.new"),s.visible=!0},V=async o=>{m.value.resetFields(),s.isCreate=!1,s.title=n("pages.api.editTitle");try{l.value=await c.get(`/api/admin/api/${o}`)}catch(a){f(a)}s.visible=!0},C=()=>{m.value.resetFields()},I=async o=>{if(await m.value.validate()){o(!1);return}try{const p=s.isCreate?"/api/admin/api/create":"/api/admin/api/update";await c.postForm(p,y(l.value)),B(n("pages.api.submitSuccess")),E("ok"),o(!0)}catch(p){f(p),o(!1)}};return b({show:T,showEdit:V}),(o,a)=>{const p=P,d=x,u=D,k=z,w=A,F=j;return q(),$(F,{visible:t(s).visible,"onUpdate:visible":a[3]||(a[3]=i=>t(s).visible=i),title:t(s).title,size:t(g).table.size,onCancel:C,onBeforeOk:I},{default:r(()=>[e(w,{ref_key:"formRef",ref:m,model:t(l),rules:h},{default:r(()=>[e(d,{label:o.$t("pages.api.name"),field:"name"},{default:r(()=>[e(p,{modelValue:t(l).name,"onUpdate:modelValue":a[0]||(a[0]=i=>t(l).name=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$t("pages.api.method"),field:"method"},{default:r(()=>[e(k,{modelValue:t(l).method,"onUpdate:modelValue":a[1]||(a[1]=i=>t(l).method=i)},{default:r(()=>[e(u,{value:"GET",label:"GET"}),e(u,{value:"POST",label:"POST"}),e(u,{value:"DELETE",label:"DELETE"}),e(u,{value:"PUT",label:"PUT"}),e(u,{value:"ANY",label:"ANY"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(d,{label:o.$t("pages.api.path"),field:"path"},{default:r(()=>[e(p,{modelValue:t(l).path,"onUpdate:modelValue":a[2]||(a[2]=i=>t(l).path=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}});export{W as _};
