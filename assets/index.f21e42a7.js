import{u as x,_ as S,a as B,b as T,D as L,I as A,c as G}from"./index.1ba30acb.js";/* empty css              */import{d as C,c as O,B as g,C as h,F as t,aH as o,aG as n,aL as Q,aI as z,aD as F,aK as m,b2 as H,b3 as J,e as b,r as K,u as r,aE as P,aJ as j,aU as W,b4 as X,b5 as Y,b6 as Z,ad as ee,aV as oe,b7 as ae,b8 as se,o as te,b9 as ne,ba as re,bb as le}from"./arco.d3370bfb.js";import{F as ce}from"./index.4250e9f8.js";/* empty css              *//* empty css               */import{f as k}from"./vue.b9a35bcf.js";import"./chart.d349306c.js";const w="/assets/logo364x364.fc4aff0c.png",ie={class:"banner"},de={class:"banner-inner"},ue={class:"carousel-content"},_e={class:"carousel-content-title"},pe={class:"carousel-content-sub-title"},ge=C({__name:"banner",setup(c){const{t:e}=x(),i=O(()=>[{slogan:e("login.banner.slogan1"),subSlogan:e("login.banner.subSlogan1"),image:w},{slogan:e("login.banner.slogan2"),subSlogan:e("login.banner.subSlogan2"),image:w},{slogan:e("login.banner.slogan3"),subSlogan:e("login.banner.subSlogan3"),image:w}]);return(d,u)=>{const _=H,p=J;return g(),h("div",ie,[t("div",de,[o(p,{class:"carousel","auto-play":!0,"show-arrow":"hover","animation-name":"slide"},{default:n(()=>[(g(!0),h(Q,null,z(i.value,a=>(g(),F(_,{key:a.slogan},{default:n(()=>[(g(),h("div",{key:a.slogan,class:"carousel-item"},[t("div",ue,[t("div",_e,m(a.slogan),1),t("div",pe,m(a.subSlogan),1)])]))]),_:2},1024))),128))]),_:1})])])}}});const me=S(ge,[["__scopeId","data-v-78525eae"]]);function fe(c=!1){const e=b(c);return{loading:e,setLoading:u=>{e.value=u},toggle:()=>{e.value=!e.value}}}const he={class:"login-form-wrapper"},be={class:"login-form-title"},ve={class:"login-form-sub-title"},ye={class:"login-form-error-msg"},$e=["src"],Ie=C({__name:"login-form",setup(c){const e=k(),{t:i}=x(),d=b(""),{loading:u,setLoading:_}=fe(),p=B(),a=K({username:"",password:"",captchaId:"",captchaCode:""}),v=b(""),y=async()=>{const s=await T.get("/api/captcha/request");a.captchaId=s.captchaId,a.captchaCode="",v.value=s.captchaBase64};y();const q=async({errors:s})=>{if(!u.value&&!s){_(!0);try{await p.login(a);const{redirect:l,...$}=e.currentRoute.value.query;e.push({name:l||L,query:{...$}}),W.success(i("login.form.login.success"))}catch(l){y(),d.value=l.message}finally{_(!1)}}};return(s,l)=>{const $=A,V=X,I=Y,U=G,M=Z,N=ee,E=oe,D=ae,R=se;return g(),h("div",he,[t("div",be,m(s.$t("login.form.title")),1),t("div",ve,m(s.$t("login.form.subtitle")),1),t("div",ye,m(r(d)),1),o(R,{ref:"loginForm",model:r(a),class:"login-form",layout:"vertical",onSubmit:q},{default:n(()=>[o(I,{field:"username",rules:[{required:!0,message:s.$t("login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:n(()=>[o(V,{modelValue:r(a).username,"onUpdate:modelValue":l[0]||(l[0]=f=>r(a).username=f),placeholder:s.$t("login.form.userName.placeholder")},{prefix:n(()=>[o($)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),o(I,{field:"password",rules:[{required:!0,message:s.$t("login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:n(()=>[o(M,{modelValue:r(a).password,"onUpdate:modelValue":l[1]||(l[1]=f=>r(a).password=f),placeholder:s.$t("login.form.password.placeholder"),"allow-clear":""},{prefix:n(()=>[o(U)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),r(v)?(g(),F(I,{key:0,field:"captchaCode",rules:[{required:!0,message:s.$t("login.form.captchaCode.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:n(()=>[o(V,{modelValue:r(a).captchaCode,"onUpdate:modelValue":l[2]||(l[2]=f=>r(a).captchaCode=f),placeholder:s.$t("login.form.captchaCode.placeholder"),"allow-clear":"",class:"captcha-code"},{prefix:n(()=>[o(N)]),append:n(()=>[t("img",{src:`data:image/png;base64,${r(v)}`,onClick:y},null,8,$e)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"])):P("",!0),o(D,{size:16,direction:"vertical"},{default:n(()=>[o(E,{type:"primary","html-type":"submit",long:"",loading:r(u)},{default:n(()=>[j(m(s.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}});const we=S(Ie,[["__scopeId","data-v-faed8824"]]),Se=c=>(re("data-v-0a0b5e30"),c=c(),le(),c),Ce={class:"login-container"},Ve=Se(()=>t("div",{class:"logo"},[t("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"}),t("div",{class:"logo-text"},"BBS-GO")],-1)),xe={class:"content"},Be={class:"content-inner"},Le={class:"footer"},Fe=C({__name:"index",setup(c){const e=B(),i=k(),d=b(!0);return te(async()=>{try{if(await e.info()){const{redirect:_,...p}=i.currentRoute.value.query;i.push({name:_||L,query:{...p}})}}finally{d.value=!1}}),(u,_)=>{const p=ne;return g(),h("div",Ce,[Ve,o(me),t("div",xe,[t("div",Be,[o(p,{loading:r(d),tip:"Loading"},{default:n(()=>[o(we)]),_:1},8,["loading"])]),t("div",Le,[o(ce)])])])}}});const Te=S(Fe,[["__scopeId","data-v-0a0b5e30"]]);export{Te as default};
