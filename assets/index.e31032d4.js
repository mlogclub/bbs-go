import{j as A,a as Q}from"./index.db022209.js";import{e as E,B as C,C as S,F as I,aH as e,aG as o,aD as D,br as $,aL as _,aJ as W,aI as X,u as t,j as Y,b4 as P,aV as j,a$ as M,aM as U,bN as Z,d as R,r as N,bO as ee,b5 as q,bE as H,bF as J,b8 as L,aE as oe,ab as te,a5 as ne,bI as ae,bJ as ie}from"./arco.bfc06e8a.js";import{_ as le,g as G,b as x,x as T,w as se}from"./index.f0ca126f.js";/* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css                *//* empty css               */import"./chart.8d130ef7.js";import"./vue.203b0a99.js";const ce={class:"icon-picker"},ue={class:"icon-picker-input"},de={class:"icons"},re=["onClick"],me={__name:"IconPicker",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(B,{emit:f}){const y=["icon-dashboard","icon-apps","icon-home","icon-stop","icon-link","icon-import","icon-launch","icon-list","icon-message","icon-poweroff","icon-scan","icon-save","icon-settings","icon-share-alt","icon-archive","icon-bar-chart","icon-book","icon-bookmark","icon-branch","icon-bug","icon-bulb","icon-calendar-clock","icon-calendar","icon-camera","icon-cloud","icon-command","icon-common","icon-compass","icon-computer","icon-copyright","icon-desktop","icon-dice","icon-drag-dot-vertical","icon-drag-dot","icon-drive-file","icon-ear","icon-email","icon-empty","icon-experiment","icon-file-audio","icon-file-image","icon-file-pdf","icon-file-video","icon-file","icon-fire","icon-folder-add","icon-folder-delete","icon-folder","icon-gift","icon-idcard","icon-image-close","icon-image","icon-interaction","icon-language","icon-layers","icon-layout","icon-location","icon-lock","icon-loop","icon-man","icon-menu","icon-mind-mapping","icon-mobile","icon-moon","icon-mosaic","icon-nav","icon-notification-close","icon-notification","icon-palette","icon-pen","icon-phone","icon-printer","icon-public","icon-pushpin","icon-qrcode","icon-relation","icon-robot-add","icon-robot","icon-safe","icon-schedule","icon-shake","icon-skin","icon-stamp","icon-storage","icon-subscribe-add","icon-subscribe","icon-subscribed","icon-sun","icon-tag","icon-tags","icon-thunderbolt","icon-tool","icon-trophy","icon-unlock","icon-user-add","icon-user-group","icon-user","icon-video-camera","icon-wifi","icon-woman","icon-live-broadcast"],u=E(!1),b=f,m=()=>{u.value=!0},i=g=>{u.value=!1,b("update:modelValue",g)},a=g=>{b("update:modelValue",g)};return(g,F)=>{const d=P,v=j,h=Z,V=M;return C(),S("div",ce,[I("div",ue,[e(d,{"model-value":B.modelValue,class:"icon-picker-input-input",placeholder:"\u8BF7\u9009\u62E9\u56FE\u6807",onInput:a},{prefix:o(()=>[(C(),D($(B.modelValue)))]),_:1},8,["model-value"]),e(v,{class:"icon-picker-input-btn",type:"primary",onClick:m},{default:o(()=>[_("\u9009\u62E9\u56FE\u6807")]),_:1})]),e(V,{visible:t(u),"onUpdate:visible":F[0]||(F[0]=l=>Y(u)?u.value=l:null),width:650},{title:o(()=>[_(" \u9009\u62E9\u56FE\u6807 ")]),default:o(()=>[I("div",de,[(C(),S(W,null,X(y,(l,p)=>I("div",{key:p,class:"icon-item",onClick:n=>i(l)},[e(h,null,{content:o(()=>[_(U(l),1)]),default:o(()=>[(C(),D($(l),{size:30}))]),_:2},1024)],8,re)),64))])]),_:1},8,["visible"])])}}},pe=le(me,[["__scopeId","data-v-d57eb2c4"]]),_e=R({__name:"Edit",emits:["ok"],setup(B,{expose:f,emit:y}){const u=y,b=G(),m=E(),i=N({visible:!1,isCreate:!1,title:""}),a=E({id:void 0,parentId:void 0,name:void 0,title:void 0,icon:void 0,path:void 0,status:0}),g={title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},F=E([]),d=async()=>{F.value=await x.get("/api/admin/menu/tree")},v=async()=>{a.value.id=void 0,m.value.resetFields(),i.isCreate=!0,i.title="\u65B0\u589E",await d(),i.visible=!0},h=async p=>{m.value.resetFields(),i.isCreate=!1,i.title="\u7F16\u8F91",await d();try{a.value=await x.get(`/api/admin/menu/${p}`)}catch(n){T(n)}i.visible=!0},V=()=>{m.value.resetFields()},l=async p=>{if(await m.value.validate()){p(!1);return}try{const w=i.isCreate?"/api/admin/menu/create":"/api/admin/menu/update";await x.postForm(w,A(a.value)),se("\u63D0\u4EA4\u6210\u529F"),u("ok"),p(!0)}catch(w){T(w),p(!1)}};return f({show:v,showEdit:h}),(p,n)=>{const w=ee,k=q,r=P,z=H,c=J,O=L,K=M;return C(),D(K,{visible:t(i).visible,"onUpdate:visible":n[6]||(n[6]=s=>t(i).visible=s),title:t(i).title,size:t(b).table.size,onCancel:V,onBeforeOk:l},{default:o(()=>[e(O,{ref_key:"formRef",ref:m,model:t(a),rules:g},{default:o(()=>[e(k,{label:"\u4E0A\u7EA7\u83DC\u5355",field:"parentId"},{default:o(()=>[e(w,{modelValue:t(a).parentId,"onUpdate:modelValue":n[0]||(n[0]=s=>t(a).parentId=s),"allow-clear":"",data:t(F),placeholder:"Please select ..."},null,8,["modelValue","data"])]),_:1}),e(k,{label:"\u540D\u79F0",field:"title"},{default:o(()=>[e(r,{modelValue:t(a).title,"onUpdate:modelValue":n[1]||(n[1]=s=>t(a).title=s)},null,8,["modelValue"])]),_:1}),e(k,{label:"\u7F16\u7801",field:"name"},{default:o(()=>[e(r,{modelValue:t(a).name,"onUpdate:modelValue":n[2]||(n[2]=s=>t(a).name=s)},null,8,["modelValue"])]),_:1}),e(k,{label:"\u8DEF\u5F84",field:"path"},{default:o(()=>[e(r,{modelValue:t(a).path,"onUpdate:modelValue":n[3]||(n[3]=s=>t(a).path=s)},null,8,["modelValue"])]),_:1}),e(k,{label:"ICON",field:"icon"},{default:o(()=>[e(pe,{modelValue:t(a).icon,"onUpdate:modelValue":n[4]||(n[4]=s=>t(a).icon=s)},null,8,["modelValue"])]),_:1}),e(k,{label:"\u72B6\u6001",field:"status"},{default:o(()=>[e(c,{modelValue:t(a).status,"onUpdate:modelValue":n[5]||(n[5]=s=>t(a).status=s)},{default:o(()=>[e(z,{value:0},{default:o(()=>[_("\u6B63\u5E38")]),_:1}),e(z,{value:1},{default:o(()=>[_("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}}),fe={class:"container"},be={class:"container-header"},ve={class:"action-btns"},he={class:"container-main"},Se=R({__name:"index",setup(B){const f=G(),y=E(!1),u=E(),b=N({status:0}),m=N({results:[]}),i=async()=>{y.value=!0;try{m.results=await x.postForm("/api/admin/menu/list",A(b))}finally{y.value=!1}};i();const a=()=>{u.value.show()},g=d=>{u.value.showEdit(d)},F=async d=>{const v=[];h(d);function h(V){V.forEach(l=>{v.push(l.id),l.children&&l.children.length&&h(l.children)})}await x.post("/api/admin/menu/update_sort",v),await i()};return(d,v)=>{const h=H,V=J,l=q,p=te,n=j,w=L,k=ne,r=ae,z=ie;return C(),S("div",fe,[I("div",be,[e(w,{model:t(b),layout:"inline",size:t(f).table.size},{default:o(()=>[e(l,null,{default:o(()=>[e(V,{modelValue:t(b).status,"onUpdate:modelValue":v[0]||(v[0]=c=>t(b).status=c),placeholder:"\u72B6\u6001","allow-clear":"",onChange:i},{default:o(()=>[e(h,{value:0,label:"\u6B63\u5E38"}),e(h,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1}),e(l,null,{default:o(()=>[e(n,{type:"primary","html-type":"submit",onClick:i},{icon:o(()=>[e(p)]),default:o(()=>[_(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1},8,["model","size"]),I("div",ve,[e(n,{type:"primary",size:t(f).table.size,onClick:a},{icon:o(()=>[e(k)]),default:o(()=>[_(" \u65B0\u589E ")]),_:1},8,["size"])])]),I("div",he,[e(z,{loading:t(y),data:t(m).results,size:t(f).table.size,bordered:t(f).table.bordered,pagination:!1,"show-empty-tree":"","column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:F},{columns:o(()=>[e(r,{title:"\u540D\u79F0","data-index":"title"}),e(r,{title:"\u7F16\u7801","data-index":"name"}),e(r,{title:"ICON","data-index":"icon"},{cell:o(({record:c})=>[c.icon?(C(),D($(c.icon),{key:0,size:18})):oe("",!0)]),_:1}),e(r,{title:"\u8DEF\u5F84","data-index":"path"}),e(r,{title:"\u72B6\u6001","data-index":"status"},{cell:o(({record:c})=>[_(U(c.status===0?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:1}),e(r,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"},{cell:o(({record:c})=>[_(U(("useFormatDate"in d?d.useFormatDate:t(Q))(c.createTime)),1)]),_:1}),e(r,{title:"\u64CD\u4F5C"},{cell:o(({record:c})=>[e(n,{type:"primary",size:t(f).table.size,onClick:O=>g(c.id)},{default:o(()=>[_("\u7F16\u8F91")]),_:2},1032,["size","onClick"])]),_:1})]),_:1},8,["loading","data","size","bordered"])]),e(_e,{ref_key:"edit",ref:u,onOk:i},null,512)])}}});export{Se as default};
