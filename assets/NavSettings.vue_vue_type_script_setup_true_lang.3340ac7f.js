import{b as p,G as E,F as N,z as b,A as B}from"./index.1b6e845e.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{d as k,e as d,b4 as x,a4 as D,aV as I,a5 as w,b7 as U,bI as S,C as G,aH as e,aG as n,u as m,F as H,B as T,aJ as $}from"./arco.ef2238db.js";const z={style:{"margin-top":"20px"}},Z=k({__name:"NavSettings",setup(J){const u=d(!1),o=d([]),_=[{title:"\u6807\u9898",dataIndex:"title",slotName:"name"},{title:"\u94FE\u63A5",dataIndex:"url",slotName:"url"},{title:"",dataIndex:"operation",slotName:"operation"}],c=async()=>{const a=await p.get("/api/admin/sys-config/all");o.value=a.siteNavs};c();const f=a=>{o.value=a},v=(a,s)=>{o.value.splice(s,1)},C=(a,s)=>{o.value.splice(s+1,0,{})},g=async()=>{u.value=!0;try{if(o.value.some(a=>E(a.title,a.url))){N("\u8BF7\u68C0\u67E5\u4F60\u7684\u5BFC\u822A\u914D\u7F6E\uFF0C\u5BFC\u822A\u6807\u9898\u548C\u94FE\u63A5\u4E0D\u80FD\u4E3A\u7A7A");return}await p.post("/api/admin/sys-config/save",{siteNavs:o.value}),await c(),b("\u63D0\u4EA4\u6210\u529F")}catch(a){B(a)}finally{u.value=!1}};return(a,s)=>{const r=x,y=D,i=I,h=w,F=U,A=S;return T(),G("div",null,[e(A,{columns:_,data:m(o),pagination:!1,draggable:{type:"handle",width:40},onChange:f},{name:n(({record:t})=>[e(r,{modelValue:t.title,"onUpdate:modelValue":l=>t.title=l},null,8,["modelValue","onUpdate:modelValue"])]),url:n(({record:t})=>[e(r,{modelValue:t.url,"onUpdate:modelValue":l=>t.url=l},null,8,["modelValue","onUpdate:modelValue"])]),operation:n(({record:t,rowIndex:l})=>[e(F,null,{default:n(()=>[e(i,{type:"primary",status:"danger",shape:"circle",onClick:V=>v(t,l)},{default:n(()=>[e(y)]),_:2},1032,["onClick"]),e(i,{type:"primary",status:"success",shape:"circle",onClick:V=>C(t,l)},{default:n(()=>[e(h)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data"]),H("div",z,[e(i,{type:"primary",loading:m(u),onClick:g},{default:n(()=>[$("\u63D0\u4EA4")]),_:1},8,["loading"])])])}}});export{Z as _};
