import{_ as N,B as S,a as _,y as T,z as E,A as H}from"./index.f21f3c04.js";/* empty css              *//* empty css                *//* empty css                *//* empty css                */import{j as i,o as V,aY as j,aX as z,S as D,bH as A,bT as K,bb as L,D as y,E as c,aI as o,aH as r,C as m,aK as h,aM as Y,aJ as $,F as J,u as e,aL as P,aE as U,e as X,aF as q}from"./arco.8a931ad5.js";import"./chart.71b0189b.js";import"./vue.a0233a03.js";const G={class:"container"},O={class:"container-header"},Q={style:{width:"max-content"}},W={class:"container-main"},Z={class:"role-item-list"},ee=["onClick"],ae={__name:"index",setup(te){const p=i(!1),l=i([]),d=i([]),a=i(),t=i([]),f={overflowY:"auto",height:"calc(100% - 46px)"};V(()=>{S(),k()});const k=async()=>{await Promise.all([b(),I()]),a.value||l.value&&l.value.length&&(a.value=l.value[0].id),await v()},w=async u=>{a.value=u.id,await v()},x=async()=>{try{await _.postForm("/api/admin/role/save_role_menus",T({roleId:a.value,menuIds:t.value?t.value.join(","):""})),E("\u4FDD\u5B58\u6210\u529F")}catch(u){H(u)}await v()},b=async()=>{l.value=await _.get("/api/admin/role/all_roles")},I=async()=>{try{p.value=!0,d.value=await _.get("/api/admin/menu/tree")}finally{p.value=!1}},v=async()=>{t.value=await _.get(`/api/admin/role/role_menu_ids?roleId=${a.value}`)};return(u,s)=>{const C=j,B=z,R=D,g=A,M=K,F=L;return m(),y("div",G,[c("div",O,[c("div",Q,[o(C,{type:"warning"},{default:r(()=>s[1]||(s[1]=[h("\u8BBE\u7F6E\u89D2\u8272\u5BF9\u5E94\u6743\u9650")])),_:1})]),o(B,{type:"primary",onClick:x},{default:r(()=>s[2]||(s[2]=[h("\u4FDD\u5B58")])),_:1})]),c("div",W,[o(g,{title:"\u89D2\u8272\u5217\u8868",class:"roles-panel","body-style":f},{default:r(()=>[c("div",Z,[(m(!0),y(Y,null,$(e(l),n=>(m(),y("div",{key:n.id,class:J(["role-item",{active:n.id===e(a)}]),onClick:se=>w(n)},[c("span",null,P(n.name),1),o(R)],10,ee))),128))])]),_:1}),o(g,{title:"\u83DC\u5355\u6743\u9650",class:"menus-panel","body-style":f},{default:r(()=>[o(F,{loading:e(p),dot:"",style:{width:"100%"}},{default:r(()=>[e(d)&&e(d).length?(m(),U(M,{key:0,"checked-keys":e(t),"onUpdate:checkedKeys":s[0]||(s[0]=n=>X(t)?t.value=n:null),data:e(d),checkable:!0,"default-expand-all":!0,size:"large"},null,8,["checked-keys","data"])):q("",!0)]),_:1},8,["loading"])]),_:1})])])}}},_e=N(ae,[["__scopeId","data-v-cd9deebc"]]);export{_e as default};
