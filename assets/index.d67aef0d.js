import{v as V,_ as C,u as L,a as T,D as B,I as j,b as A}from"./index.25ef825f.js";/* empty css              */import{d as S,c as O,C as p,D as f,E as n,aI as o,aH as t,aM as Q,aJ as z,aE as F,aL as m,b4 as G,b5 as H,j as b,r as J,u as r,aF as K,aK as P,aW as W,b6 as X,b7 as Y,b8 as Z,ae as ee,aX as oe,b9 as ae,ba as se,o as ne,bb as te}from"./arco.8a931ad5.js";import{F as re}from"./index.0a3cc7f1.js";/* empty css              *//* empty css               */import{f as k}from"./vue.a0233a03.js";import"./chart.71b0189b.js";const w="/admin/assets/logo364x364.fc4aff0c.png",le={class:"banner"},ce={class:"banner-inner"},ie={class:"carousel-content"},de={class:"carousel-content-title"},ue={class:"carousel-content-sub-title"},_e=S({__name:"banner",setup(h){const{t:e}=V.exports.useI18n(),i=O(()=>[{slogan:e("login.banner.slogan1"),subSlogan:e("login.banner.subSlogan1"),image:w},{slogan:e("login.banner.slogan2"),subSlogan:e("login.banner.subSlogan2"),image:w},{slogan:e("login.banner.slogan3"),subSlogan:e("login.banner.subSlogan3"),image:w}]);return(d,u)=>{const c=G,_=H;return p(),f("div",le,[n("div",ce,[o(_,{class:"carousel","auto-play":!0,"show-arrow":"hover","animation-name":"slide"},{default:t(()=>[(p(!0),f(Q,null,z(i.value,a=>(p(),F(c,{key:a.slogan},{default:t(()=>[(p(),f("div",{key:a.slogan,class:"carousel-item"},[n("div",ie,[n("div",de,m(a.slogan),1),n("div",ue,m(a.subSlogan),1)])]))]),_:2},1024))),128))]),_:1})])])}}});const pe=C(_e,[["__scopeId","data-v-78525eae"]]);function me(h=!1){const e=b(h);return{loading:e,setLoading:u=>{e.value=u},toggle:()=>{e.value=!e.value}}}const ge={class:"login-form-wrapper"},fe={class:"login-form-title"},he={class:"login-form-sub-title"},be={class:"login-form-error-msg"},ve=["src"],ye=S({__name:"login-form",setup(h){const e=k(),{t:i}=V.exports.useI18n(),d=b(""),{loading:u,setLoading:c}=me(),_=L(),a=J({username:"",password:"",captchaId:"",captchaCode:""}),v=b(""),y=async()=>{const s=await T.get("/api/captcha/request");a.captchaId=s.captchaId,a.captchaCode="",v.value=s.captchaBase64};y();const q=async({errors:s})=>{if(!u.value&&!s){c(!0);try{await _.login(a);const{redirect:l,...$}=e.currentRoute.value.query;e.push({name:l||B,query:{...$}}),W.success(i("login.form.login.success"))}catch(l){y(),d.value=l.message}finally{c(!1)}}};return(s,l)=>{const $=j,x=X,I=Y,M=A,N=Z,U=ee,E=oe,D=ae,R=se;return p(),f("div",ge,[n("div",fe,m(s.$t("login.form.title")),1),n("div",he,m(s.$t("login.form.subtitle")),1),n("div",be,m(r(d)),1),o(R,{ref:"loginForm",model:r(a),class:"login-form",layout:"vertical",onSubmit:q},{default:t(()=>[o(I,{field:"username",rules:[{required:!0,message:s.$t("login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(x,{modelValue:r(a).username,"onUpdate:modelValue":l[0]||(l[0]=g=>r(a).username=g),placeholder:s.$t("login.form.userName.placeholder")},{prefix:t(()=>[o($)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),o(I,{field:"password",rules:[{required:!0,message:s.$t("login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(N,{modelValue:r(a).password,"onUpdate:modelValue":l[1]||(l[1]=g=>r(a).password=g),placeholder:s.$t("login.form.password.placeholder"),"allow-clear":""},{prefix:t(()=>[o(M)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),r(v)?(p(),F(I,{key:0,field:"captchaCode",rules:[{required:!0,message:s.$t("login.form.captchaCode.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(x,{modelValue:r(a).captchaCode,"onUpdate:modelValue":l[2]||(l[2]=g=>r(a).captchaCode=g),placeholder:s.$t("login.form.captchaCode.placeholder"),"allow-clear":"",class:"captcha-code"},{prefix:t(()=>[o(U)]),append:t(()=>[n("img",{src:`data:image/png;base64,${r(v)}`,onClick:y},null,8,ve)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"])):K("",!0),o(D,{size:16,direction:"vertical"},{default:t(()=>[o(E,{type:"primary","html-type":"submit",long:"",loading:r(u)},{default:t(()=>[P(m(s.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}});const $e=C(ye,[["__scopeId","data-v-faed8824"]]),Ie={class:"login-container"},we={class:"content"},Ce={class:"content-inner"},Se={class:"footer"},xe=S({__name:"index",setup(h){const e=L(),i=k(),d=b(!0);return ne(async()=>{try{if(await e.info()){const{redirect:c,..._}=i.currentRoute.value.query;i.push({name:c||B,query:{..._}})}}finally{d.value=!1}}),(u,c)=>{const _=te;return p(),f("div",Ie,[c[0]||(c[0]=n("div",{class:"logo"},[n("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"}),n("div",{class:"logo-text"},"BBS-GO")],-1)),o(pe),n("div",we,[n("div",Ce,[o(_,{loading:r(d),tip:"Loading"},{default:t(()=>[o($e)]),_:1},8,["loading"])]),n("div",Se,[o(re)])])])}}});const Ue=C(xe,[["__scopeId","data-v-0a0b5e30"]]);export{Ue as default};
