import{v as I,a as d,H as k,G as B,A as S,B as U}from"./index.a8e4cb9d.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as w,j as _,b6 as E,a5 as A,aX as D,a6 as H,b9 as T,bI as j,D as $,aI as e,aH as n,u,E as G,C as K,aK as L,aL as M}from"./arco.db61f1fb.js";const P={style:{"margin-top":"20px"}},sa=w({__name:"NavSettings",setup(X){const{t:l}=I.exports.useI18n(),c=_(!1),s=_([]),g=[{title:l("pages.settings.nav.tableTitle"),dataIndex:"title",slotName:"name"},{title:l("pages.settings.nav.tableUrl"),dataIndex:"url",slotName:"url"},{title:"",dataIndex:"operation",slotName:"operation"}],r=async()=>{const a=await d.get("/api/admin/sys-config/configs");s.value=a.siteNavs};r();const v=a=>{s.value=a},f=(a,i)=>{s.value.splice(i,1)},y=(a,i)=>{s.value.splice(i+1,0,{})},h=async()=>{c.value=!0;try{if(s.value.some(a=>k(a.title,a.url))){B(l("pages.settings.nav.message.validation"));return}await d.post("/api/admin/sys-config/save",{siteNavs:s.value}),await r(),S(l("pages.settings.nav.message.submitSuccess"))}catch(a){U(a)}finally{c.value=!1}};return(a,i)=>{const m=E,b=A,p=D,C=H,N=T,V=j;return K(),$("div",null,[e(V,{columns:g,data:u(s),pagination:!1,draggable:{type:"handle",width:40},onChange:v},{name:n(({record:t})=>[e(m,{modelValue:t.title,"onUpdate:modelValue":o=>t.title=o},null,8,["modelValue","onUpdate:modelValue"])]),url:n(({record:t})=>[e(m,{modelValue:t.url,"onUpdate:modelValue":o=>t.url=o},null,8,["modelValue","onUpdate:modelValue"])]),operation:n(({record:t,rowIndex:o})=>[e(N,null,{default:n(()=>[e(p,{type:"primary",status:"danger",shape:"circle",onClick:x=>f(t,o)},{default:n(()=>[e(b)]),_:1},8,["onClick"]),e(p,{type:"primary",status:"success",shape:"circle",onClick:x=>y(t,o)},{default:n(()=>[e(C)]),_:1},8,["onClick"])]),_:2},1024)]),_:1},8,["data"]),G("div",P,[e(p,{type:"primary",loading:u(c),onClick:h},{default:n(()=>[L(M(u(l)("pages.settings.nav.submit")),1)]),_:1},8,["loading"])])])}}});export{sa as _};
