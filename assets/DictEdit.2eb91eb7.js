import{H as N,f as q,a as p,A as v,y as z,z as H}from"./index.25ef825f.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css                */import{j as c,r as L,bR as O,b6 as R,bE as j,ba as A,aE as $,aH as r,u as e,b1 as G,C as y,aI as l,D as M,aL as V,aF as J,b7 as K,bG as P}from"./arco.8a931ad5.js";import"./chart.71b0189b.js";import"./vue.a0233a03.js";const Q={key:0},ne={__name:"DictEdit",emits:["ok"],setup(W,{expose:I,emit:k}){const w=k,d=N(),C=q(),u=c(),o=L({visible:!1,isCreate:!1,title:""}),t=c({typeId:void 0,parentId:void 0,label:void 0,value:void 0,status:0}),E={name:[{required:!0,message:"\u8BF7\u8F93\u5165Name"}],label:[{required:!0,message:"\u8BF7\u8F93\u5165Label"}],value:[{required:!0,message:"\u8BF7\u8F93\u5165Value"}],status:[{required:!0}]},f=c([]),b=async()=>{f.value=await p.get(`/api/admin/dict/dicts?typeId=${d.currentType.id}`)},F=async()=>{u.value.resetFields(),o.isCreate=!0,o.title="\u65B0\u589E",await b(),o.visible=!0},S=async n=>{u.value.resetFields(),o.isCreate=!1,o.title="\u7F16\u8F91",await b();try{t.value=await p.get(`/api/admin/dict/${n}`)}catch(a){v(a)}o.visible=!0},g=()=>{u.value.resetFields()},T=async n=>{if(await u.value.validate()){n(!1);return}try{const i=o.isCreate?"/api/admin/dict/create":"/api/admin/dict/update";o.isCreate&&(t.value.typeId=d.currentTypeId),await p.postForm(i,z(t.value)),H("\u63D0\u4EA4\u6210\u529F"),w("ok"),n(!0)}catch(i){v(i),n(!1)}};return I({show:F,showEdit:S}),(n,a)=>{const i=K,D=O,m=R,_=P,U=j,x=A,B=G;return y(),$(B,{visible:e(o).visible,"onUpdate:visible":a[5]||(a[5]=s=>e(o).visible=s),title:e(o).title,size:e(C).table.size,onCancel:g,onBeforeOk:T},{default:r(()=>[l(x,{ref_key:"formRef",ref:u,model:e(t),rules:E},{default:r(()=>[l(i,{label:"\u7C7B\u578B",field:"typeId"},{default:r(()=>[e(d).currentType?(y(),M("span",Q,V(e(d).currentType.code)+"\xA0("+V(e(d).currentType.name)+")",1)):J("",!0)]),_:1}),l(i,{label:"\u4E0A\u7EA7",field:"parentId"},{default:r(()=>[l(D,{modelValue:e(t).parentId,"onUpdate:modelValue":a[0]||(a[0]=s=>e(t).parentId=s),"allow-clear":"",data:e(f),"field-names":{key:"id",title:"label"},placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7"},null,8,["modelValue","data"])]),_:1}),l(i,{label:"Name",field:"label"},{default:r(()=>[l(m,{modelValue:e(t).name,"onUpdate:modelValue":a[1]||(a[1]=s=>e(t).name=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"Label",field:"label"},{default:r(()=>[l(m,{modelValue:e(t).label,"onUpdate:modelValue":a[2]||(a[2]=s=>e(t).label=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"Value",field:"value"},{default:r(()=>[l(m,{modelValue:e(t).value,"onUpdate:modelValue":a[3]||(a[3]=s=>e(t).value=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"\u72B6\u6001",field:"status"},{default:r(()=>[l(U,{modelValue:e(t).status,"onUpdate:modelValue":a[4]||(a[4]=s=>e(t).status=s)},{default:r(()=>[l(_,{value:0,label:"\u542F\u7528"}),l(_,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}};export{ne as default};
