import{f as U,B as j,a as C,y as H,x as J}from"./index.25ef825f.js";import{d as $,j as z,r as B,c as G,o as K,b6 as L,bE as M,ac as X,aX as q,ba as Q,a6 as R,bA as W,bI as Y,D as Z,E as f,aI as e,aH as a,u as o,C as y,aK as d,aE as E,aL as k,b7 as ee,bG as te,bJ as ae}from"./arco.8a931ad5.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css              */import{_ as oe}from"./Edit.vue_vue_type_script_setup_true_lang.31b75735.js";import"./chart.71b0189b.js";import"./vue.a0233a03.js";const ne={class:"container"},se={class:"container-header"},le={class:"action-btns"},ie={class:"container-main"},v=0,ke=$({__name:"index",setup(ue){const m=U(),_=z(!1),g=z(),l=B({limit:20,page:1,name:void 0,code:void 0,status:0}),r=B({page:{page:1,limit:20,total:0},results:[]}),w=G(()=>({total:r.page.total,current:r.page.page,pageSize:r.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));K(()=>{j()});const u=async()=>{_.value=!0;try{const s=await C.postForm("/api/admin/role/list",H(l));r.page=s.page,r.results=s.results}finally{_.value=!1}};u();const D=()=>{g.value.show()},x=s=>{g.value.showEdit(s)},V=async s=>{const t=[];s.forEach(p=>{t.push(p.id)}),await C.post("/api/admin/role/update_sort",t),await u()},S=s=>{l.page=s,u()},T=s=>{l.limit=s,u()};return(s,t)=>{const p=L,c=ee,F=te,A=M,I=X,b=q,P=Q,N=R,i=ae,h=W,O=Y;return y(),Z("div",ne,[f("div",se,[e(P,{model:o(l),layout:"inline",size:o(m).table.size},{default:a(()=>[e(c,null,{default:a(()=>[e(p,{modelValue:o(l).name,"onUpdate:modelValue":t[0]||(t[0]=n=>o(l).name=n),placeholder:"\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(p,{modelValue:o(l).code,"onUpdate:modelValue":t[1]||(t[1]=n=>o(l).code=n),placeholder:"\u89D2\u8272\u7F16\u7801"},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(A,{modelValue:o(l).status,"onUpdate:modelValue":t[2]||(t[2]=n=>o(l).status=n),placeholder:"\u72B6\u6001","allow-clear":"",onChange:u},{default:a(()=>[e(F,{value:0,label:"\u6B63\u5E38"}),e(F,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(b,{type:"primary","html-type":"submit",onClick:u},{icon:a(()=>[e(I)]),default:a(()=>[t[3]||(t[3]=d(" \u67E5\u8BE2 "))]),_:1})]),_:1})]),_:1},8,["model","size"]),f("div",le,[e(b,{type:"primary",size:o(m).table.size,onClick:D},{icon:a(()=>[e(N)]),default:a(()=>[t[4]||(t[4]=d(" \u65B0\u589E "))]),_:1},8,["size"])])]),f("div",ie,[e(O,{loading:o(_),data:o(r).results,size:o(m).table.size,bordered:o(m).table.bordered,pagination:o(w),"sticky-header":!0,style:{height:"100%"},"column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:V,onPageChange:S,onPageSizeChange:T},{columns:a(()=>[e(i,{title:"\u7F16\u53F7","data-index":"id"}),e(i,{title:"\u540D\u79F0","data-index":"name"}),e(i,{title:"\u89D2\u8272\u7F16\u7801","data-index":"code"}),e(i,{title:"\u7C7B\u578B","data-index":"name"},{cell:a(({record:n})=>[n.type===v?(y(),E(h,{key:0,color:"blue"},{default:a(()=>t[5]||(t[5]=[d("\u7CFB\u7EDF")])),_:1})):(y(),E(h,{key:1},{default:a(()=>t[6]||(t[6]=[d("\u81EA\u5B9A\u4E49")])),_:1}))]),_:1}),e(i,{title:"\u5907\u6CE8","data-index":"remark"}),e(i,{title:"\u72B6\u6001","data-index":"status"},{cell:a(({record:n})=>[d(k(n.status===0?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:1}),e(i,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"},{cell:a(({record:n})=>[d(k(("useFormatDate"in s?s.useFormatDate:o(J))(n.createTime)),1)]),_:1}),e(i,{title:"\u64CD\u4F5C"},{cell:a(({record:n})=>[e(b,{type:"primary",size:o(m).table.size,disabled:n.type===v,onClick:de=>x(n.id)},{default:a(()=>t[7]||(t[7]=[d("\u7F16\u8F91")])),_:2},1032,["size","disabled","onClick"])]),_:1})]),_:1},8,["loading","data","size","bordered","pagination"])]),e(oe,{ref_key:"edit",ref:g,onOk:u},null,512)])}}});export{ke as default};
