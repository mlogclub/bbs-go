import{a as p,G as N,F as V,z as b,A as k}from"./index.25ef825f.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{d as x,j as d,b6 as B,a5 as D,aX as I,a6 as w,b9 as U,bI as S,D as H,aI as e,aH as n,u as m,E as T,C as $,aK as j}from"./arco.8a931ad5.js";const z={style:{"margin-top":"20px"}},Z=x({__name:"NavSettings",setup(G){const u=d(!1),o=d([]),_=[{title:"\u6807\u9898",dataIndex:"title",slotName:"name"},{title:"\u94FE\u63A5",dataIndex:"url",slotName:"url"},{title:"",dataIndex:"operation",slotName:"operation"}],c=async()=>{const a=await p.get("/api/admin/sys-config/all");o.value=a.siteNavs};c();const f=a=>{o.value=a},v=(a,l)=>{o.value.splice(l,1)},C=(a,l)=>{o.value.splice(l+1,0,{})},g=async()=>{u.value=!0;try{if(o.value.some(a=>N(a.title,a.url))){V("\u8BF7\u68C0\u67E5\u4F60\u7684\u5BFC\u822A\u914D\u7F6E\uFF0C\u5BFC\u822A\u6807\u9898\u548C\u94FE\u63A5\u4E0D\u80FD\u4E3A\u7A7A");return}await p.post("/api/admin/sys-config/save",{siteNavs:o.value}),await c(),b("\u63D0\u4EA4\u6210\u529F")}catch(a){k(a)}finally{u.value=!1}};return(a,l)=>{const r=B,y=D,i=I,A=w,E=U,F=S;return $(),H("div",null,[e(F,{columns:_,data:m(o),pagination:!1,draggable:{type:"handle",width:40},onChange:f},{name:n(({record:t})=>[e(r,{modelValue:t.title,"onUpdate:modelValue":s=>t.title=s},null,8,["modelValue","onUpdate:modelValue"])]),url:n(({record:t})=>[e(r,{modelValue:t.url,"onUpdate:modelValue":s=>t.url=s},null,8,["modelValue","onUpdate:modelValue"])]),operation:n(({record:t,rowIndex:s})=>[e(E,null,{default:n(()=>[e(i,{type:"primary",status:"danger",shape:"circle",onClick:h=>v(t,s)},{default:n(()=>[e(y)]),_:2},1032,["onClick"]),e(i,{type:"primary",status:"success",shape:"circle",onClick:h=>C(t,s)},{default:n(()=>[e(A)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data"]),T("div",z,[e(i,{type:"primary",loading:m(u),onClick:g},{default:n(()=>l[0]||(l[0]=[j("\u63D0\u4EA4")])),_:1},8,["loading"])])])}}});export{Z as _};
