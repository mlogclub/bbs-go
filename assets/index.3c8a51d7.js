import{f as I,a as C,y as S,x as V}from"./index.25ef825f.js";import{d as A,j as E,r as g,bE as N,ac as j,aX as O,ba as G,a6 as H,bA as J,bI as K,D as L,E as h,aI as t,aH as e,u as o,C as P,aK as u,aL as y,bG as U,b7 as X,bJ as $}from"./arco.8a931ad5.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css              */import q from"./Edit.fc8ff5dc.js";import"./chart.71b0189b.js";import"./vue.a0233a03.js";/* empty css               *//* empty css                *//* empty css                */import"./IconPicker.a8b616ef.js";/* empty css               */const M={class:"container"},Q={class:"container-header"},R={class:"action-btns"},W={class:"container-main"},Ct=A({__name:"index",setup(Y){const r=I(),p=E(!1),_=E(),m=g({status:0}),F=g({results:[]}),d=async()=>{p.value=!0;try{F.results=await C.postForm("/api/admin/menu/list",S(m))}finally{p.value=!1}};d();const z=()=>{_.value.show()},B=l=>{_.value.showEdit(l)},v=async l=>{const a=[];c(l);function c(f){f.forEach(i=>{a.push(i.id),i.children&&i.children.length&&c(i.children)})}await C.post("/api/admin/menu/update_sort",a),await d()};return(l,a)=>{const c=U,f=N,i=X,w=j,b=O,x=G,D=H,s=$,k=J,T=K;return P(),L("div",M,[h("div",Q,[t(x,{model:o(m),layout:"inline",size:o(r).table.size},{default:e(()=>[t(i,null,{default:e(()=>[t(f,{modelValue:o(m).status,"onUpdate:modelValue":a[0]||(a[0]=n=>o(m).status=n),placeholder:"\u72B6\u6001","allow-clear":"",onChange:d},{default:e(()=>[t(c,{value:0,label:"\u6B63\u5E38"}),t(c,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1}),t(i,null,{default:e(()=>[t(b,{type:"primary","html-type":"submit",onClick:d},{icon:e(()=>[t(w)]),default:e(()=>[a[1]||(a[1]=u(" \u67E5\u8BE2 "))]),_:1})]),_:1})]),_:1},8,["model","size"]),h("div",R,[t(b,{type:"primary",size:o(r).table.size,onClick:z},{icon:e(()=>[t(D)]),default:e(()=>[a[2]||(a[2]=u(" \u65B0\u589E "))]),_:1},8,["size"])])]),h("div",W,[t(T,{loading:o(p),data:o(F).results,size:o(r).table.size,bordered:o(r).table.bordered,pagination:!1,"show-empty-tree":"","column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:v},{columns:e(()=>[t(s,{title:"\u6807\u9898","data-index":"title"}),t(s,{title:"\u7C7B\u578B","data-index":"type"},{cell:e(({record:n})=>[t(k,{color:n.type==="menu"?"green":"red"},{default:e(()=>[u(y(n.type==="menu"?"\u83DC\u5355":"\u529F\u80FD"),1)]),_:2},1032,["color"])]),_:1}),t(s,{title:"\u540D\u79F0","data-index":"name"}),t(s,{title:"\u7EC4\u4EF6","data-index":"component"}),t(s,{title:"\u8DEF\u5F84","data-index":"path"}),t(s,{title:"\u72B6\u6001","data-index":"status"},{cell:e(({record:n})=>[u(y(n.status===0?"\u6B63\u5E38":"\u7981\u7528"),1)]),_:1}),t(s,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"},{cell:e(({record:n})=>[u(y(("useFormatDate"in l?l.useFormatDate:o(V))(n.createTime)),1)]),_:1}),t(s,{title:"\u64CD\u4F5C"},{cell:e(({record:n})=>[t(b,{type:"primary",size:o(r).table.size,onClick:Z=>B(n.id)},{default:e(()=>a[3]||(a[3]=[u("\u7F16\u8F91")])),_:2},1032,["size","onClick"])]),_:1})]),_:1},8,["loading","data","size","bordered"])]),t(q,{ref_key:"edit",ref:_,onOk:d},null,512)])}}});export{Ct as default};
