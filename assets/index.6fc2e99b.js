import{_ as T,B as V,b as _,y as D,z as F,A as H}from"./index.1b6e845e.js";/* empty css              *//* empty css                *//* empty css                *//* empty css                */import{e as l,o as S,aW as j,aV as z,R as E,bH as A,bT as K,b9 as L,C as v,F as c,aH as n,aG as i,B as u,aJ as g,aL as $,aI as G,D as J,u as e,aK as P,aD as U,j as W,aE as Y}from"./arco.ef2238db.js";import"./chart.ba8df0e9.js";import"./vue.f27dce51.js";const q={class:"container"},O={class:"container-header"},Q={style:{width:"max-content"}},X={class:"container-main"},Z={class:"role-item-list"},ee=["onClick"],ae={__name:"index",setup(te){const m=l(!1),o=l([]),r=l([]),a=l(),t=l([]),y={overflowY:"auto",height:"calc(100% - 46px)"};S(()=>{V(),k()});const k=async()=>{await Promise.all([b(),I()]),a.value||o.value&&o.value.length&&(a.value=o.value[0].id),await p()},w=async d=>{a.value=d.id,await p()},x=async()=>{try{await _.postForm("/api/admin/role/save_role_menus",D({roleId:a.value,menuIds:t.value?t.value.join(","):""})),F("\u4FDD\u5B58\u6210\u529F")}catch(d){H(d)}await p()},b=async()=>{o.value=await _.get("/api/admin/role/all_roles")},I=async()=>{try{m.value=!0,r.value=await _.get("/api/admin/menu/tree")}finally{m.value=!1}},p=async()=>{t.value=await _.get(`/api/admin/role/role_menu_ids?roleId=${a.value}`)};return(d,h)=>{const B=j,C=z,R=E,f=A,M=K,N=L;return u(),v("div",q,[c("div",O,[c("div",Q,[n(B,{type:"warning"},{default:i(()=>[g("\u8BBE\u7F6E\u89D2\u8272\u5BF9\u5E94\u6743\u9650")]),_:1})]),n(C,{type:"primary",onClick:x},{default:i(()=>[g("\u4FDD\u5B58")]),_:1})]),c("div",X,[n(f,{title:"\u89D2\u8272\u5217\u8868",class:"roles-panel","body-style":y},{default:i(()=>[c("div",Z,[(u(!0),v($,null,G(e(o),s=>(u(),v("div",{key:s.id,class:J(["role-item",{active:s.id===e(a)}]),onClick:se=>w(s)},[c("span",null,P(s.name),1),n(R)],10,ee))),128))])]),_:1}),n(f,{title:"\u83DC\u5355\u6743\u9650",class:"menus-panel","body-style":y},{default:i(()=>[n(N,{loading:e(m),dot:"",style:{width:"100%"}},{default:i(()=>[e(r)&&e(r).length?(u(),U(M,{key:0,"checked-keys":e(t),"onUpdate:checkedKeys":h[0]||(h[0]=s=>W(t)?t.value=s:null),data:e(r),checkable:!0,"default-expand-all":!0,size:"large"},null,8,["checked-keys","data"])):Y("",!0)]),_:1},8,["loading"])]),_:1})])])}}},ue=T(ae,[["__scopeId","data-v-cd9deebc"]]);export{ue as default};
