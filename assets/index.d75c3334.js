import{f as I,C as B,a as E,z as P,y as A}from"./index.91a3ffa1.js";import{d as N,j as z,r as y,c as j,o as H,b6 as J,ac as O,aX as U,ba as K,a6 as L,bA as M,bI as X,D as q,E as f,aI as a,aH as t,u as o,C as G,aK as d,aL as m,b7 as Q,bJ as R}from"./arco.d63f31ab.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import{_ as W}from"./Edit.vue_vue_type_script_setup_true_lang.6bcc47be.js";import"./chart.fcbefee0.js";import"./vue.576003d6.js";const Y={class:"container"},Z={class:"container-header"},x={class:"action-btns"},ee={class:"container-main"},ze=N({__name:"index",setup(ae){const p=I(),u=z(!1),_=z(),s=y({limit:20,page:1,name:void 0,path:void 0}),n=y({page:{page:1,limit:20,total:0},results:[]}),w=j(()=>({total:n.page.total,current:n.page.page,pageSize:n.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));H(()=>{B()});const r=async()=>{u.value=!0;try{const e=await E.postForm("/api/admin/api/list",P(s));n.page=e.page,n.results=e.results}finally{u.value=!1}};r();const $=()=>{_.value.show()},v=e=>{_.value.showEdit(e)},C=e=>{s.page=e,r()},k=e=>{s.limit=e,r()};return(e,c)=>{const b=J,g=Q,T=O,h=U,V=K,S=L,l=R,F=M,D=X;return G(),q("div",Y,[f("div",Z,[a(V,{model:o(s),layout:"inline",size:o(p).table.size},{default:t(()=>[a(g,null,{default:t(()=>[a(b,{modelValue:o(s).name,"onUpdate:modelValue":c[0]||(c[0]=i=>o(s).name=i),placeholder:e.$t("pages.api.name")},null,8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:t(()=>[a(b,{modelValue:o(s).path,"onUpdate:modelValue":c[1]||(c[1]=i=>o(s).path=i),placeholder:e.$t("pages.api.path")},null,8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:t(()=>[a(h,{type:"primary","html-type":"submit",onClick:r},{icon:t(()=>[a(T)]),default:t(()=>[d(" "+m(e.$t("pages.api.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),f("div",x,[a(h,{type:"primary",size:o(p).table.size,onClick:$},{icon:t(()=>[a(S)]),default:t(()=>[d(" "+m(e.$t("pages.api.add")),1)]),_:1},8,["size"])])]),f("div",ee,[a(D,{loading:o(u),data:o(n).results,size:o(p).table.size,bordered:o(p).table.bordered,pagination:o(w),"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"id",onPageChange:C,onPageSizeChange:k},{columns:t(()=>[a(l,{title:e.$t("pages.api.id"),"data-index":"id",width:100},null,8,["title"]),a(l,{title:e.$t("pages.api.method"),"data-index":"method",width:100},{cell:t(({record:i})=>[a(F,null,{default:t(()=>[d(m(i.method),1)]),_:2},1024)]),_:1},8,["title"]),a(l,{title:e.$t("pages.api.path"),"data-index":"path"},null,8,["title"]),a(l,{title:e.$t("pages.api.name"),"data-index":"name"},null,8,["title"]),a(l,{title:e.$t("pages.api.createTime"),"data-index":"createTime",width:200},{cell:t(({record:i})=>[d(m(("useFormatDate"in e?e.useFormatDate:o(A))(i.createTime)),1)]),_:1},8,["title"]),a(l,{title:e.$t("pages.api.actions"),width:100},{cell:t(({record:i})=>[a(h,{type:"primary",size:o(p).table.size,onClick:te=>v(i.id)},{default:t(()=>[d(m(e.$t("pages.api.edit")),1)]),_:2},1032,["size","onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])]),a(W,{ref_key:"edit",ref:_,onOk:r},null,512)])}}});export{ze as default};
