import{H as N,g as q,b as p,A as v,y as z,z as H}from"./index.1b6e845e.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css                */import{e as c,r as O,bR as R,b4 as $,bE as A,b8 as G,aD as L,aG as r,u as e,a$ as j,B as y,aH as l,C as K,aK as V,aE as M,b5 as J,bG as P}from"./arco.ef2238db.js";import"./chart.ba8df0e9.js";import"./vue.f27dce51.js";const Q={key:0},ne={__name:"DictEdit",emits:["ok"],setup(W,{expose:I,emit:k}){const w=k,d=N(),C=q(),u=c(),o=O({visible:!1,isCreate:!1,title:""}),a=c({typeId:void 0,parentId:void 0,label:void 0,value:void 0,status:0}),g={name:[{required:!0,message:"\u8BF7\u8F93\u5165Name"}],label:[{required:!0,message:"\u8BF7\u8F93\u5165Label"}],value:[{required:!0,message:"\u8BF7\u8F93\u5165Value"}],status:[{required:!0}]},f=c([]),b=async()=>{f.value=await p.get(`/api/admin/dict/dicts?typeId=${d.currentType.id}`)},E=async()=>{u.value.resetFields(),o.isCreate=!0,o.title="\u65B0\u589E",await b(),o.visible=!0},S=async n=>{u.value.resetFields(),o.isCreate=!1,o.title="\u7F16\u8F91",await b();try{a.value=await p.get(`/api/admin/dict/${n}`)}catch(t){v(t)}o.visible=!0},F=()=>{u.value.resetFields()},T=async n=>{if(await u.value.validate()){n(!1);return}try{const i=o.isCreate?"/api/admin/dict/create":"/api/admin/dict/update";o.isCreate&&(a.value.typeId=d.currentTypeId),await p.postForm(i,z(a.value)),H("\u63D0\u4EA4\u6210\u529F"),w("ok"),n(!0)}catch(i){v(i),n(!1)}};return I({show:E,showEdit:S}),(n,t)=>{const i=J,B=R,m=$,_=P,D=A,U=G,x=j;return y(),L(x,{visible:e(o).visible,"onUpdate:visible":t[5]||(t[5]=s=>e(o).visible=s),title:e(o).title,size:e(C).table.size,onCancel:F,onBeforeOk:T},{default:r(()=>[l(U,{ref_key:"formRef",ref:u,model:e(a),rules:g},{default:r(()=>[l(i,{label:"\u7C7B\u578B",field:"typeId"},{default:r(()=>[e(d).currentType?(y(),K("span",Q,V(e(d).currentType.code)+"\xA0("+V(e(d).currentType.name)+")",1)):M("",!0)]),_:1}),l(i,{label:"\u4E0A\u7EA7",field:"parentId"},{default:r(()=>[l(B,{modelValue:e(a).parentId,"onUpdate:modelValue":t[0]||(t[0]=s=>e(a).parentId=s),"allow-clear":"",data:e(f),"field-names":{key:"id",title:"label"},placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7"},null,8,["modelValue","data"])]),_:1}),l(i,{label:"Name",field:"label"},{default:r(()=>[l(m,{modelValue:e(a).name,"onUpdate:modelValue":t[1]||(t[1]=s=>e(a).name=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"Label",field:"label"},{default:r(()=>[l(m,{modelValue:e(a).label,"onUpdate:modelValue":t[2]||(t[2]=s=>e(a).label=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"Value",field:"value"},{default:r(()=>[l(m,{modelValue:e(a).value,"onUpdate:modelValue":t[3]||(t[3]=s=>e(a).value=s)},null,8,["modelValue"])]),_:1}),l(i,{label:"\u72B6\u6001",field:"status"},{default:r(()=>[l(D,{modelValue:e(a).status,"onUpdate:modelValue":t[4]||(t[4]=s=>e(a).status=s)},{default:r(()=>[l(_,{value:0,label:"\u542F\u7528"}),l(_,{value:1,label:"\u7981\u7528"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}};export{ne as default};
