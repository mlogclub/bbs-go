import{f as U,C as j,a as k,z as H,y as J}from"./index.91a3ffa1.js";import{d as G,j as C,r as v,c as K,o as L,b6 as M,bE as X,ac as q,aX as Q,ba as R,a6 as W,bA as Y,bI as Z,D as x,E as f,aI as a,aH as t,u as o,C as y,aK as d,aL as p,aE as w,b7 as ee,bG as ae,bJ as te}from"./arco.d63f31ab.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import{_ as oe}from"./Edit.vue_vue_type_script_setup_true_lang.378753c3.js";import"./chart.fcbefee0.js";import"./vue.576003d6.js";const le={class:"container"},se={class:"container-header"},ne={class:"action-btns"},ie={class:"container-main"},V=0,Ve=G({__name:"index",setup(re){const u=U(),_=C(!1),b=C(),s=v({limit:20,page:1,name:void 0,code:void 0,status:0}),m=v({page:{page:1,limit:20,total:0},results:[]}),S=K(()=>({total:m.page.total,current:m.page.page,pageSize:m.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));L(()=>{j()});const r=async()=>{_.value=!0;try{const e=await k.postForm("/api/admin/role/list",H(s));m.page=e.page,m.results=e.results}finally{_.value=!1}};r();const T=()=>{b.value.show()},D=e=>{b.value.showEdit(e)},E=async e=>{const n=[];e.forEach(c=>{n.push(c.id)}),await k.post("/api/admin/role/update_sort",n),await r()},F=e=>{s.page=e,r()},I=e=>{s.limit=e,r()};return(e,n)=>{const c=M,g=ee,$=ae,B=X,N=q,h=Q,P=R,A=W,i=te,z=Y,O=Z;return y(),x("div",le,[f("div",se,[a(P,{model:o(s),layout:"inline",size:o(u).table.size},{default:t(()=>[a(g,null,{default:t(()=>[a(c,{modelValue:o(s).name,"onUpdate:modelValue":n[0]||(n[0]=l=>o(s).name=l),placeholder:e.$t("pages.role.name")},null,8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:t(()=>[a(c,{modelValue:o(s).code,"onUpdate:modelValue":n[1]||(n[1]=l=>o(s).code=l),placeholder:e.$t("pages.role.code")},null,8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:t(()=>[a(B,{modelValue:o(s).status,"onUpdate:modelValue":n[2]||(n[2]=l=>o(s).status=l),placeholder:e.$t("pages.role.status"),"allow-clear":"",onChange:r},{default:t(()=>[a($,{value:0,label:e.$t("pages.role.statusNormal")},null,8,["label"]),a($,{value:1,label:e.$t("pages.role.statusDisabled")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:t(()=>[a(h,{type:"primary","html-type":"submit",onClick:r},{icon:t(()=>[a(N)]),default:t(()=>[d(" "+p(e.$t("pages.role.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),f("div",ne,[a(h,{type:"primary",size:o(u).table.size,onClick:T},{icon:t(()=>[a(A)]),default:t(()=>[d(" "+p(e.$t("pages.role.add")),1)]),_:1},8,["size"])])]),f("div",ie,[a(O,{loading:o(_),data:o(m).results,size:o(u).table.size,bordered:o(u).table.bordered,pagination:o(S),"sticky-header":!0,style:{height:"100%"},"column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:E,onPageChange:F,onPageSizeChange:I},{columns:t(()=>[a(i,{title:e.$t("pages.role.id"),"data-index":"id"},null,8,["title"]),a(i,{title:e.$t("pages.role.name"),"data-index":"name"},null,8,["title"]),a(i,{title:e.$t("pages.role.code"),"data-index":"code"},null,8,["title"]),a(i,{title:e.$t("pages.role.type"),"data-index":"name"},{cell:t(({record:l})=>[l.type===V?(y(),w(z,{key:0,color:"blue"},{default:t(()=>[d(p(e.$t("pages.role.typeSystem")),1)]),_:1})):(y(),w(z,{key:1},{default:t(()=>[d(p(e.$t("pages.role.typeCustom")),1)]),_:1}))]),_:1},8,["title"]),a(i,{title:e.$t("pages.role.remark"),"data-index":"remark"},null,8,["title"]),a(i,{title:e.$t("pages.role.status"),"data-index":"status"},{cell:t(({record:l})=>[d(p(l.status===0?e.$t("pages.role.statusNormal"):e.$t("pages.role.statusDisabled")),1)]),_:1},8,["title"]),a(i,{title:e.$t("pages.role.createTime"),"data-index":"createTime"},{cell:t(({record:l})=>[d(p(("useFormatDate"in e?e.useFormatDate:o(J))(l.createTime)),1)]),_:1},8,["title"]),a(i,{title:e.$t("pages.role.actions")},{cell:t(({record:l})=>[a(h,{type:"primary",size:o(u).table.size,disabled:l.type===V,onClick:de=>D(l.id)},{default:t(()=>[d(p(e.$t("pages.role.edit")),1)]),_:2},1032,["size","disabled","onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])]),a(oe,{ref_key:"edit",ref:b,onOk:r},null,512)])}}});export{Ve as default};
