import{g as z,A as f,b as v,y as A,z as P}from"./index.1ba30acb.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{d as S,e as b,r as O,bE as R,b4 as q,b8 as G,aD as F,aG as o,u as e,a$ as H,B as c,aH as t,C as L,aI as M,aL as N,bG as $,b5 as j}from"./arco.d3370bfb.js";import{I as T}from"./ImageUpload.ba5c55cd.js";const le=S({__name:"Edit",emits:["ok"],setup(J,{expose:B,emit:g}){const y=g,k=z(),r=b(),i=O({visible:!1,isCreate:!1,title:""}),u=b({type:0,username:void 0,email:void 0,nickname:void 0,avatar:void 0,gender:void 0,homePage:void 0,description:void 0,roleIds:void 0}),V=b(),C={type:[{required:!0,message:"\u8BF7\u9009\u62E9\u7528\u6237\u7C7B\u578B"}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"}]},E=async()=>{r.value.resetFields(),i.isCreate=!0,i.title="\u65B0\u589E";try{await _()}catch(n){f(n)}i.visible=!0},U=async n=>{r.value.resetFields(),i.isCreate=!1,i.title="\u7F16\u8F91";try{u.value=await v.get(`/api/admin/user/${n}`),await _()}catch(a){f(a)}i.visible=!0},_=async()=>{V.value=await v.get("/api/admin/role/roles")},w=()=>{r.value.resetFields()},I=async n=>{if(await r.value.validate()){n(!1);return}try{const s=i.isCreate?"/api/admin/user/create":"/api/admin/user/update";await v.postForm(s,A(u.value)),P("\u63D0\u4EA4\u6210\u529F"),y("ok"),n(!0)}catch(s){f(s),n(!1)}};return B({show:E,showEdit:U}),(n,a)=>{const s=$,p=R,d=j,m=q,D=G,x=H;return c(),F(x,{visible:e(i).visible,"onUpdate:visible":a[9]||(a[9]=l=>e(i).visible=l),title:e(i).title,size:e(k).table.size,onCancel:w,onBeforeOk:I},{default:o(()=>[t(D,{ref_key:"formRef",ref:r,model:e(u),rules:C},{default:o(()=>[t(d,{label:"\u7C7B\u578B",field:"type"},{default:o(()=>[t(p,{modelValue:e(u).type,"onUpdate:modelValue":a[0]||(a[0]=l=>e(u).type=l),placeholder:"\u7528\u6237\u7C7B\u578B"},{default:o(()=>[t(s,{value:0,label:"\u7528\u6237"}),t(s,{value:1,label:"\u5458\u5DE5"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"\u6635\u79F0",field:"nickname"},{default:o(()=>[t(m,{modelValue:e(u).nickname,"onUpdate:modelValue":a[1]||(a[1]=l=>e(u).nickname=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u5934\u50CF",field:"avatar"},{default:o(()=>[t(T,{modelValue:e(u).avatar,"onUpdate:modelValue":a[2]||(a[2]=l=>e(u).avatar=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u7528\u6237\u540D",field:"username"},{default:o(()=>[t(m,{modelValue:e(u).username,"onUpdate:modelValue":a[3]||(a[3]=l=>e(u).username=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u90AE\u7BB1",field:"email"},{default:o(()=>[t(m,{modelValue:e(u).email,"onUpdate:modelValue":a[4]||(a[4]=l=>e(u).email=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u6027\u522B",field:"gender"},{default:o(()=>[t(p,{modelValue:e(u).gender,"onUpdate:modelValue":a[5]||(a[5]=l=>e(u).gender=l)},{default:o(()=>[t(s,{value:"Male",label:"\u7537"}),t(s,{value:"Female",label:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"\u4E3B\u9875",field:"homePage"},{default:o(()=>[t(m,{modelValue:e(u).homePage,"onUpdate:modelValue":a[6]||(a[6]=l=>e(u).homePage=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u63CF\u8FF0",field:"description"},{default:o(()=>[t(m,{modelValue:e(u).description,"onUpdate:modelValue":a[7]||(a[7]=l=>e(u).description=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u89D2\u8272",field:"roles"},{default:o(()=>[t(p,{modelValue:e(u).roleIds,"onUpdate:modelValue":a[8]||(a[8]=l=>e(u).roleIds=l),multiple:"",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:o(()=>[(c(!0),L(N,null,M(e(V),l=>(c(),F(s,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}});export{le as _};
