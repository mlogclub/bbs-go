import{v,a as c,A as D,B as H}from"./index.a8e4cb9d.js";/* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                */import{d as K,j as T,r as L,b6 as k,bK as S,bE as B,bL as E,aV as F,bl as h,aX as j,ba as z,aE as y,aH as n,u as l,C as g,aI as a,D as A,aJ as G,aM as J,aK as d,aL as m,b7 as M,bG as O}from"./arco.db61f1fb.js";import{I as X}from"./ImageUpload.2445eb18.js";const se=K({__name:"CommonSettings",setup(q){const{t:N}=v.exports.useI18n(),u=T(!1),e=L({siteTitle:"",siteLogo:"",siteDescription:"",siteKeywords:[],siteNotification:"",recommendTags:[],defaultNodeId:void 0,urlRedirect:!1,enableHideContent:!1,modules:{tweet:!1,topic:!1,article:!1}}),f=T([]),b=async()=>{const t=await c.get("/api/admin/sys-config/configs");e.siteTitle=t.siteTitle,e.siteLogo=t.siteLogo,e.siteDescription=t.siteDescription,e.siteKeywords=t.siteKeywords,e.siteNotification=t.siteNotification,e.recommendTags=t.recommendTags,e.defaultNodeId=t.defaultNodeId,e.urlRedirect=t.urlRedirect,e.enableHideContent=t.enableHideContent,e.modules=t.modules,f.value=await c.get("/api/admin/topic-node/nodes")};b();const C=async()=>{u.value=!0;try{await c.post("/api/admin/sys-config/save",e),await b(),D(N("pages.settings.common.message.submitSuccess"))}catch(t){H(t)}finally{u.value=!1}};return(t,s)=>{const I=k,i=M,V=S,r=B,_=O,p=E,w=F,$=h,U=j,R=z;return g(),y(R,{model:l(e),"auto-label-width":""},{default:n(()=>[a(i,{label:t.$t("pages.settings.common.siteTitle")},{default:n(()=>[a(I,{modelValue:l(e).siteTitle,"onUpdate:modelValue":s[0]||(s[0]=o=>l(e).siteTitle=o),type:"text",placeholder:t.$t("pages.settings.common.placeholder.siteTitle")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.siteLogo")},{default:n(()=>[a(X,{modelValue:l(e).siteLogo,"onUpdate:modelValue":s[1]||(s[1]=o=>l(e).siteLogo=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.siteDescription")},{default:n(()=>[a(V,{modelValue:l(e).siteDescription,"onUpdate:modelValue":s[2]||(s[2]=o=>l(e).siteDescription=o),"auto-size":{minRows:2,maxRows:5},placeholder:t.$t("pages.settings.common.placeholder.siteDescription")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.siteKeywords")},{default:n(()=>[a(r,{modelValue:l(e).siteKeywords,"onUpdate:modelValue":s[3]||(s[3]=o=>l(e).siteKeywords=o),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:t.$t("pages.settings.common.placeholder.siteKeywords")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.siteNotification")},{default:n(()=>[a(V,{modelValue:l(e).siteNotification,"onUpdate:modelValue":s[4]||(s[4]=o=>l(e).siteNotification=o),"auto-size":{minRows:2,maxRows:5},placeholder:t.$t("pages.settings.common.placeholder.siteNotification")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.recommendTags")},{default:n(()=>[a(r,{modelValue:l(e).recommendTags,"onUpdate:modelValue":s[5]||(s[5]=o=>l(e).recommendTags=o),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:t.$t("pages.settings.common.placeholder.recommendTags")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.defaultNodeId")},{default:n(()=>[a(r,{modelValue:l(e).defaultNodeId,"onUpdate:modelValue":s[6]||(s[6]=o=>l(e).defaultNodeId=o),placeholder:t.$t("pages.settings.common.placeholder.defaultNodeId")},{default:n(()=>[(g(!0),A(J,null,G(l(f),o=>(g(),y(_,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.modules")},{default:n(()=>[a(p,{modelValue:l(e).modules.tweet,"onUpdate:modelValue":s[7]||(s[7]=o=>l(e).modules.tweet=o),border:""},{default:n(()=>[d(m(t.$t("pages.settings.common.tweet")),1)]),_:1},8,["modelValue"]),a(p,{modelValue:l(e).modules.topic,"onUpdate:modelValue":s[8]||(s[8]=o=>l(e).modules.topic=o),border:""},{default:n(()=>[d(m(t.$t("pages.settings.common.topic")),1)]),_:1},8,["modelValue"]),a(p,{modelValue:l(e).modules.article,"onUpdate:modelValue":s[9]||(s[9]=o=>l(e).modules.article=o),border:""},{default:n(()=>[d(m(t.$t("pages.settings.common.article")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.urlRedirect")},{default:n(()=>[a($,{content:t.$t("pages.settings.common.urlRedirectTooltip"),placement:"top"},{default:n(()=>[a(w,{modelValue:l(e).urlRedirect,"onUpdate:modelValue":s[10]||(s[10]=o=>l(e).urlRedirect=o)},null,8,["modelValue"])]),_:1},8,["content"])]),_:1},8,["label"]),a(i,{label:t.$t("pages.settings.common.enableHideContent")},{default:n(()=>[a($,{content:t.$t("pages.settings.common.enableHideContentTooltip"),placement:"top"},{default:n(()=>[a(w,{modelValue:l(e).enableHideContent,"onUpdate:modelValue":s[11]||(s[11]=o=>l(e).enableHideContent=o)},null,8,["modelValue"])]),_:1},8,["content"])]),_:1},8,["label"]),a(i,null,{default:n(()=>[a(U,{type:"primary",loading:l(u),onClick:C},{default:n(()=>[d(m(t.$t("pages.settings.common.submit")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}});export{se as _};
