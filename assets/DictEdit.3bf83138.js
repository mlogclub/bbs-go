import{v as z,J as N,f as j,a as c,B as g,z as O,A}from"./index.3dbbb787.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css                */import{j as f,r as H,bU as L,b6 as R,bE as G,ba as J,aE as M,aH as n,u as e,b1 as P,C as y,aI as s,D as K,aL as V,aF as Q,b7 as W,bG as X}from"./arco.26e78f37.js";import"./chart.28f7f44a.js";import"./vue.9982d51c.js";const Y={key:0},ue={__name:"DictEdit",emits:["ok"],setup(Z,{expose:I,emit:$}){const{t:r}=z.exports.useI18n(),k=$,u=N(),w=j(),p=f(),i=H({visible:!1,isCreate:!1,title:""}),l=f({typeId:void 0,parentId:void 0,label:void 0,value:void 0,status:0}),C={name:[{required:!0,message:r("pages.dict.pleaseInputName")}],label:[{required:!0,message:r("pages.dict.pleaseInputLabel")}],value:[{required:!0,message:r("pages.dict.pleaseInputValue")}],status:[{required:!0}]},b=f([]),v=async()=>{b.value=await c.get(`/api/admin/dict/dicts?typeId=${u.currentType.id}`)},S=async()=>{p.value.resetFields(),i.isCreate=!0,i.title=r("pages.dict.add"),await v(),i.visible=!0},E=async a=>{p.value.resetFields(),i.isCreate=!1,i.title=r("pages.dict.edit"),await v();try{l.value=await c.get(`/api/admin/dict/${a}`)}catch(t){g(t)}i.visible=!0},F=()=>{p.value.resetFields()},T=async a=>{if(await p.value.validate()){a(!1);return}try{const d=i.isCreate?"/api/admin/dict/create":"/api/admin/dict/update";i.isCreate&&(l.value.typeId=u.currentTypeId),await c.postForm(d,O(l.value)),A(r("pages.dict.submitSuccess")),k("ok"),a(!0)}catch(d){g(d),a(!1)}};return I({show:S,showEdit:E}),(a,t)=>{const d=W,U=L,m=R,_=X,B=G,D=J,q=P;return y(),M(q,{visible:e(i).visible,"onUpdate:visible":t[5]||(t[5]=o=>e(i).visible=o),title:e(i).title,size:e(w).table.size,onCancel:F,onBeforeOk:T},{default:n(()=>[s(D,{ref_key:"formRef",ref:p,model:e(l),rules:C},{default:n(()=>[s(d,{label:a.$t("pages.dict.type"),field:"typeId"},{default:n(()=>[e(u).currentType?(y(),K("span",Y,V(e(u).currentType.code)+"\xA0("+V(e(u).currentType.name)+")",1)):Q("",!0)]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.parent"),field:"parentId"},{default:n(()=>[s(U,{modelValue:e(l).parentId,"onUpdate:modelValue":t[0]||(t[0]=o=>e(l).parentId=o),"allow-clear":"",data:e(b),"field-names":{key:"id",title:"label"},placeholder:a.$t("pages.dict.pleaseSelectParent")},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.name"),field:"name"},{default:n(()=>[s(m,{modelValue:e(l).name,"onUpdate:modelValue":t[1]||(t[1]=o=>e(l).name=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.label"),field:"label"},{default:n(()=>[s(m,{modelValue:e(l).label,"onUpdate:modelValue":t[2]||(t[2]=o=>e(l).label=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.value"),field:"value"},{default:n(()=>[s(m,{modelValue:e(l).value,"onUpdate:modelValue":t[3]||(t[3]=o=>e(l).value=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.status"),field:"status"},{default:n(()=>[s(B,{modelValue:e(l).status,"onUpdate:modelValue":t[4]||(t[4]=o=>e(l).status=o)},{default:n(()=>[s(_,{value:0,label:a.$t("pages.dict.enabled")},null,8,["label"]),s(_,{value:1,label:a.$t("pages.dict.disabled")},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}};export{ue as default};
