import{f as N,C as A,a as O,z as P,y as j}from"./index.3dbbb787.js";import{d as H,j as z,r as V,c as J,o as G,b6 as K,bE as L,ac as M,aX as X,ba as Y,bA as q,bo as Q,bI as R,D as _,E as y,aI as t,aH as l,u as o,C as c,aK as d,aL as r,aE as S,b7 as W,bG as Z,bJ as x}from"./arco.26e78f37.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{_ as ee}from"./Edit.vue_vue_type_script_setup_true_lang.614db1f8.js";import"./chart.28f7f44a.js";import"./vue.9982d51c.js";import"./ImageUpload.d57bf194.js";/* empty css               */const te={class:"container"},ae={class:"container-header"},le={class:"container-main"},oe=["src"],se={key:1},Te=H({__name:"index",setup(ne){const g=N(),f=z(!1),$=z(),s=V({limit:20,page:1,id:void 0,username:void 0,nickname:void 0,type:void 0}),p=V({page:{page:1,limit:20,total:0},results:[]}),C=J(()=>({total:p.page.total,current:p.page.page,pageSize:p.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));G(()=>{A()});const u=async()=>{f.value=!0;try{const e=await O.postForm("/api/admin/user/list",P(s));p.page=e.page,p.results=e.results}finally{f.value=!1}};u();const T=e=>{$.value.showEdit(e)},w=e=>{s.page=e,u()},F=e=>{s.limit=e,u()};return(e,n)=>{const b=K,m=W,h=Z,D=L,E=M,v=X,U=Y,i=x,k=q,B=Q,I=R;return c(),_("div",te,[y("div",ae,[t(U,{model:o(s),layout:"inline",size:o(g).table.size},{default:l(()=>[t(m,null,{default:l(()=>[t(b,{modelValue:o(s).id,"onUpdate:modelValue":n[0]||(n[0]=a=>o(s).id=a),placeholder:e.$t("pages.user.filter.id")},null,8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:l(()=>[t(b,{modelValue:o(s).username,"onUpdate:modelValue":n[1]||(n[1]=a=>o(s).username=a),placeholder:e.$t("pages.user.filter.username")},null,8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:l(()=>[t(b,{modelValue:o(s).nickname,"onUpdate:modelValue":n[2]||(n[2]=a=>o(s).nickname=a),placeholder:e.$t("pages.user.filter.nickname")},null,8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:l(()=>[t(D,{modelValue:o(s).type,"onUpdate:modelValue":n[3]||(n[3]=a=>o(s).type=a),placeholder:e.$t("pages.user.filter.type"),"allow-clear":""},{default:l(()=>[t(h,{value:0,label:e.$t("pages.user.filter.typeUser")},null,8,["label"]),t(h,{value:1,label:e.$t("pages.user.filter.typeStaff")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:l(()=>[t(v,{type:"primary","html-type":"submit",onClick:u},{icon:l(()=>[t(E)]),default:l(()=>[d(" "+r(e.$t("pages.user.filter.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),n[4]||(n[4]=y("div",{class:"action-btns"},null,-1))]),y("div",le,[t(I,{loading:o(f),data:o(p).results,size:o(g).table.size,bordered:o(g).table.bordered,pagination:o(C),"sticky-header":!0,style:{height:"100%"},"column-resizable":"",onPageChange:w,onPageSizeChange:F},{columns:l(()=>[t(i,{title:e.$t("pages.user.table.id"),"data-index":"id"},null,8,["title"]),t(i,{title:e.$t("pages.user.table.type"),"data-index":"type"},{cell:l(({record:a})=>[a.type===1?(c(),S(k,{key:0,color:"blue"},{default:l(()=>[d(r(e.$t("pages.user.filter.typeStaff")),1)]),_:1})):(c(),S(k,{key:1},{default:l(()=>[d(r(e.$t("pages.user.filter.typeUser")),1)]),_:1}))]),_:1},8,["title"]),t(i,{title:e.$t("pages.user.table.avatar"),"data-index":"avatar"},{cell:l(({record:a})=>[t(B,null,{default:l(()=>[a.avatar?(c(),_("img",{key:0,src:a.avatar},null,8,oe)):(c(),_("span",se,r(a.nickname),1))]),_:2},1024)]),_:1},8,["title"]),t(i,{title:e.$t("pages.user.table.nickname"),"data-index":"nickname"},null,8,["title"]),t(i,{title:e.$t("pages.user.table.email"),"data-index":"email"},null,8,["title"]),t(i,{title:e.$t("pages.user.table.score"),"data-index":"score"},null,8,["title"]),t(i,{title:e.$t("pages.user.table.forbidden"),"data-index":"forbidden"},{cell:l(({record:a})=>[d(r(a.forbidden?e.$t("pages.user.table.forbiddenYes"):e.$t("pages.user.table.forbiddenNo")),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.user.table.createTime"),"data-index":"createTime"},{cell:l(({record:a})=>[d(r(("useFormatDate"in e?e.useFormatDate:o(j))(a.createTime)),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.user.table.action")},{cell:l(({record:a})=>[t(v,{type:"primary",size:o(g).table.size,onClick:ie=>T(a.id)},{default:l(()=>[d(r(e.$t("pages.user.table.edit")),1)]),_:2},1032,["size","onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])]),t(ee,{ref_key:"edit",ref:$,onOk:u},null,512)])}}});export{Te as default};
