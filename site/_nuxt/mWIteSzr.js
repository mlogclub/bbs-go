import{S as v}from"./DmwfaKwn.js";import{a as R}from"./DWG3xSCv.js";import{D as m,n as u,an as h,W as p,M as $,bg as k,V as d,p as w,ap as T}from"./IMHBmAvM.js";function E(){const o=u(),c=m(()=>["#text","#comment"].includes(o.value?.$el.nodeName)?o.value?.$el.nextElementSibling:R(o));return{primitiveElement:o,currentElement:c}}const M="data-reka-collection-item";function P(o={}){const{key:c="",isProvider:A=!1}=o,f=`${c}CollectionProvider`;let e;if(A){const l=u(new Map);e={collectionRef:u(),itemMap:l},T(f,e)}else e=h(f);const y=(l=!1)=>{const n=e.collectionRef.value;if(!n)return[];const r=Array.from(n.querySelectorAll(`[${M}]`)),t=Array.from(e.itemMap.value.values()).sort((a,s)=>r.indexOf(a.ref)-r.indexOf(s.ref));return l?t:t.filter(a=>a.ref.dataset.disabled!=="")},C=p({name:"CollectionSlot",inheritAttrs:!1,setup(l,{slots:n,attrs:r}){const{primitiveElement:i,currentElement:t}=E();return w(t,()=>{e.collectionRef.value=t.value}),()=>d(v,{ref:i,...r},n)}}),S=p({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(l,{slots:n,attrs:r}){const{primitiveElement:i,currentElement:t}=E();return $(a=>{if(t.value){const s=k(t.value);e.itemMap.value.set(s,{ref:t.value,value:l.value}),a(()=>e.itemMap.value.delete(s))}}),()=>d(v,{...r,[M]:"",ref:i},n)}}),x=m(()=>Array.from(e.itemMap.value.values())),I=m(()=>e.itemMap.value.size);return{getItems:y,reactiveItems:x,itemMapSize:I,CollectionSlot:C,CollectionItem:S}}export{E as a,P as u};
