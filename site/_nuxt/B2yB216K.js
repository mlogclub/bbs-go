import{_ as L}from"./BptVNsbJ.js";import{_ as A}from"./UwGaH15d.js";import{m as M,j as N,C as S,g as B,e as t,o as r,c as l,b as e,d,w as p,f as k,t as a,s as u,h as f,F as T,r as j,N as D,K as F,D as i,a4 as V}from"./IMHBmAvM.js";import{M as z}from"./Doo5uwP7.js";import{C as R}from"./BOEcqi2e.js";const U=M("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),E={key:0,class:"rounded-md border border-slate-200/70 bg-white p-4 dark:border-slate-800/80 dark:bg-slate-900 inset-0 bg-linear-to-br from-indigo-50/80 via-white/70 to-emerald-50/80 dark:from-indigo-900/30 dark:via-slate-900/60 dark:to-emerald-900/20"},q={class:"flex items-center gap-3"},G={class:"min-w-0 flex-1"},H={class:"mt-1 text-xs text-slate-500 dark:text-slate-400 line-clamp-2"},K={key:0,class:"mt-2 flex flex-wrap items-center justify-between gap-2"},W={key:0,class:"inline-flex items-center rounded-full bg-amber-50 px-2 py-0.5 text-[11px] font-semibold text-amber-700 dark:bg-amber-900/40 dark:text-amber-100"},X=["title"],Y=["src","alt"],J={key:1,class:"relative mt-4"},O={class:"flex items-center justify-between text-[11px] text-slate-500 dark:text-slate-400"},Q={class:"font-semibold text-slate-700 dark:text-slate-200"},Z={class:"mt-2 h-2 w-full overflow-hidden rounded-full bg-slate-200/70 dark:bg-slate-800"},ee={class:"relative mt-4 grid grid-cols-4 gap-2 text-center"},te={class:"rounded-xl bg-white/70 px-2 py-2 text-xs shadow-sm ring-1 ring-slate-100/80 dark:bg-slate-900/70 dark:ring-slate-800"},se={class:"text-[11px] text-slate-500 dark:text-slate-400"},ae={class:"text-sm font-semibold text-slate-900 dark:text-slate-50"},oe={class:"rounded-xl bg-white/70 px-2 py-2 text-xs shadow-sm ring-1 ring-slate-100/80 dark:bg-slate-900/70 dark:ring-slate-800"},re={class:"text-[11px] text-slate-500 dark:text-slate-400"},le={class:"text-sm font-semibold text-slate-900 dark:text-slate-50"},ie={class:"rounded-xl bg-white/70 px-2 py-2 text-xs shadow-sm ring-1 ring-slate-100/80 dark:bg-slate-900/70 dark:ring-slate-800"},ne={class:"text-[11px] text-slate-500 dark:text-slate-400"},de={class:"text-sm font-semibold text-slate-900 dark:text-slate-50"},ce={class:"rounded-xl bg-white/70 px-2 py-2 text-xs shadow-sm ring-1 ring-slate-100/80 dark:bg-slate-900/70 dark:ring-slate-800"},xe={class:"text-[11px] text-slate-500 dark:text-slate-400"},ue={class:"text-sm font-semibold text-slate-900 dark:text-slate-50"},me={class:"relative flex items-center gap-3"},ge={class:"min-w-0 flex-1"},pe={class:"text-sm font-semibold text-slate-700 dark:text-slate-200"},_e={class:"mt-1 text-xs text-slate-500 dark:text-slate-400"},he={class:"relative inline-flex items-center justify-center rounded-lg bg-indigo-600 px-3 py-2 text-[11px] font-semibold text-white shadow-sm transition hover:bg-indigo-500"},ke=6,$e={__name:"TasksUserCard",async setup(fe){let c,_;const h=N(),b=S(),s=i(()=>b.user),v=i(()=>`/api/badge/badges?userId=${s.value?.id??0}`),{data:w}=([c,_]=B(()=>F(v,{initialCache:!1})),c=await c,_(),c),y=i(()=>s.value?.id?`/user/${s.value.id}/badges`:"#"),C=i(()=>w.value??[]),m=i(()=>C.value.filter(o=>o.owned===!0)),$=i(()=>m.value.slice(0,ke)),P=()=>{const o=h.fullPath.startsWith("/user/signin")?"/":h.fullPath;V(o)};return(o,x)=>{const I=L,g=A;return t(s)?(r(),l("div",E,[e("div",q,[d(g,{to:`/user/${t(s).id}`,class:"shrink-0"},{default:p(()=>[d(I,{user:t(s),size:56},null,8,["user"])]),_:1},8,["to"]),e("div",G,[d(g,{to:`/user/${t(s).id}`,class:"block truncate text-base font-semibold text-slate-900 hover:text-indigo-600 dark:text-slate-50"},{default:p(()=>[k(a(t(s).nickname),1)]),_:1},8,["to"]),e("p",H,a(t(s).description||o.$t("user.tasks.userCard.noDescription")),1)])]),t(s).levelTitle||t(m).length>0?(r(),l("div",K,[t(s).levelTitle?(r(),l("span",W,a(t(s).levelTitle),1)):u("",!0),t(m).length>0?(r(),f(g,{key:1,to:t(y),class:"flex flex-wrap items-center transition hover:opacity-90"},{default:p(()=>[(r(!0),l(T,null,j(t($),n=>(r(),l("span",{key:n.id,title:n.title},[n.icon?(r(),l("img",{key:0,src:n.icon,alt:n.title,class:"h-5 w-5 object-contain"},null,8,Y)):(r(),f(t(z),{key:1,class:"h-3.5 w-3.5 text-amber-600 dark:text-amber-400"}))],8,X))),128)),d(t(R),{class:"h-4 w-4 shrink-0 text-slate-400 dark:text-slate-500"})]),_:1},8,["to"])):u("",!0)])):u("",!0),t(s).expProgress?(r(),l("div",J,[e("div",O,[e("span",null,a(o.$t("user.tasks.userCard.expProgress")),1),e("span",Q,a(t(s).expProgress.isMaxLevel?o.$t("user.tasks.userCard.expProgressMaxLevel"):`${t(s).expProgress.expInCurrentLevel} / ${t(s).expProgress.expNeedForNextLevel}`),1)]),e("div",Z,[e("div",{class:"h-full rounded-full bg-gradient-to-r from-indigo-500 via-indigo-500/80 to-emerald-400",style:D({width:t(s).expProgress.expProgressPercent+"%"})},null,4)])])):u("",!0),e("div",ee,[e("div",te,[e("div",se,a(o.$t("component.userInfo.score")),1),e("div",ae,a(t(s).score||0),1)]),e("div",oe,[e("div",re,a(o.$t("user.tasks.userCard.exp")),1),e("div",le,a(t(s).exp||0),1)]),e("div",ie,[e("div",ne,a(o.$t("component.userInfo.topicCount")),1),e("div",de,a(t(s).topicCount||0),1)]),e("div",ce,[e("div",xe,a(o.$t("component.userInfo.commentCount")),1),e("div",ue,a(t(s).commentCount||0),1)])])])):(r(),l("button",{key:1,type:"button",class:"relative flex w-full flex-col gap-3 overflow-hidden rounded-2xl border border-slate-200/70 bg-white p-4 text-left shadow-sm dark:border-slate-800/80 dark:bg-slate-900",onClick:P},[x[1]||(x[1]=e("div",{class:"pointer-events-none absolute inset-0 bg-gradient-to-br from-indigo-50/80 via-white/70 to-emerald-50/80 dark:from-indigo-900/30 dark:via-slate-900/60 dark:to-emerald-900/20"},null,-1)),e("div",me,[x[0]||(x[0]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100 text-base font-semibold text-slate-400 dark:bg-slate-800"}," ? ",-1)),e("div",ge,[e("div",pe,a(o.$t("user.tasks.userCard.guestTitle")),1),e("p",_e,a(o.$t("user.tasks.userCard.guestHint")),1)])]),e("span",he,[k(a(o.$t("user.tasks.userCard.signInAction"))+" ",1),d(t(U),{class:"h-3.5 w-3.5"})])]))}}};export{U as A,$e as _};
