import{_ as $}from"./nHyB59Vm.js";import{_ as w,a as U}from"./DvwhjJE8.js";import{_ as F}from"./HzVF1qNI.js";import{_ as N,u,a as T,j as E,g as H,o as c,c as f,e as t,b as s,t as d,d as m,h as v,w as g,f as h,v as V,s as I,K as M,n as P,z as S,A as j,G as z,E as A,H as D}from"./IMHBmAvM.js";import{u as G}from"./DJY5Y4zn.js";import"./BZY-t1L7.js";import"./Iih9WEmM.js";import"./65VpZOqR.js";import"./DmPMBcKm.js";import"./Cyl0hmDu.js";import"./CWBW37gM.js";import"./Dy4Z_VQo.js";import"./C6Y-ieo6.js";import"./Cop6u61-.js";import"./B1wiTl2V.js";import"./CSh7zoJM.js";import"./DWG3xSCv.js";import"./DmwfaKwn.js";import"./mWIteSzr.js";import"./BOte5nSP.js";import"./dnDFdY6A.js";import"./DDHZDh0S.js";import"./iGIsgRmF.js";const J={class:"main"},K={key:0,class:"container"},L={class:"publish-form"},R={class:"form-title"},q={class:"form-title-name"},O={class:"field"},Q={class:"control"},W={class:"field"},X={class:"control"},Y={class:"field"},Z={class:"control"},tt={class:"form-footer"},et={__name:"[id]",async setup(st){let n,p;const{t:o}=u(),{t:y}=u();T({title:G(y("pages.article.edit.title"))});const k=E(),{data:e}=([n,p]=H(()=>M(`/api/article/edit/${k.params.id}`)),n=await n,p(),n),a=P(!1);async function b(){if(!a.value){a.value=!0;try{S(`/api/article/edit/${e.value.id}`,j({title:e.value.title,content:e.value.content,cover:e.value.cover,tags:e.value.tags?e.value.tags.join(","):""})),z({message:o("pages.article.edit.editSuccess"),onClose(){A(`/article/${e.value.id}`)}})}catch(r){a.value=!1,D(o("pages.article.edit.editFailed")+(r.message||r))}}}return(r,i)=>{const x=$,B=w,C=U,_=F;return c(),f("section",J,[t(e)?(c(),f("div",K,[s("div",L,[s("div",R,[s("div",q,d(t(o)("pages.article.edit.title")),1)]),s("div",O,[s("div",Q,[m(x,{modelValue:t(e).title,"onUpdate:modelValue":i[0]||(i[0]=l=>t(e).title=l),type:"text",placeholder:t(o)("pages.article.edit.titlePlaceholder")},null,8,["modelValue","placeholder"])])]),s("div",W,[s("div",X,[m(B,{modelValue:t(e).content,"onUpdate:modelValue":i[1]||(i[1]=l=>t(e).content=l),placeholder:t(o)("pages.article.edit.contentPlaceholder")},null,8,["modelValue","placeholder"])])]),s("div",Y,[s("div",Z,[m(C,{modelValue:t(e).tags,"onUpdate:modelValue":i[2]||(i[2]=l=>t(e).tags=l)},null,8,["modelValue"])])]),s("div",tt,[t(a)?(c(),v(_,{key:0,class:V({"is-loading":t(a)}),disabled:""},{default:g(()=>[h(d(t(o)("pages.article.edit.submitBtn")),1)]),_:1},8,["class"])):(c(),v(_,{key:1,class:V({"is-loading":t(a)}),onClick:b},{default:g(()=>[h(d(t(o)("pages.article.edit.submitBtn")),1)]),_:1},8,["class"]))])])])):I("",!0)])}}},$t=N(et,[["__scopeId","data-v-c7b14a9c"]]);export{$t as default};
