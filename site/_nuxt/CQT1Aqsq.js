import{_ as B}from"./1poyL4QY.js";import{_ as D}from"./5InM8hYO.js";import{c as S}from"./CDN07tui.js";import{X as F,o as c,c as l,v as L,e as t,_ as N,g as V,a6 as y,d as r,F as j,b as n,s as v,w as A,t as E,K as O,R,i as q,D as M,n as z}from"./Ck7AnVGd.js";import{L as G}from"./GUYZfzNJ.js";const m=F({__name:"Skeleton",props:{class:{}},setup(p){const d=p;return(o,_)=>(c(),l("div",{"data-slot":"skeleton",class:L(t(S)("animate-pulse rounded-md bg-primary/10",d.class))},null,2))}}),H={class:"load-more"},I={key:0,class:"loading"},K={class:"flex items-center space-x-4"},U={class:"space-y-2"},X={class:"has-more"},J={key:0,class:"icon"},P={__name:"LoadMoreAsync",props:{url:{type:String,required:!0},params:{type:Object,default(){return{}}}},async setup(p,{expose:d}){let o,_;d({refresh:x,unshiftResults:b});const u=p,a=z(!1),e=R({cursor:"",results:[],hasMore:!0}),g=M(()=>a.value||!e.hasMore),k=M(()=>e.hasMore===!1&&e.results.length===0),{data:w}=([o,_]=V(()=>O(u.url,{params:u.params||{}})),o=await o,_(),o);h(w.value);async function f(){a.value=!0;try{const s=Object.assign(u.params||{},{cursor:e.cursor||""}),i=await q(u.url,{params:s});h(i)}catch(s){console.error(s)}finally{a.value=!1}}function x(){return e.cursor="",e.results=[],e.hasMore=!0,f()}function h(s){s=s||{},e.cursor=s.cursor,e.hasMore=s.hasMore,s.results&&s.results.length&&s.results.forEach(i=>{e.results.push(i)})}function b(s){s&&e&&e.results&&e.results.unshift(s)}return(s,i)=>{const C=B,$=D;return c(),l("div",H,[t(k)?y(s.$slots,"empty",{key:0},()=>[r(C)],!0):(c(),l(j,{key:1},[n("div",null,[y(s.$slots,"default",{results:t(e).results},void 0,!0)]),t(a)?(c(),l("div",I,[n("div",K,[r(t(m),{class:"h-12 w-12 rounded-full"}),n("div",U,[r(t(m),{class:"h-4 w-[250px]"}),r(t(m),{class:"h-4 w-[200px]"})])])])):v("",!0),n("div",X,[r($,{variant:"link",disabled:t(g),onClick:f},{default:A(()=>[t(a)?(c(),l("span",J,[r(t(G),{class:"icon-loading h-4 w-4"})])):v("",!0),n("span",null,E(t(e).hasMore?s.$t("common.loadMore.loadMore"):s.$t("common.loadMore.noMore")),1)]),_:1},8,["disabled"])])],64))])}}},ss=N(P,[["__scopeId","data-v-52cf4557"]]);export{ss as _};
