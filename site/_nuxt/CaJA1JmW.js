import{_ as y}from"./B_VsdPRP.js";import{_ as I}from"./DPyTMBL8.js";import{u as w,g as u,o as a,c as r,b as e,t as n,e as s,d,f as k,F as C,r as $,w as D,I as N,s as B,K as p,D as P,z as T,B as V,L as z}from"./B1RaE-U5.js";import{C as F}from"./Dveh-x1o.js";import{C as R}from"./GmuaM5aT.js";const S={class:"rounded-md border border-slate-200/70 bg-white p-4 dark:border-slate-800/80 dark:bg-slate-900 inset-0 bg-linear-to-br from-indigo-50/80 via-white/70 to-emerald-50/80 dark:from-indigo-900/30 dark:via-slate-900/60 dark:to-emerald-900/20"},j={class:"flex flex-col gap-3"},E={class:"flex min-w-0 items-start gap-3"},L={class:"min-w-0"},M={class:"flex flex-col gap-1 sm:flex-row sm:items-center sm:gap-2"},A={class:"text-sm font-semibold text-foreground"},H={class:"w-fit rounded-full border border-border/60 bg-background/70 px-2 py-0.5 text-[11px] font-medium text-muted-foreground"},K={class:"mt-1 text-xs text-muted-foreground"},q={class:"min-h-9"},G={key:1,class:"flex w-full items-center gap-3 rounded-lg border border-emerald-200/80 bg-gradient-to-r from-emerald-50/90 to-teal-50/80 px-4 py-3 text-sm dark:border-emerald-800/50 dark:from-emerald-950/40 dark:to-teal-950/30"},J={class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-emerald-100 dark:bg-emerald-900/50"},O={class:"min-w-0 text-slate-600 dark:text-slate-300"},Q={key:0,class:"relative mt-4"},U={class:"text-sm font-semibold text-slate-900 dark:text-slate-50"},W={class:"mt-3 space-y-2"},X={class:"min-w-0 flex-1"},Y={class:"text-xs text-slate-500 dark:text-slate-400"},re={__name:"CheckIn",async setup(Z){let o,i;const{t:_}=w(),{data:l,refresh:f}=([o,i]=u(()=>p("/api/checkin/checkin")),o=await o,i(),o),{data:m,refresh:g}=([o,i]=u(()=>p("/api/checkin/rank")),o=await o,i(),o),h=P(()=>!!l.value?.checkIn);async function x(){try{l.value=await T("/api/checkin/checkin"),V(_("component.checkIn.checkInSuccess")),f(),g()}catch(t){z(t)}}return(t,ee)=>{const b=y,v=I;return a(),r("div",S,[e("div",j,[e("div",E,[e("div",L,[e("div",M,[e("span",A,n(t.$t("component.checkIn.headline")),1),e("span",H,n(s(h)?t.$t("component.checkIn.statusCheckedIn"):t.$t("component.checkIn.statusNotCheckedIn")),1)]),e("p",K,n(s(h)?t.$t("component.checkIn.checkedInTip"):t.$t("component.checkIn.checkInTip")),1)])]),e("div",null,[e("div",q,[s(h)?(a(),r("div",G,[e("div",J,[d(s(R),{class:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]),e("p",O,n(t.$t("component.checkIn.consecutiveDays",{days:s(l).consecutiveDays})),1)])):(a(),r("button",{key:0,class:"inline-flex w-full items-center justify-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-indigo-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-300/60",type:"button",onClick:x},[d(s(F),{class:"size-4"}),k(" "+n(t.$t("component.checkIn.checkInNow")),1)]))])])]),s(m)&&s(m).length?(a(),r("div",Q,[e("div",U,n(t.$t("component.checkIn.todayRanking")),1),e("ul",W,[(a(!0),r(C,null,$(s(m),c=>(a(),r("li",{key:c.id,class:"flex items-center gap-3 rounded-lg border border-slate-200/70 bg-white/70 px-3 py-2 text-sm transition hover:bg-white dark:border-slate-800/80 dark:bg-slate-900/70 dark:hover:bg-slate-900"},[d(b,{user:c.user,size:30},null,8,["user"]),e("div",X,[d(v,{class:"truncate font-semibold text-slate-900 hover:text-indigo-600 dark:text-slate-50",to:`/user/${c.user.id}`},{default:D(()=>[k(n(c.user.nickname),1)]),_:2},1032,["to"]),e("p",Y," @"+n(("usePrettyDate"in t?t.usePrettyDate:s(N))(c.updateTime)),1)])]))),128))])])):B("",!0)])}}};export{re as _};
