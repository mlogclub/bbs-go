import{_ as $}from"./CaxHVR8U.js";import{_ as k}from"./nHyB59Vm.js";import{_ as V}from"./HzVF1qNI.js";import{_ as P}from"./DYGa34Qb.js";import{u as v,a as C,j as U,Q as x,o as S,c as b,b as o,d as r,w as d,R as I,f as m,t as l,e as a,H as c,C as R,S as B,E as f,L as T}from"./IMHBmAvM.js";import{u as q}from"./DJY5Y4zn.js";import{u as E}from"./D5uZVZ9k.js";import"./DWG3xSCv.js";import"./DmwfaKwn.js";import"./BZY-t1L7.js";import"./iGIsgRmF.js";import"./Dd-PvC5E.js";import"./CWBW37gM.js";import"./DVjKhMGR.js";import"./CboA2NrW.js";import"./BFULNkRl.js";import"./B1wiTl2V.js";import"./Dy4Z_VQo.js";import"./CcFcSr0Z.js";import"./FUKBWQwh.js";import"./DDHZDh0S.js";const H={class:"main"},L={class:"container"},M={class:"space-y-2"},N={class:"space-y-2"},j={class:"space-y-2"},A={class:"text-sm text-muted-foreground"},D={class:"space-y-2"},Q={class:"text-center"},me={__name:"signup",setup(W){const{t:u}=v();C({title:q(u("user.signup.title"))});const g=U(),s=x({nickname:"",email:"",password:"",rePassword:"",redirect:g.query.redirect||"",captchaId:"",captchaCode:"",captchaProtocol:2}),w=async()=>{if(!s.nickname){c(u("user.signup.nicknameRequired"));return}if(!s.email){c(u("user.signup.emailRequired"));return}if(!s.password){c(u("user.signup.passwordRequired"));return}if(s.password!==s.rePassword){c(u("user.signup.passwordMismatch"));return}try{const t=await E();s.captchaId=t.captchaId,s.captchaCode=t.captchaCode;try{const e=R(),{user:p,redirect:i}=await e.signup(s);await B(),setTimeout(()=>{i?f(i):f(`/user/${p.id}`)},50)}catch(e){T(e)}}catch(t){console.log(t)}};function _(){s.redirect?f(`/user/signin?redirect=${encodeURIComponent(s.redirect)}`):f("/user/signin")}return(t,e)=>{const p=$,i=k,h=V,y=P;return S(),b("section",H,[o("div",L,[r(y,{class:"max-w-[600px] mx-auto",title:t.$t("user.signup.title")},{default:d(()=>[o("form",{class:"space-y-6 p-6",onSubmit:I(w,["prevent"])},[o("div",M,[r(p,{for:"nickname"},{default:d(()=>[m(l(t.$t("user.signup.nickname"))+" ",1),e[4]||(e[4]=o("span",{class:"text-red-500"},"*",-1))]),_:1}),r(i,{id:"nickname",modelValue:a(s).nickname,"onUpdate:modelValue":e[0]||(e[0]=n=>a(s).nickname=n),type:"text",placeholder:t.$t("user.signup.nicknamePlaceholder")},null,8,["modelValue","placeholder"])]),o("div",N,[r(p,{for:"email"},{default:d(()=>[m(l(t.$t("user.signup.email"))+" ",1),e[5]||(e[5]=o("span",{class:"text-red-500"},"*",-1))]),_:1}),r(i,{id:"email",modelValue:a(s).email,"onUpdate:modelValue":e[1]||(e[1]=n=>a(s).email=n),type:"email",placeholder:t.$t("user.signup.emailPlaceholder")},null,8,["modelValue","placeholder"])]),o("div",j,[r(p,{for:"password"},{default:d(()=>[m(l(t.$t("user.signup.password"))+" ",1),e[6]||(e[6]=o("span",{class:"text-red-500"},"*",-1))]),_:1}),r(i,{id:"password",modelValue:a(s).password,"onUpdate:modelValue":e[2]||(e[2]=n=>a(s).password=n),type:"password",placeholder:t.$t("user.signup.passwordPlaceholder")},null,8,["modelValue","placeholder"]),o("p",A,l(t.$t("user.signup.passwordHelp")),1)]),o("div",D,[r(p,{for:"confirmPassword"},{default:d(()=>[m(l(t.$t("user.signup.confirmPassword"))+" ",1),e[7]||(e[7]=o("span",{class:"text-red-500"},"*",-1))]),_:1}),r(i,{id:"confirmPassword",modelValue:a(s).rePassword,"onUpdate:modelValue":e[3]||(e[3]=n=>a(s).rePassword=n),type:"password",placeholder:t.$t("user.signup.confirmPasswordPlaceholder")},null,8,["modelValue","placeholder"])]),r(h,{type:"submit",class:"w-full h-10"},{default:d(()=>[m(l(t.$t("user.signup.signupBtn")),1)]),_:1}),o("div",Q,[o("button",{type:"button",class:"text-sm text-muted-foreground hover:text-primary transition-colors",onClick:_},l(t.$t("user.signup.alreadyHaveAccount")),1)])],32)]),_:1},8,["title"])])])}}};export{me as default};
