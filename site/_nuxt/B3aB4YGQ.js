import{_ as A,a as T}from"./DP0eMKgG.js";import{_ as N}from"./Cc_9mIJP.js";import{_ as P}from"./DPyTMBL8.js";import{_ as x}from"./BoRnC75M.js";import{_ as z,a as D}from"./DtHKP7ZC.js";import{_ as F}from"./EMLYXraA.js";import{_ as H}from"./jhzzEy-a.js";import{_ as I,u as J,C as M,k as j,ag as G,a as L,l as O,o as p,c as g,b as t,e as s,h as u,w as l,d as i,f as d,t as n,v,D as q,n as h,z as K,A as Q,G as R,E as W,H as X}from"./B1RaE-U5.js";import{u as Y}from"./Bsv560Am.js";import{P as Z}from"./DRgtaaaP.js";import"./CDN07tui.js";import"./B_DlFklR.js";import"./BUQ0YbzQ.js";import"./DYArn-QS.js";import"./itKUo7Oq.js";import"./C7wJzAr-.js";import"./B_LzGPWb.js";import"./BPOBlBcw.js";import"./TxH1ZWMw.js";import"./B9DMEGyS.js";import"./C6Y-ieo6.js";import"./DDZIm-qp.js";import"./CMyOL4G6.js";import"./Bn-JsXdN.js";import"./DO12yAhD.js";import"./DJu_MFF8.js";import"./BWEpfI5K.js";import"./CP219fWn.js";import"./CLG4myAd.js";import"./CcFcSr0Z.js";import"./EqHNAlZh.js";import"./DUNcO_j-.js";import"./BAwY1kQT.js";import"./jAgMzLDF.js";import"./DMqoMF9r.js";import"./FUKBWQwh.js";import"./B6EBJYgQ.js";import"./DFOmdD5c.js";const ee={class:"main"},te={class:"container"},oe={key:1,class:"publish-form"},se={class:"form-title"},ae={class:"form-title-name"},ie={class:"field"},re={class:"control"},le={class:"field"},ne={class:"control"},ce={class:"field"},me={class:"control"},pe={class:"field"},de={class:"control"},_e={class:"cover-add-btn"},ue={class:"form-footer"},fe={__name:"create",setup(ge){const{t:m}=J(),c=h(!1),e=h({title:"",tags:[],content:""}),V=M(),_=j(),$=q(()=>_.config.createArticleEmailVerified&&!V.user.emailVerified);if(_.config.modules.article||G(m("pages.article.create.featureClosed")),L({title:Y(m("pages.article.create.title"))}),!_.isEnabledArticle)throw O({statusCode:403,message:m("pages.article.create.featureForbidden")});async function y(){if(!c.value){c.value=!0;try{const o=await K("/api/article/create",Q({title:e.value.title,content:e.value.content,tags:e.value.tags?e.value.tags.join(","):"",cover:e.value.cover&&e.value.cover.length?JSON.stringify(e.value.cover[0]):null}));R({message:m("pages.article.create.success"),onClose(){W(`/article/${o.id}`)}})}catch(o){X(o.message||m("pages.article.create.error")),c.value=!1}}}return(o,a)=>{const b=N,k=P,E=A,U=T,C=x,B=z,w=D,S=F,f=H;return p(),g("section",ee,[t("div",te,[s($)?(p(),u(U,{key:0},{default:l(()=>[i(b,null,{default:l(()=>[d(n(o.$t("pages.article.create.needEmailTitle")),1)]),_:1}),i(E,null,{default:l(()=>[d(n(o.$t("pages.article.create.needEmailBody"))+" ",1),i(k,{to:"/user/profile/account",style:{color:"var(--primary)"}},{default:l(()=>[d(n(o.$t("pages.article.create.goVerify")),1)]),_:1})]),_:1})]),_:1})):(p(),g("div",oe,[t("div",se,[t("div",ae,n(o.$t("pages.article.create.title")),1)]),t("div",ie,[t("div",re,[i(C,{modelValue:s(e).title,"onUpdate:modelValue":a[0]||(a[0]=r=>s(e).title=r),type:"text",placeholder:o.$t("pages.article.create.titlePlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",le,[t("div",ne,[i(B,{modelValue:s(e).content,"onUpdate:modelValue":a[1]||(a[1]=r=>s(e).content=r),placeholder:o.$t("pages.article.create.contentPlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",ce,[t("div",me,[i(w,{modelValue:s(e).tags,"onUpdate:modelValue":a[2]||(a[2]=r=>s(e).tags=r)},null,8,["modelValue"])])]),t("div",pe,[t("div",de,[i(S,{modelValue:s(e).cover,"onUpdate:modelValue":a[3]||(a[3]=r=>s(e).cover=r),limit:1,size:"120px"},{"add-image-button":l(()=>[t("div",_e,[i(s(Z),{class:"cover-add-icon h-[18px] w-[18px]"}),t("span",null,n(o.$t("pages.article.create.cover")),1)])]),_:1},8,["modelValue"])])]),t("div",ue,[s(c)?(p(),u(f,{key:0,class:v({"is-loading":s(c)}),disabled:""},{default:l(()=>[d(n(o.$t("pages.article.create.publishBtn")),1)]),_:1},8,["class"])):(p(),u(f,{key:1,class:v({"is-loading":s(c)}),onClick:y},{default:l(()=>[d(n(o.$t("pages.article.create.publishBtn")),1)]),_:1},8,["class"]))])]))])])}}},tt=I(fe,[["__scopeId","data-v-db980912"]]);export{tt as default};
