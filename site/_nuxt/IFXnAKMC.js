import{_ as A,a as T}from"./yNVI9v3X.js";import{_ as N}from"./e-g6w_m2.js";import{_ as P}from"./XKCCBwzU.js";import{_ as x}from"./AkHlHB4i.js";import{_ as z,a as D}from"./B60WS31a.js";import{_ as F}from"./7INCXRlm.js";import{_ as H}from"./5InM8hYO.js";import{_ as I,u as J,C as M,k as j,ag as G,a as L,l as O,o as p,c as g,b as t,e as s,h as u,w as l,d as i,f as d,t as n,v,D as q,n as h,z as K,A as Q,G as R,E as W,H as X}from"./Ck7AnVGd.js";import{u as Y}from"./CZ5ckmpo.js";import{P as Z}from"./By46hyff.js";import"./CDN07tui.js";import"./B_DlFklR.js";import"./Bu1jJY3G.js";import"./CZrVOCut.js";import"./VQwkjqG0.js";import"./CNBhs_Fe.js";import"./Dw1cifKY.js";import"./-vfE9RL5.js";import"./DBLrLi5j.js";import"./CQscZoJ2.js";import"./C6Y-ieo6.js";import"./QWf4sm8l.js";import"./Q2d2X_pu.js";import"./D349dkPz.js";import"./BNCqmzak.js";import"./JWKf8_z1.js";import"./B4HuUGiP.js";import"./CSbzbSNw.js";import"./ChviGFow.js";import"./CcFcSr0Z.js";import"./Dj8WmZfa.js";import"./BtMbnQ3T.js";import"./D6TqJjY5.js";import"./CTBG9hF4.js";import"./c3ISXXHd.js";import"./FUKBWQwh.js";import"./WD6I3E03.js";import"./DREy94XG.js";const ee={class:"main"},te={class:"container"},oe={key:1,class:"publish-form"},se={class:"form-title"},ae={class:"form-title-name"},ie={class:"field"},re={class:"control"},le={class:"field"},ne={class:"control"},ce={class:"field"},me={class:"control"},pe={class:"field"},de={class:"control"},_e={class:"cover-add-btn"},ue={class:"form-footer"},fe={__name:"create",setup(ge){const{t:m}=J(),c=h(!1),e=h({title:"",tags:[],content:""}),V=M(),_=j(),$=q(()=>_.config.createArticleEmailVerified&&!V.user.emailVerified);if(_.config.modules.article||G(m("pages.article.create.featureClosed")),L({title:Y(m("pages.article.create.title"))}),!_.isEnabledArticle)throw O({statusCode:403,message:m("pages.article.create.featureForbidden")});async function y(){if(!c.value){c.value=!0;try{const o=await K("/api/article/create",Q({title:e.value.title,content:e.value.content,tags:e.value.tags?e.value.tags.join(","):"",cover:e.value.cover&&e.value.cover.length?JSON.stringify(e.value.cover[0]):null}));R({message:m("pages.article.create.success"),onClose(){W(`/article/${o.id}`)}})}catch(o){X(o.message||m("pages.article.create.error")),c.value=!1}}}return(o,a)=>{const b=N,k=P,E=A,U=T,C=x,B=z,w=D,S=F,f=H;return p(),g("section",ee,[t("div",te,[s($)?(p(),u(U,{key:0},{default:l(()=>[i(b,null,{default:l(()=>[d(n(o.$t("pages.article.create.needEmailTitle")),1)]),_:1}),i(E,null,{default:l(()=>[d(n(o.$t("pages.article.create.needEmailBody"))+" ",1),i(k,{to:"/user/profile/account",style:{color:"var(--primary)"}},{default:l(()=>[d(n(o.$t("pages.article.create.goVerify")),1)]),_:1})]),_:1})]),_:1})):(p(),g("div",oe,[t("div",se,[t("div",ae,n(o.$t("pages.article.create.title")),1)]),t("div",ie,[t("div",re,[i(C,{modelValue:s(e).title,"onUpdate:modelValue":a[0]||(a[0]=r=>s(e).title=r),type:"text",placeholder:o.$t("pages.article.create.titlePlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",le,[t("div",ne,[i(B,{modelValue:s(e).content,"onUpdate:modelValue":a[1]||(a[1]=r=>s(e).content=r),placeholder:o.$t("pages.article.create.contentPlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",ce,[t("div",me,[i(w,{modelValue:s(e).tags,"onUpdate:modelValue":a[2]||(a[2]=r=>s(e).tags=r)},null,8,["modelValue"])])]),t("div",pe,[t("div",de,[i(S,{modelValue:s(e).cover,"onUpdate:modelValue":a[3]||(a[3]=r=>s(e).cover=r),limit:1,size:"120px"},{"add-image-button":l(()=>[t("div",_e,[i(s(Z),{class:"cover-add-icon h-[18px] w-[18px]"}),t("span",null,n(o.$t("pages.article.create.cover")),1)])]),_:1},8,["modelValue"])])]),t("div",ue,[s(c)?(p(),u(f,{key:0,class:v({"is-loading":s(c)}),disabled:""},{default:l(()=>[d(n(o.$t("pages.article.create.publishBtn")),1)]),_:1},8,["class"])):(p(),u(f,{key:1,class:v({"is-loading":s(c)}),onClick:y},{default:l(()=>[d(n(o.$t("pages.article.create.publishBtn")),1)]),_:1},8,["class"]))])]))])])}}},tt=I(fe,[["__scopeId","data-v-db980912"]]);export{tt as default};
