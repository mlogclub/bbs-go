import{j as l,C as d,u as m,q as p,o as _,c as f,b as y,L as i,E as e}from"./CJzXP6Za.js";import{u as h}from"./CASyyyQw.js";const L={class:"main"},q={__name:"google",setup(x){const o=l(),c=d(),{t}=m(),u=async()=>{const n=h({text:t("user.signin.googleLoggingIn")});try{const s=o.query.code||"",r=o.query.state||"";if(!s||!r){i(new Error(t("user.signin.missingAuthParams"))),e("/user/signin");return}const{user:g,redirect:a}=await c.googleLogin({code:s,state:r});a?e(a):e(`/user/${g.id}`)}catch(s){i(s),e("/user/signin")}finally{n.close()}};return p(()=>{u()}),(n,s)=>(_(),f("section",L,[...s[0]||(s[0]=[y("div",{class:"container",style:{height:"300px"}},null,-1)])]))}};export{q as default};
