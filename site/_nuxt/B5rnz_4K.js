import{_ as B}from"./Vj3wXoah.js";import{_ as S}from"./DywUBg3v.js";import{_ as D}from"./U7z4GGzj.js";import{_ as I,u as V,o,c as n,F as d,r as f,b as t,d as l,t as a,e as _,I as z,s as i,w as u,f as m,h as k,v,z as g,A as C,B as b,L as A,E as N}from"./CJzXP6Za.js";import{H as P}from"./PjirE_fA.js";import{M as E}from"./BtR0bsoe.js";const F={class:"topic-list"},H={class:"topic-header"},M={class:"topic-header-main"},U={class:"topic-userinfo"},q=["href"],J={class:"topic-time"},j={class:"topic-header-right"},G={key:0,class:"topic-sticky-icon"},K={class:"topic-title"},O={key:1,class:"topic-image-list"},Q=["src"],R={class:"topic-bottom"},W={class:"topic-tags"},X=["src"],Y={class:"topic-actions"},Z=["onClick"],ee=["onClick"],te={__name:"TopicList",props:{topics:{type:Array,default(){return[]},required:!1},showAvatar:{type:Boolean,default:!0},showSticky:{type:Boolean,default:!1}},setup(y){const{t:h}=V(),L=async s=>{try{s.liked?(await g("/api/like/unlike",C({entityType:"topic",entityId:s.id})),s.liked=!1,s.likeCount=s.likeCount>0?s.likeCount-1:0,b(h("component.topicList.unlikeSuccess"))):(await g("/api/like/like",C({entityType:"topic",entityId:s.id})),s.liked=!0,s.likeCount++,b(h("component.topicList.likeSuccess")))}catch(p){A(p)}},$=s=>{N(`/topic/${s}`)};return(s,p)=>{const w=B,c=S,T=D;return o(),n("ul",F,[(o(!0),n(d,null,f(y.topics,e=>(o(),n("li",{key:e.id,class:"topic-item"},[t("div",H,[t("div",M,[l(w,{user:e.user},null,8,["user"]),t("div",U,[t("a",{href:`/user/${e.user.id}`,class:"topic-nickname"},a(e.user.nickname),9,q),t("div",J,a(s.$t("component.topicList.publishedAt"))+"Â "+a(("usePrettyDate"in s?s.usePrettyDate:_(z))(e.createTime)),1)])]),t("div",j,[y.showSticky&&e.sticky?(o(),n("span",G,a(s.$t("component.topicList.sticky")),1)):i("",!0)])]),t("div",{class:v(["topic-content",{"topic-tweet":e.type===1}])},[e.type===0?(o(),n(d,{key:0},[t("h1",K,[l(c,{to:`/topic/${e.id}`,target:"_blank"},{default:u(()=>[m(a(e.title),1)]),_:2},1032,["to"])]),l(c,{to:`/topic/${e.id}`,class:"topic-summary",target:"_blank"},{default:u(()=>[m(a(e.summary),1)]),_:2},1032,["to"])],64)):i("",!0),e.type===1?(o(),n(d,{key:1},[e.content?(o(),k(c,{key:0,to:`/topic/${e.id}`,class:"topic-summary",target:"_blank"},{default:u(()=>[m(a(e.content),1)]),_:2},1032,["to"])):i("",!0),e.imageList&&e.imageList.length?(o(),n("ul",O,[(o(!0),n(d,null,f(e.imageList,(r,x)=>(o(),n("li",{key:x},[l(c,{to:`/topic/${e.id}`,class:"image-item",target:"_blank"},{default:u(()=>[t("img",{src:r.preview},null,8,Q)]),_:2},1032,["to"])]))),128))])):i("",!0)],64)):i("",!0)],2),e.vote?(o(),k(T,{key:0,class:"mx-0 mt-2 mb-3",vote:e.vote,onUpdated:r=>e.vote=r},null,8,["vote","onUpdated"])):i("",!0),t("div",R,[t("div",W,[e.node?(o(),k(c,{key:0,class:"topic-tag",target:"_blank",to:`/topics/node/${e.node.id}`,alt:e.node.name},{default:u(()=>[e.node.logo?(o(),n("img",{key:0,src:e.node.logo},null,8,X)):i("",!0),t("span",null,a(e.node.name),1)]),_:2},1032,["to","alt"])):i("",!0)]),t("div",Y,[t("div",{class:v(["btn",{liked:e.liked}]),onClick:r=>L(e)},[l(_(P),{size:16,fill:e.liked?"currentColor":"none"},null,8,["fill"]),t("span",null,a(e.likeCount>0?e.likeCount:""),1)],10,Z),t("div",{class:"btn",onClick:r=>$(e.id)},[l(_(E),{size:16}),t("span",null,a(e.commentCount>0?e.commentCount:""),1)],8,ee)])])]))),128))])}}},ce=I(te,[["__scopeId","data-v-6eb9af28"]]);export{ce as _};
