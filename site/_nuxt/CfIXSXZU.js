import{_ as I,a as S}from"./Bg4kXuCY.js";import{_ as j}from"./Dfyc52rC.js";import{j as F,u as M,g,a as N,o as e,c as s,b as o,d as c,e as n,w as V,t as i,F as x,r as h,v as l,s as b,K as z,i as A,D as p}from"./BqKV1jHe.js";import{u as H}from"./DjqtQ0rA.js";import{M as L}from"./9EvLg6Ya.js";import"./Lz5MK4XN.js";import"./DyiL-6dj.js";import"./CDN07tui.js";import"./B_DlFklR.js";import"./BDHYKrLM.js";import"./C7TzAs_Y.js";import"./BMShvsNX.js";import"./DM7nVvhd.js";import"./qdLMPJJp.js";import"./8kSMhTPi.js";import"./Bvrs3omH.js";import"./BCWAYn_K.js";import"./Dw_9k8Cy.js";import"./DzCyRy98.js";import"./BVwgWqD4.js";import"./BpT8Lfr7.js";import"./C-WSYw8B.js";import"./DKk2Wjmd.js";import"./wswtc-47.js";import"./CcFcSr0Z.js";import"./FUKBWQwh.js";import"./hn3dWTqe.js";import"./B3dDHzJ7.js";import"./Bdij4vm2.js";import"./Cg5_XbCM.js";const q={class:"main"},E={class:"container"},G={class:"container main-container right-main side-size-360"},K={class:"right-container"},O={class:"mb-4"},R={class:"text-lg font-semibold text-slate-900 dark:text-slate-50"},W={class:"text-sm text-slate-500 dark:text-slate-400"},J={key:0,class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},P={key:1,class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-4"},Q={class:"relative"},U=["src","alt"],X={key:2,class:"absolute -right-4 -top-1 rounded-full bg-amber-500 px-1.5 py-0.5 text-[10px] font-bold text-white"},Y={key:0,class:"text-[11px] text-slate-500 dark:text-slate-400"},Z={key:1,class:"text-[11px] text-slate-400 dark:text-slate-500"},jt={__name:"badges",async setup(tt){let r,d;const u=F(),{t:f}=M(),m=([r,d]=g(()=>A(`/api/user/${u.params.userId}`)),r=await r,d(),r),{data:k,pending:y}=([r,d]=g(()=>z(`/api/badge/badges?userId=${u.params.userId}`,{initialCache:!1})),r=await r,d(),r),_=p(()=>k.value||[]),w=p(()=>_.value.filter(a=>a.owned===!0)),v=p(()=>w.value);N({title:H(f("pages.user.badgesTitle"),m.nickname)});function B(a){return a?new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):""}return(a,$)=>{const C=I,T=S,D=j;return e(),s("section",q,[o("div",E,[c(C,{user:n(m),badges:n(v)},null,8,["user","badges"])]),o("div",G,[c(T,{user:n(m)},null,8,["user"]),o("div",K,[c(D,null,{default:V(()=>[o("div",O,[o("p",R,i(a.$t("pages.user.badgesTitle")),1),o("p",W,i(a.$t("pages.user.badgesSubtitle")),1)]),n(y)?(e(),s("div",J,[(e(),s(x,null,h(8,t=>o("div",{key:t,class:"aspect-square rounded-xl bg-slate-200 dark:bg-slate-800 animate-pulse"})),64))])):(e(),s("div",P,[(e(!0),s(x,null,h(n(_),t=>(e(),s("div",{key:t.id,class:l(["flex flex-col items-center gap-2 rounded-xl border p-4 transition",t.owned?"border-amber-200/80 bg-amber-50/50 dark:border-amber-800/60 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/40 opacity-70"])},[o("div",Q,[t.icon?(e(),s("img",{key:0,src:t.icon,alt:t.title,class:l(["h-14 w-14 object-contain",{"opacity-40 grayscale":!t.owned}])},null,10,U)):(e(),s("div",{key:1,class:l(["flex h-14 w-14 items-center justify-center rounded-full bg-slate-200 dark:bg-slate-700",{"opacity-40":!t.owned}])},[c(n(L),{class:l(["h-8 w-8",t.owned?"text-slate-600 dark:text-slate-300":"text-slate-400 dark:text-slate-500"])},null,8,["class"])],2)),t.worn?(e(),s("span",X,i(a.$t("component.userBadges.worn")),1)):b("",!0)]),o("span",{class:l(["text-center text-sm font-medium line-clamp-2",t.owned?"text-slate-800 dark:text-slate-100":"text-slate-500 dark:text-slate-400"])},i(t.title),3),t.owned&&t.obtainTime?(e(),s("span",Y,i(a.$t("component.userBadges.obtainedAt"))+" "+i(B(t.obtainTime)),1)):t.owned?b("",!0):(e(),s("span",Z,i(a.$t("component.userBadges.notObtained")),1))],2))),128))]))]),_:1})])])])}}};export{jt as default};
