import{_ as B}from"./Dj53LeHM.js";import{_ as D}from"./HzVF1qNI.js";import{W as S,o as c,c as l,v as F,e as t,af as N,_ as V,g as j,a7 as y,d as r,F as A,b as n,s as v,w as E,ak as L,t as O,K as q,Q as z,i as G,D as M,n as H}from"./IMHBmAvM.js";const m=S({__name:"Skeleton",props:{class:{}},setup(d){const p=d;return(a,_)=>(c(),l("div",{"data-slot":"skeleton",class:F(t(N)("animate-pulse rounded-md bg-primary/10",p.class))},null,2))}}),I={class:"load-more"},K={key:0,class:"loading"},Q={class:"flex items-center space-x-4"},R={class:"space-y-2"},U={class:"has-more"},W={key:0,class:"icon"},J={__name:"LoadMoreAsync",props:{url:{type:String,required:!0},params:{type:Object,default(){return{}}}},async setup(d,{expose:p}){let a,_;p({refresh:x,unshiftResults:b});const u=d,o=H(!1),e=z({cursor:"",results:[],hasMore:!0}),g=M(()=>o.value||!e.hasMore),k=M(()=>e.hasMore===!1&&e.results.length===0),{data:w}=([a,_]=j(()=>q(u.url,{params:u.params||{}})),a=await a,_(),a);h(w.value);async function f(){o.value=!0;try{const s=Object.assign(u.params||{},{cursor:e.cursor||""}),i=await G(u.url,{params:s});h(i)}catch(s){console.error(s)}finally{o.value=!1}}function x(){return e.cursor="",e.results=[],e.hasMore=!0,f()}function h(s){s=s||{},e.cursor=s.cursor,e.hasMore=s.hasMore,s.results&&s.results.length&&s.results.forEach(i=>{e.results.push(i)})}function b(s){s&&e&&e.results&&e.results.unshift(s)}return(s,i)=>{const C=B,$=D;return c(),l("div",I,[t(k)?y(s.$slots,"empty",{key:0},()=>[r(C)],!0):(c(),l(A,{key:1},[n("div",null,[y(s.$slots,"default",{results:t(e).results},void 0,!0)]),t(o)?(c(),l("div",K,[n("div",Q,[r(t(m),{class:"h-12 w-12 rounded-full"}),n("div",R,[r(t(m),{class:"h-4 w-[250px]"}),r(t(m),{class:"h-4 w-[200px]"})])])])):v("",!0),n("div",U,[r($,{variant:"link",disabled:t(g),onClick:f},{default:E(()=>[t(o)?(c(),l("span",W,[r(t(L),{class:"icon-loading h-4 w-4"})])):v("",!0),n("span",null,O(t(e).hasMore?s.$t("common.loadMore.loadMore"):s.$t("common.loadMore.noMore")),1)]),_:1},8,["disabled"])])],64))])}}},Y=V(J,[["__scopeId","data-v-52cf4557"]]);export{Y as _};
