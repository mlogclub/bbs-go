import{_ as $}from"./DepVQ0hq.js";import{_ as x}from"./Lz5MK4XN.js";import{a as v,_ as C}from"./BHlYvgvh.js";import{u as B,a as N,o as u,c as V,b as s,d as o,w as a,t as n,R as k,Z as I,e as r,f as m,h as S,s as U,H as E,z as T,A,B as H,L as M,Q as P,n as _}from"./BqKV1jHe.js";import{_ as D}from"./qdLMPJJp.js";import{_ as K}from"./Dfyc52rC.js";import{u as L}from"./DjqtQ0rA.js";import{u as q}from"./9YxN8wUK.js";import"./DM7nVvhd.js";import"./CDN07tui.js";import"./DyiL-6dj.js";import"./B_DlFklR.js";import"./DzCyRy98.js";import"./BVwgWqD4.js";import"./BMShvsNX.js";import"./BpT8Lfr7.js";import"./C-WSYw8B.js";import"./DKk2Wjmd.js";import"./wswtc-47.js";import"./C7TzAs_Y.js";import"./CcFcSr0Z.js";import"./FUKBWQwh.js";import"./hn3dWTqe.js";const z={class:"main"},F={class:"container"},J={class:"main-body no-bg"},Q={class:"text-xl font-semibold mb-6"},W={class:"mt-6 text-center"},wt={__name:"forgot",setup(Z){const{t:c}=B();N({title:L(c("user.passwordReset.forgot.title"))});const i=_(!1),p=_(!1),e=P({email:"",captchaId:"",captchaCode:"",captchaProtocol:2}),l=async()=>{if(!e.email){E(c("user.passwordReset.forgot.emailRequired"));return}try{const t=await q();e.captchaId=t.captchaId,e.captchaCode=t.captchaCode}catch{return}i.value=!0;try{await T("/api/login/send_reset_password_email",A(e)),p.value=!0,H(c("user.passwordReset.forgot.sentNotice"))}catch(t){M(t)}finally{i.value=!1}};return(t,d)=>{const f=$,h=x,g=C,w=v,y=D,R=K;return u(),V("section",z,[s("div",F,[s("div",J,[o(R,{class:"max-w-[520px] mx-auto p-6"},{default:a(()=>[s("h2",Q,n(t.$t("user.passwordReset.forgot.title")),1),s("form",{class:"space-y-4",onSubmit:k(l,["prevent"])},[o(f,{modelValue:r(e).email,"onUpdate:modelValue":d[0]||(d[0]=b=>r(e).email=b),type:"email",placeholder:t.$t("user.passwordReset.forgot.emailPlaceholder"),onKeyup:I(l,["enter"])},null,8,["modelValue","placeholder"]),o(h,{type:"submit",class:"w-full",disabled:r(i)},{default:a(()=>[m(n(r(i)?t.$t("user.passwordReset.forgot.sending"):t.$t("user.passwordReset.forgot.sendButton")),1)]),_:1},8,["disabled"])],32),r(p)?(u(),S(w,{key:0,class:"mt-4"},{default:a(()=>[o(g,null,{default:a(()=>[m(n(t.$t("user.passwordReset.forgot.sentNotice")),1)]),_:1})]),_:1})):U("",!0),s("div",W,[o(y,{to:"/user/signin",class:"text-sm text-primary"},{default:a(()=>[m(n(t.$t("user.passwordReset.backToSignin")),1)]),_:1})])]),_:1})])])])}}};export{wt as default};
