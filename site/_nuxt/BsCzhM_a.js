import{_ as y}from"./BptVNsbJ.js";import{_ as I}from"./UwGaH15d.js";import{u as w,g as u,o as a,c,b as e,t as n,e as s,d,f as k,aK as C,F as $,r as D,w as N,I as B,s as P,K as p,D as T,z as V,B as z,L as F}from"./IMHBmAvM.js";import{C as R}from"./BXIDeL47.js";const S={class:"rounded-md border border-slate-200/70 bg-white p-4 dark:border-slate-800/80 dark:bg-slate-900 inset-0 bg-linear-to-br from-indigo-50/80 via-white/70 to-emerald-50/80 dark:from-indigo-900/30 dark:via-slate-900/60 dark:to-emerald-900/20"},j={class:"flex flex-col gap-3"},E={class:"flex min-w-0 items-start gap-3"},K={class:"min-w-0"},L={class:"flex flex-col gap-1 sm:flex-row sm:items-center sm:gap-2"},M={class:"text-sm font-semibold text-foreground"},A={class:"w-fit rounded-full border border-border/60 bg-background/70 px-2 py-0.5 text-[11px] font-medium text-muted-foreground"},H={class:"mt-1 text-xs text-muted-foreground"},q={class:"min-h-9"},G={key:1,class:"flex w-full items-center gap-3 rounded-lg border border-emerald-200/80 bg-gradient-to-r from-emerald-50/90 to-teal-50/80 px-4 py-3 text-sm dark:border-emerald-800/50 dark:from-emerald-950/40 dark:to-teal-950/30"},J={class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full bg-emerald-100 dark:bg-emerald-900/50"},O={class:"min-w-0 text-slate-600 dark:text-slate-300"},Q={key:0,class:"relative mt-4"},U={class:"text-sm font-semibold text-slate-900 dark:text-slate-50"},W={class:"mt-3 space-y-2"},X={class:"min-w-0 flex-1"},Y={class:"text-xs text-slate-500 dark:text-slate-400"},ae={__name:"CheckIn",async setup(Z){let o,i;const{t:_}=w(),{data:l,refresh:f}=([o,i]=u(()=>p("/api/checkin/checkin")),o=await o,i(),o),{data:m,refresh:g}=([o,i]=u(()=>p("/api/checkin/rank")),o=await o,i(),o),h=T(()=>!!l.value?.checkIn);async function x(){try{l.value=await V("/api/checkin/checkin"),z(_("component.checkIn.checkInSuccess")),f(),g()}catch(t){F(t)}}return(t,ee)=>{const b=y,v=I;return a(),c("div",S,[e("div",j,[e("div",E,[e("div",K,[e("div",L,[e("span",M,n(t.$t("component.checkIn.headline")),1),e("span",A,n(s(h)?t.$t("component.checkIn.statusCheckedIn"):t.$t("component.checkIn.statusNotCheckedIn")),1)]),e("p",H,n(s(h)?t.$t("component.checkIn.checkedInTip"):t.$t("component.checkIn.checkInTip")),1)])]),e("div",null,[e("div",q,[s(h)?(a(),c("div",G,[e("div",J,[d(s(C),{class:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]),e("p",O,n(t.$t("component.checkIn.consecutiveDays",{days:s(l).consecutiveDays})),1)])):(a(),c("button",{key:0,class:"inline-flex w-full items-center justify-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-indigo-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-300/60",type:"button",onClick:x},[d(s(R),{class:"size-4"}),k(" "+n(t.$t("component.checkIn.checkInNow")),1)]))])])]),s(m)&&s(m).length?(a(),c("div",Q,[e("div",U,n(t.$t("component.checkIn.todayRanking")),1),e("ul",W,[(a(!0),c($,null,D(s(m),r=>(a(),c("li",{key:r.id,class:"flex items-center gap-3 rounded-lg border border-slate-200/70 bg-white/70 px-3 py-2 text-sm transition hover:bg-white dark:border-slate-800/80 dark:bg-slate-900/70 dark:hover:bg-slate-900"},[d(b,{user:r.user,size:30},null,8,["user"]),e("div",X,[d(v,{class:"truncate font-semibold text-slate-900 hover:text-indigo-600 dark:text-slate-50",to:`/user/${r.user.id}`},{default:N(()=>[k(n(r.user.nickname),1)]),_:2},1032,["to"]),e("p",Y," @"+n(("usePrettyDate"in t?t.usePrettyDate:s(B))(r.updateTime)),1)])]))),128))])])):P("",!0)])}}};export{ae as _};
