import{_ as A,a as T}from"./BT-mllKq.js";import{_ as N}from"./lq5l4V6H.js";import{_ as P}from"./UwGaH15d.js";import{_ as x}from"./nHyB59Vm.js";import{_ as z,a as D}from"./DvwhjJE8.js";import{_ as F}from"./9rp5OSjE.js";import{_ as H}from"./HzVF1qNI.js";import{_ as I,u as J,C as M,k as j,ai as G,a as L,l as O,o as p,c as g,b as t,e as s,h as u,w as l,d as i,f as d,t as n,v,D as q,n as h,z as K,A as Q,G as R,E as W,H as X}from"./IMHBmAvM.js";import{u as Y}from"./DJY5Y4zn.js";import{P as Z}from"./oPgK-6DP.js";import"./iGIsgRmF.js";import"./BZY-t1L7.js";import"./Iih9WEmM.js";import"./65VpZOqR.js";import"./DmPMBcKm.js";import"./Cyl0hmDu.js";import"./CWBW37gM.js";import"./Dy4Z_VQo.js";import"./C6Y-ieo6.js";import"./Cop6u61-.js";import"./B1wiTl2V.js";import"./CSh7zoJM.js";import"./DWG3xSCv.js";import"./DmwfaKwn.js";import"./mWIteSzr.js";import"./BOte5nSP.js";import"./dnDFdY6A.js";import"./DDHZDh0S.js";import"./hbwzUS4v.js";import"./CcFcSr0Z.js";import"./BCbtPZa4.js";import"./Dd-PvC5E.js";import"./DVjKhMGR.js";import"./CboA2NrW.js";import"./BFULNkRl.js";import"./FUKBWQwh.js";import"./-N5s2Nzn.js";import"./Dv21RA73.js";const ee={class:"main"},te={class:"container"},oe={key:1,class:"publish-form"},se={class:"form-title"},ae={class:"form-title-name"},ie={class:"field"},re={class:"control"},le={class:"field"},ne={class:"control"},ce={class:"field"},me={class:"control"},pe={class:"field"},de={class:"control"},_e={class:"cover-add-btn"},ue={class:"form-footer"},fe={__name:"create",setup(ge){const{t:m}=J(),c=h(!1),e=h({title:"",tags:[],content:""}),V=M(),_=j(),$=q(()=>_.config.createArticleEmailVerified&&!V.user.emailVerified);if(_.config.modules.article||G(m("pages.article.create.featureClosed")),L({title:Y(m("pages.article.create.title"))}),!_.isEnabledArticle)throw O({statusCode:403,message:m("pages.article.create.featureForbidden")});async function y(){if(!c.value){c.value=!0;try{const o=await K("/api/article/create",Q({title:e.value.title,content:e.value.content,tags:e.value.tags?e.value.tags.join(","):"",cover:e.value.cover&&e.value.cover.length?JSON.stringify(e.value.cover[0]):null}));R({message:m("pages.article.create.success"),onClose(){W(`/article/${o.id}`)}})}catch(o){X(o.message||m("pages.article.create.error")),c.value=!1}}}return(o,a)=>{const b=N,k=P,E=A,U=T,C=x,B=z,w=D,S=F,f=H;return p(),g("section",ee,[t("div",te,[s($)?(p(),u(U,{key:0},{default:l(()=>[i(b,null,{default:l(()=>[d(n(o.$t("pages.article.create.needEmailTitle")),1)]),_:1}),i(E,null,{default:l(()=>[d(n(o.$t("pages.article.create.needEmailBody"))+" ",1),i(k,{to:"/user/profile/account",style:{color:"var(--primary)"}},{default:l(()=>[d(n(o.$t("pages.article.create.goVerify")),1)]),_:1})]),_:1})]),_:1})):(p(),g("div",oe,[t("div",se,[t("div",ae,n(o.$t("pages.article.create.title")),1)]),t("div",ie,[t("div",re,[i(C,{modelValue:s(e).title,"onUpdate:modelValue":a[0]||(a[0]=r=>s(e).title=r),type:"text",placeholder:o.$t("pages.article.create.titlePlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",le,[t("div",ne,[i(B,{modelValue:s(e).content,"onUpdate:modelValue":a[1]||(a[1]=r=>s(e).content=r),placeholder:o.$t("pages.article.create.contentPlaceholder")},null,8,["modelValue","placeholder"])])]),t("div",ce,[t("div",me,[i(w,{modelValue:s(e).tags,"onUpdate:modelValue":a[2]||(a[2]=r=>s(e).tags=r)},null,8,["modelValue"])])]),t("div",pe,[t("div",de,[i(S,{modelValue:s(e).cover,"onUpdate:modelValue":a[3]||(a[3]=r=>s(e).cover=r),limit:1,size:"120px"},{"add-image-button":l(()=>[t("div",_e,[i(s(Z),{class:"cover-add-icon h-[18px] w-[18px]"}),t("span",null,n(o.$t("pages.article.create.cover")),1)])]),_:1},8,["modelValue"])])]),t("div",ue,[s(c)?(p(),u(f,{key:0,class:v({"is-loading":s(c)}),disabled:""},{default:l(()=>[d(n(o.$t("pages.article.create.publishBtn")),1)]),_:1},8,["class"])):(p(),u(f,{key:1,class:v({"is-loading":s(c)}),onClick:y},{default:l(()=>[d(n(o.$t("pages.article.create.publishBtn")),1)]),_:1},8,["class"]))])]))])])}}},tt=I(fe,[["__scopeId","data-v-db980912"]]);export{tt as default};
