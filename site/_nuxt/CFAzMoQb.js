import{X as U,R,aG as N,p as M,q as be,T as we,ac as Le,x as Z,y as J,o as T,c as X,b as c,t as ce,d as W,e as b,M as B,v as ee,n as I,D as C,a7 as ne,F as Te,r as Pe,a5 as Re,h as re,s as Fe,aH as Ye,i as xe,L as Ee,V as Me,W as ie}from"./CJzXP6Za.js";import{_ as Xe,a as $e}from"./DuQb2Aa5.js";const ye=()=>({width:300,height:220,thumbWidth:150,thumbHeight:40,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请在下图依次点击",buttonText:"确认",iconSize:22,dotSize:24}),Oe=c("path",{d:`M100.1,189.9C100.1,189.9,100,189.9,100.1,189.9c-49.7,0-90-40.4-90-89.9c0-49.6,40.4-89.9,89.9-89.9
		c49.6,0,89.9,40.4,89.9,89.9c0,18.2-5.4,35.7-15.6,50.7c-1.5,2.1-3.6,3.4-6.1,3.9c-2.5,0.4-5-0.1-7-1.6c-4.2-3-5.3-8.6-2.4-12.9
		c8.1-11.9,12.4-25.7,12.4-40.1c0-39.2-31.9-71.1-71.1-71.1c-39.2,0-71.1,31.9-71.1,71.1c0,39.2,31.9,71.1,71.1,71.1
		c7.7,0,15.3-1.2,22.6-3.6c2.4-0.8,4.9-0.6,7.2,0.5c2.2,1.1,3.9,3.1,4.7,5.5c1.6,4.9-1,10.2-5.9,11.9
		C119.3,188.4,109.8,189.9,100.1,189.9z M73,136.4C73,136.4,73,136.4,73,136.4c-2.5,0-4.9-1-6.7-2.8c-3.7-3.7-3.7-9.6,0-13.3
		L86.7,100L66.4,79.7c-3.7-3.7-3.7-9.6,0-13.3c3.7-3.7,9.6-3.7,13.3,0L100,86.7l20.3-20.3c1.8-1.8,4.1-2.8,6.7-2.8c0,0,0,0,0,0
		c2.5,0,4.9,1,6.7,2.8c1.8,1.8,2.8,4.1,2.8,6.7c0,2.5-1,4.9-2.8,6.7L113.3,100l20.3,20.3c3.7,3.7,3.7,9.6,0,13.3
		c-3.7,3.7-9.6,3.7-13.3,0L100,113.3l-20.3,20.3C77.9,135.4,75.5,136.4,73,136.4z`},null,-1),je=[Oe],ue=U({__name:"close-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),je,16))}}),Ae=c("path",{d:`M135,149.9c-10.7,7.6-23.2,11.4-36,11.2c-1.7,0-3.4-0.1-5-0.3c-0.7-0.1-1.4-0.2-2-0.3c-1.3-0.2-2.6-0.4-3.9-0.6
	c-0.8-0.2-1.6-0.4-2.3-0.5c-1.2-0.3-2.5-0.6-3.7-1c-0.6-0.2-1.2-0.4-1.7-0.6c-1.4-0.5-2.8-1-4.2-1.5c-0.3-0.1-0.6-0.3-0.9-0.4
	c-1.6-0.7-3.2-1.4-4.7-2.3c-0.1,0-0.1-0.1-0.2-0.1c-5.1-2.9-9.8-6.4-14-10.6c-0.1-0.1-0.1-0.1-0.2-0.2c-1.3-1.3-2.5-2.7-3.7-4.1
	c-0.2-0.3-0.5-0.6-0.7-0.9c-8.4-10.6-13.5-24.1-13.5-38.8h14.3c0.4,0,0.7-0.2,0.9-0.5c0.2-0.3,0.2-0.8,0-1.1L29.5,60.9
	c-0.2-0.3-0.5-0.5-0.9-0.5c-0.4,0-0.7,0.2-0.9,0.5L3.8,97.3c-0.2,0.3-0.2,0.7,0,1.1c0.2,0.3,0.5,0.5,0.9,0.5h14.3
	c0,17.2,5.3,33.2,14.3,46.4c0.1,0.2,0.2,0.4,0.3,0.6c0.9,1.4,2,2.6,3,3.9c0.4,0.5,0.7,1,1.1,1.5c1.5,1.8,3,3.5,4.6,5.2
	c0.2,0.2,0.3,0.3,0.5,0.5c5.4,5.5,11.5,10.1,18.2,13.8c0.2,0.1,0.3,0.2,0.5,0.3c1.9,1,3.9,2,5.9,2.9c0.5,0.2,1,0.5,1.5,0.7
	c1.7,0.7,3.5,1.3,5.2,1.9c0.8,0.3,1.7,0.6,2.5,0.8c1.5,0.5,3.1,0.8,4.7,1.2c1.1,0.2,2.1,0.5,3.2,0.7c0.4,0.1,0.9,0.2,1.3,0.3
	c1.5,0.3,3,0.4,4.5,0.6c0.5,0.1,1.1,0.2,1.6,0.2c2.7,0.3,5.4,0.4,8.1,0.4c16.4,0,32.5-5.1,46.2-14.8c4.4-3.1,5.5-9.2,2.4-13.7
	C145.5,147.8,139.4,146.7,135,149.9 M180.6,98.9c0-17.2-5.3-33.1-14.2-46.3c-0.1-0.2-0.2-0.5-0.4-0.7c-1.1-1.6-2.3-3.1-3.5-4.6
	c-0.1-0.2-0.3-0.4-0.4-0.6c-8.2-10.1-18.5-17.9-30.2-23c-0.3-0.1-0.6-0.3-1-0.4c-1.9-0.8-3.8-1.5-5.7-2.1c-0.7-0.2-1.4-0.5-2.1-0.7
	c-1.7-0.5-3.4-0.9-5.1-1.3c-0.9-0.2-1.9-0.5-2.8-0.7c-0.5-0.1-0.9-0.2-1.4-0.3c-1.3-0.2-2.6-0.3-3.8-0.5c-0.9-0.1-1.8-0.3-2.6-0.3
	c-2.1-0.2-4.3-0.3-6.4-0.3c-0.4,0-0.8-0.1-1.2-0.1c-0.1,0-0.1,0-0.2,0c-16.4,0-32.4,5-46.2,14.8C49,35,48,41.1,51,45.6
	c3.1,4.4,9.1,5.5,13.5,2.4c10.6-7.5,23-11.3,35.7-11.2c1.8,0,3.6,0.1,5.4,0.3c0.6,0.1,1.1,0.1,1.6,0.2c1.5,0.2,2.9,0.4,4.3,0.7
	c0.6,0.1,1.3,0.3,1.9,0.4c1.4,0.3,2.8,0.7,4.2,1.1c0.4,0.1,0.9,0.3,1.3,0.4c1.6,0.5,3.1,1.1,4.6,1.7c0.2,0.1,0.3,0.1,0.5,0.2
	c9,3.9,17,10,23.2,17.6c0,0,0.1,0.1,0.1,0.2c8.7,10.7,14,24.5,14,39.4H147c-0.4,0-0.7,0.2-0.9,0.5c-0.2,0.3-0.2,0.8,0,1.1l24,36.4
	c0.2,0.3,0.5,0.5,0.9,0.5c0.4,0,0.7-0.2,0.9-0.5l23.9-36.4c0.2-0.3,0.2-0.7,0-1.1c-0.2-0.3-0.5-0.5-0.9-0.5L180.6,98.9L180.6,98.9
	L180.6,98.9z`},null,-1),He=[Ae],de=U({__name:"refresh-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),He,16))}}),We=c("circle",{cx:"50",cy:"36.8101",r:"10"},[c("animate",{attributeName:"cy",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keySplines:"0.45 0 0.9 0.55;0 0.45 0.55 0.9",keyTimes:"0;0.5;1",values:"23;77;23"})],-1),Ne=[We],he=U({__name:"loading-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",width:"84",height:"84"},n.$attrs,{onClick:u}),Ne,16))}});function Ve(s){let a=0,l=0;if(s.getBoundingClientRect){const u=s.getBoundingClientRect(),n=document.documentElement;a=u.left+Math.max(n.scrollLeft,document.body.scrollLeft)-n.clientLeft,l=u.top+Math.max(n.scrollTop,document.body.scrollTop)-n.clientTop}else for(;s!==document.body;)a+=s.offsetLeft,l+=s.offsetTop,s=s.offsetParent;return{domX:a,domY:l}}function le(s,a){let l=a.relatedTarget;try{for(;l&&l!==s;)l=l.parentNode}catch(u){console.warn(u)}return l!==s}function Ie(s,a,l){const u=R({list:[]}),n=i=>{const r=i.currentTarget,w=Ve(r),o=i.pageX||i.clientX,m=i.pageY||i.clientY,g=w.domX,x=w.domY,_=o-g,D=m-x,y=parseInt(_.toString()),v=parseInt(D.toString()),f=new Date,k=u.list.length;return u.list.push({key:f.getTime(),index:k+1,x:y,y:v}),a.click&&a.click(y,v),i.cancelBubble=!0,i.preventDefault(),!1},p=i=>(a.confirm&&a.confirm(N(u.list),()=>{L()}),i.cancelBubble=!0,i.preventDefault(),!1),t=i=>(e(),i.cancelBubble=!0,i.preventDefault(),!1),d=i=>(h(),i.cancelBubble=!0,i.preventDefault(),!1),e=()=>{a.close&&a.close(),L()},h=()=>{a.refresh&&a.refresh(),L()},L=()=>{u.list=[]};return{dots:u,clickEvent:n,confirmEvent:p,closeEvent:t,refreshEvent:d,resetData:L,clearData:()=>{L(),l&&l()},refresh:h,close:e}}const Ue={class:"gc-header"},Ge=["src"],qe={class:"gc-loading"},Ze=["src"],Je={class:"gc-dots"},Ke={class:"gc-footer"},Qe={class:"gc-icon-block gc-icon-block2"},et={class:"gc-button-block"},ve=U({__name:"index",props:{config:{default:ye},events:{default:()=>({})},data:{default:()=>({})}},setup(s,{expose:a}){const l=s,{data:u,events:n,config:p}=l,t=R({...N(u)}),d=R({...N(n)}),e=R({...ye(),...N(p)});M(()=>l.data,(m,g)=>{Object.assign(t,m)},{deep:!0}),M(()=>l.events,(m,g)=>{Object.assign(d,m)},{deep:!0}),M(()=>l.config,(m,g)=>{Object.assign(e,m)},{deep:!0});const h=Ie(t,d,()=>{t.thumb="",t.image=""}),L=C(()=>{const m=e.horizontalPadding||0,g=e.verticalPadding||0;return{width:(e.width||0)+m*2+(e.showTheme?2:0)+"px",paddingLeft:m+"px",paddingRight:m+"px",paddingTop:g+"px",paddingBottom:g+"px"}}),i=C(()=>({width:e.thumbWidth+"px",height:e.thumbHeight+"px"})),r=C(()=>({width:e.width+"px",height:e.height+"px"})),w=C(()=>t.image&&t.image.length>0||t.thumb&&t.thumb.length>0),o=C(()=>(e.width||0)>0||(e.height||0)>0);return a({reset:h.resetData,clear:h.clearData,refresh:h.refresh,close:h.close}),(m,g)=>Z((T(),X("div",{class:ee(`go-captcha gc-wrapper ${e.showTheme&&"gc-theme"}`),style:B(L.value)},[c("div",Ue,[c("span",null,ce(e.title),1),Z(c("img",{style:B(i.value),src:t.thumb,alt:""},null,12,Ge),[[J,w.value]])]),c("div",{class:"gc-body",style:B(r.value)},[c("div",qe,[W(he)]),Z(c("img",{style:B(r.value),class:"gc-picture",src:t.image,onClick:g[0]||(g[0]=(...x)=>b(h).clickEvent&&b(h).clickEvent(...x)),alt:""},null,12,Ze),[[J,w.value]]),c("div",Je,[(T(!0),X(Te,null,Pe(b(h).dots.list,x=>(T(),X("div",{class:"gc-dot",key:`${x.key+"-"+x.index}`,style:B({width:e.dotSize+"px",height:e.dotSize+"px",borderRadius:e.dotSize+"px",top:x.y-(e.dotSize||1)/2-1+"px",left:x.x-(e.dotSize||1)/2-1+"px"})},ce(x.index),5))),128))])],4),c("div",Ke,[c("div",Qe,[W(ue,{width:e.iconSize,height:e.iconSize,onClick:b(h).closeEvent},null,8,["width","height","onClick"]),W(de,{width:e.iconSize,height:e.iconSize,onClick:b(h).refreshEvent},null,8,["width","height","onClick"])]),c("div",et,[c("button",{class:ee(!w.value&&"disabled"),onClick:g[1]||(g[1]=(...x)=>b(h).confirmEvent&&b(h).confirmEvent(...x))},ce(e.buttonText),3)])])],6)),[[J,o.value]])}});ve.name="gocaptcha-click";ve.install=function(s){s.component("gocaptcha-click",ve)};const ke=()=>({width:300,height:220,thumbWidth:150,thumbHeight:40,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),tt=c("path",{d:`M131.6,116.3c0,0-75.6,0-109.7,0c-9.1,0-16.2-7.4-16.2-16.2c0-9.1,7.4-16.2,16.2-16.2c28.7,0,109.7,0,109.7,0
	s-5.4-5.4-30.4-30.7c-6.4-6.4-6.4-16.7,0-23.1s16.7-6.4,23.1,0l58.4,58.4c6.4,6.4,6.4,16.7,0,23.1c0,0-32.9,32.9-57.9,57.9
	c-6.4,6.4-16.7,6.4-23.1,0c-6.4-6.4-6.4-16.7,0-23.1C121.8,126.2,131.6,116.3,131.6,116.3z`},null,-1),at=[tt],Se=U({__name:"arrows-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),at,16))}}),ze=()=>({thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:"",thumb:""});function nt(s,a,l,u,n,p,t,d,e){const h=R({dragLeft:0,thumbLeft:s.thumbX||0,isFreeze:!1});M(()=>s,(g,x)=>{h.isFreeze||(h.thumbLeft=g.thumbX||0)},{deep:!0});const L=g=>{if(!le(d.value,g))return;const x=g.touches&&g.touches[0],_=t.value.offsetLeft,D=n.value.offsetWidth,y=t.value.offsetWidth,v=D-y,f=p.value.offsetWidth,k=p.value.offsetLeft,$=D-f,K=(D-(f+k))/v;let O=!1,j=null,F=0,V=0;x?F=x.pageX-_:F=g.clientX-_;const G=z=>{O=!0;const se=z.touches&&z.touches[0];let Y=0;se?Y=se.pageX-F:Y=z.clientX-F;let Q=k+Y*K;if(Y>=v){h.dragLeft=v,h.thumbLeft=V=$;return}if(Y<=0){h.dragLeft=0,h.thumbLeft=V=k;return}h.dragLeft=Y,h.thumbLeft=V=Q,a.move&&a.move(V,s.thumbY||0),z.cancelBubble=!0,z.preventDefault()},P=z=>{le(d.value,z)&&(q(),O&&(O=!1,!(V<0)&&(a.confirm&&a.confirm({x:parseInt(V.toString()),y:s.thumbY||0},()=>{m()}),z.cancelBubble=!0,z.preventDefault())))},te=z=>{j=z},A=()=>{j=null},H=z=>{j&&(P(j),q())},ae=l.scope,E=ae?u.value:d.value,S=ae?u.value:document.body,q=()=>{S.removeEventListener("mousemove",G,!1),S.removeEventListener("touchmove",G,{passive:!1}),E.removeEventListener("mouseup",P,!1),E.removeEventListener("mouseenter",A,!1),E.removeEventListener("mouseleave",te,!1),E.removeEventListener("touchend",P,!1),S.removeEventListener("mouseleave",P,!1),S.removeEventListener("mouseup",H,!1),h.isFreeze=!1};h.isFreeze=!0,S.addEventListener("mousemove",G,!1),S.addEventListener("touchmove",G,{passive:!1}),E.addEventListener("mouseup",P,!1),E.addEventListener("mouseenter",A,!1),E.addEventListener("mouseleave",te,!1),E.addEventListener("touchend",P,!1),S.addEventListener("mouseleave",P,!1),S.addEventListener("mouseup",H,!1)},i=g=>(w(),g.cancelBubble=!0,g.preventDefault(),!1),r=g=>(o(),g.cancelBubble=!0,g.preventDefault(),!1),w=()=>{a&&a.close&&a.close(),m()},o=()=>{a&&a.refresh&&a.refresh(),m()},m=()=>{h.dragLeft=0,h.thumbLeft=s.thumbX||0};return{state:h,dragEvent:L,closeEvent:i,refreshEvent:r,resetData:m,clearData:()=>{e&&e(),m()},refresh:o,close:w}}const ct={class:"gc-header"},st={class:"gc-icon-block"},lt={class:"gc-loading"},it=["src"],rt=["src"],ot={class:"gc-footer"},ut=c("div",{class:"gc-drag-line"},null,-1),fe=U({__name:"index",props:{config:{default:ke},events:{default:()=>({})},data:{default:ze}},setup(s,{expose:a}){const l=s,{data:u,events:n,config:p}=l,t=R({...ze(),...N(u)}),d=R({...N(n)}),e=R({...ke(),...N(p)});M(()=>l.data,(f,k)=>{Object.assign(t,f)},{deep:!0}),M(()=>l.events,(f,k)=>{Object.assign(d,f)},{deep:!0}),M(()=>l.config,(f,k)=>{Object.assign(e,f)},{deep:!0});const h=I(null),L=I(null),i=I(null),r=I(null),w=I(null),o=nt(t,d,e,h,i,w,r,L,()=>{t.thumb="",t.image="",t.thumbX=0,t.thumbY=0,t.thumbWidth=0,t.thumbHeight=0}),m=C(()=>{const f=e.horizontalPadding||0,k=e.verticalPadding||0;return{width:(e.width||0)+f*2+(e.showTheme?2:0)+"px",paddingLeft:f+"px",paddingRight:f+"px",paddingTop:k+"px",paddingBottom:k+"px"}}),g=C(()=>({width:t.thumbWidth+"px",height:t.thumbHeight+"px",top:t.thumbY+"px",left:o.state.thumbLeft+"px"})),x=C(()=>({width:e.width+"px",height:e.height+"px"})),_=C(()=>t.image&&t.image.length>0),D=C(()=>t.thumb&&t.thumb.length>0),y=C(()=>(e.width||0)>0||(e.height||0)>0),v=f=>f.preventDefault();return be(async()=>{await we(),r.value&&r.value.addEventListener("dragstart",v)}),Le(()=>{r.value&&r.value.removeEventListener("dragstart",v)}),a({reset:o.resetData,clear:o.clearData,refresh:o.refresh,close:o.close}),(f,k)=>Z((T(),X("div",{class:ee(`go-captcha gc-wrapper ${e.showTheme&&"gc-theme"}`),style:B(m.value),ref_key:"rootRef",ref:h},[c("div",ct,[c("span",null,ce(e.title),1),c("div",st,[W(ue,{width:e.iconSize,height:e.iconSize,onClick:b(o).closeEvent},null,8,["width","height","onClick"]),W(de,{width:e.iconSize,height:e.iconSize,onClick:b(o).refreshEvent},null,8,["width","height","onClick"])])]),c("div",{class:"gc-body",ref_key:"containerRef",ref:i,style:B(x.value)},[c("div",lt,[W(he)]),Z(c("img",{class:"gc-picture",style:B(x.value),src:t.image,alt:""},null,12,it),[[J,_.value]]),c("div",{class:"gc-tile",ref_key:"tileRef",ref:w,style:B(g.value)},[Z(c("img",{src:t.thumb,alt:""},null,8,rt),[[J,D.value]])],4)],4),c("div",ot,[c("div",{class:"gc-drag-slide-bar",ref_key:"dragBarRef",ref:L},[ut,c("div",{class:ee(["gc-drag-block",!_.value&&"disabled"]),ref_key:"dragBlockRef",ref:r,onMousedown:k[1]||(k[1]=(...$)=>b(o).dragEvent&&b(o).dragEvent(...$)),style:B({left:b(o).state.dragLeft+"px"})},[c("div",{class:"gc-drag-block-inline",onTouchstart:k[0]||(k[0]=(...$)=>b(o).dragEvent&&b(o).dragEvent(...$))},[W(Se)],32)],38)],512)])],6)),[[J,y.value]])}});fe.name="gocaptcha-slide";fe.install=function(s){s.component("gocaptcha-slide",fe)};const Ce=()=>({width:300,height:220,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖拽贴图完成拼图",iconSize:22,scope:!0}),_e=()=>({thumbX:0,thumbY:0,thumbWidth:0,thumbHeight:0,image:"",thumb:""});function dt(s,a,l,u,n,p,t){const d=R({x:s.thumbX||0,y:s.thumbY||0,isFreeze:!1});M(()=>s,(o,m)=>{d.isFreeze||(d.x=o.thumbX||0,d.y=o.thumbY||0)},{deep:!0});const e=o=>{if(!le(n.value,o))return;const m=o.touches&&o.touches[0],g=p.value.offsetLeft,x=p.value.offsetTop,_=n.value.offsetWidth,D=n.value.offsetHeight,y=p.value.offsetWidth,v=p.value.offsetHeight,f=_-y,k=D-v;let $=!1,K=null,O=0,j=0,F=0,V=0;m?(O=m.pageX-g,j=m.pageY-x):(O=o.clientX-g,j=o.clientY-x);const G=z=>{$=!0;const se=z.touches&&z.touches[0];let Y=0,Q=0;se?(Y=se.pageX-O,Q=se.pageY-j):(Y=z.clientX-O,Q=z.clientY-j),Y<=0&&(Y=0),Q<=0&&(Q=0),Y>=f&&(Y=f),Q>=k&&(Q=k),d.x=Y,d.y=Q,F=Y,V=Q,a.move&&a.move(Y,Q),z.cancelBubble=!0,z.preventDefault()},P=z=>{le(n.value,z)&&(q(),$&&($=!1,!(F<0||V<0)&&(a.confirm&&a.confirm({x:F,y:V},()=>{w()}),z.cancelBubble=!0,z.preventDefault())))},te=z=>{K=z},A=()=>{K=null},H=z=>{K&&(P(K),q())},ae=l.scope,E=ae?u.value:n.value,S=ae?u.value:document.body,q=()=>{S.removeEventListener("mousemove",G,!1),S.removeEventListener("touchmove",G,{passive:!1}),E.removeEventListener("mouseup",P,!1),E.removeEventListener("mouseenter",A,!1),E.removeEventListener("mouseleave",te,!1),E.removeEventListener("touchend",P,!1),S.removeEventListener("mouseleave",P,!1),S.removeEventListener("mouseup",H,!1),d.isFreeze=!1};d.isFreeze=!0,S.addEventListener("mousemove",G,!1),S.addEventListener("touchmove",G,{passive:!1}),E.addEventListener("mouseup",P,!1),E.addEventListener("mouseenter",A,!1),E.addEventListener("mouseleave",te,!1),E.addEventListener("touchend",P,!1),S.addEventListener("mouseleave",P,!1),S.addEventListener("mouseup",H,!1)},h=o=>(i(),o.cancelBubble=!0,o.preventDefault(),!1),L=o=>(r(),o.cancelBubble=!0,o.preventDefault(),!1),i=()=>{a&&a.close&&a.close(),w()},r=()=>{a&&a.refresh&&a.refresh(),w()},w=()=>{d.x=s.thumbX||0,d.y=s.thumbY||0};return{state:d,dragEvent:e,closeEvent:h,refreshEvent:L,resetData:w,clearData:()=>{t&&t(),w()},refresh:r,close:i}}const ht={class:"gc-header gc-header2"},gt={class:"gc-loading"},vt=["src"],ft=["src"],mt={class:"gc-footer"},pt={class:"gc-icon-block"},me=U({__name:"index",props:{config:{default:Ce},events:{default:()=>({})},data:{default:_e}},setup(s,{expose:a}){const l=s,{data:u,events:n,config:p}=l,t=R({..._e(),...N(u)}),d=R({...N(n)}),e=R({...Ce(),...N(p)});M(()=>l.data,(y,v)=>{Object.assign(t,y)},{deep:!0}),M(()=>l.events,(y,v)=>{Object.assign(d,y)},{deep:!0}),M(()=>l.config,(y,v)=>{Object.assign(e,y)},{deep:!0});const h=I(null),L=I(null),i=I(null),r=dt(t,d,e,h,L,i,()=>{t.thumb="",t.image="",t.thumbX=0,t.thumbY=0,t.thumbWidth=0,t.thumbHeight=0}),w=C(()=>{const y=e.horizontalPadding||0,v=e.verticalPadding||0;return{width:(e.width||0)+y*2+(e.showTheme?2:0)+"px",paddingLeft:y+"px",paddingRight:y+"px",paddingTop:v+"px",paddingBottom:v+"px"}}),o=C(()=>({width:t.thumbWidth+"px",height:t.thumbHeight+"px",top:r.state.y+"px",left:r.state.x+"px"})),m=C(()=>({width:e.width+"px",height:e.height+"px"})),g=C(()=>t.image&&t.image.length>0),x=C(()=>t.thumb&&t.thumb.length>0),_=C(()=>(e.width||0)>0||(e.height||0)>0),D=y=>y.preventDefault();return be(async()=>{await we(),i.value&&i.value.addEventListener("dragstart",D)}),Le(()=>{i.value&&i.value.removeEventListener("dragstart",D)}),a({reset:r.resetData,clear:r.clearData,refresh:r.refresh,close:r.close}),(y,v)=>Z((T(),X("div",{class:ee(`go-captcha gc-wrapper ${e.showTheme&&"gc-theme"}`),style:B(w.value),ref_key:"rootRef",ref:h},[c("div",ht,[c("span",null,ce(e.title),1)]),c("div",{class:"gc-body",ref_key:"containerRef",ref:L,style:B(m.value)},[c("div",gt,[W(he)]),Z(c("img",{class:"gc-picture",style:B(m.value),src:t.image,alt:""},null,12,vt),[[J,g.value]]),c("div",{class:"gc-tile",ref_key:"tileRef",ref:i,style:B(o.value),onMousedown:v[0]||(v[0]=(...f)=>b(r).dragEvent&&b(r).dragEvent(...f)),onTouchstart:v[1]||(v[1]=(...f)=>b(r).dragEvent&&b(r).dragEvent(...f))},[Z(c("img",{src:t.thumb,alt:""},null,8,ft),[[J,x.value]])],36)],4),c("div",mt,[c("div",pt,[W(ue,{width:e.iconSize,height:e.iconSize,onClick:b(r).closeEvent},null,8,["width","height","onClick"]),W(de,{width:e.iconSize,height:e.iconSize,onClick:b(r).refreshEvent},null,8,["width","height","onClick"])])])],6)),[[J,_.value]])}});me.name="gocaptcha-slide-region";me.install=function(s){s.component("gocaptcha-slide-region",me)};const ge=()=>({width:300,height:220,size:220,verticalPadding:16,horizontalPadding:12,showTheme:!0,title:"请拖动滑块完成拼图",iconSize:22,scope:!0}),Be=()=>({angle:0,image:"",thumb:"",thumbSize:0});function bt(s,a,l,u,n,p,t){const d=R({dragLeft:0,thumbAngle:s.angle||0,isFreeze:!1});M(()=>s,(o,m)=>{d.isFreeze||(d.thumbAngle=o.angle||0)},{deep:!0});const e=o=>{if(!le(p.value,o))return;const m=o.touches&&o.touches[0],g=n.value.offsetLeft,x=p.value.offsetWidth,_=n.value.offsetWidth,D=x-_,y=360,v=(y-s.angle)/D;let f=0,k=!1,$=null,K=0,O=0;m?K=m.pageX-g:K=o.clientX-g;const j=E=>{k=!0;const S=E.touches&&E.touches[0];let q=0;if(S?q=S.pageX-K:q=E.clientX-K,f=s.angle+q*v,q>=D){d.dragLeft=D,d.thumbAngle=O=y;return}if(q<=0){d.dragLeft=0,d.thumbAngle=O=s.angle;return}d.dragLeft=q,d.thumbAngle=O=f,a.rotate&&a.rotate(f),E.cancelBubble=!0,E.preventDefault()},F=E=>{le(p.value,E)&&(ae(),k&&(k=!1,!(O<0)&&(a.confirm&&a.confirm(parseInt(O.toString()),()=>{w()}),E.cancelBubble=!0,E.preventDefault())))},V=E=>{$=E},G=()=>{$=null},P=E=>{$&&(F($),ae())},te=l.scope,A=te?u.value:p.value,H=te?u.value:document.body,ae=()=>{H.removeEventListener("mousemove",j,!1),H.removeEventListener("touchmove",j,{passive:!1}),A.removeEventListener("mouseup",F,!1),A.removeEventListener("mouseenter",G,!1),A.removeEventListener("mouseleave",V,!1),A.removeEventListener("touchend",F,!1),H.removeEventListener("mouseleave",F,!1),H.removeEventListener("mouseup",P,!1),d.isFreeze=!1};d.isFreeze=!0,H.addEventListener("mousemove",j,!1),H.addEventListener("touchmove",j,{passive:!1}),A.addEventListener("mouseup",F,!1),A.addEventListener("mouseenter",G,!1),A.addEventListener("mouseleave",V,!1),A.addEventListener("touchend",F,!1),H.addEventListener("mouseleave",F,!1),H.addEventListener("mouseup",P,!1)},h=o=>(i(),o.cancelBubble=!0,o.preventDefault(),!1),L=o=>(r(),o.cancelBubble=!0,o.preventDefault(),!1),i=()=>{a&&a.close&&a.close(),w()},r=()=>{a&&a.refresh&&a.refresh(),w()},w=()=>{d.dragLeft=0,d.thumbAngle=s.angle};return{state:d,dragEvent:e,closeEvent:h,refreshEvent:L,resetData:w,clearData:()=>{t&&t(),w()},refresh:r,close:i}}const wt={class:"gc-header"},Lt={class:"gc-icon-block"},xt={class:"gc-loading"},Et=["src"],yt=c("div",{class:"gc-round"},null,-1),kt={class:"gc-thumb gc-rotate-thumb"},zt=["src"],Ct={class:"gc-footer"},_t=c("div",{class:"gc-drag-line"},null,-1),oe=U({__name:"index",props:{config:{default:ge},events:{default:()=>({})},data:{default:Be}},setup(s,{expose:a}){const l=s,{data:u,events:n,config:p}=l,t=R({...Be(),...N(u)}),d=R({...N(n)}),e=R({...ge(),...N(p)});M(()=>l.data,(v,f)=>{Object.assign(t,v)},{deep:!0}),M(()=>l.events,(v,f)=>{Object.assign(d,v)},{deep:!0}),M(()=>l.config,(v,f)=>{Object.assign(e,v)},{deep:!0});const h=I(null),L=I(null),i=I(null),r=bt(t,d,e,h,i,L,()=>{t.thumb="",t.image="",t.angle=0}),w=C(()=>{const v=e.horizontalPadding||0,f=e.verticalPadding||0;return{width:(e.width||0)+v*2+(e.showTheme?2:0)+"px",paddingLeft:v+"px",paddingRight:v+"px",paddingTop:f+"px",paddingBottom:f+"px"}}),o=C(()=>({transform:`rotate(${r.state.thumbAngle}deg)`,...t.thumbSize>0?{width:t.thumbSize+"px",height:t.thumbSize+"px"}:{}})),m=C(()=>({width:e.width+"px",height:e.height+"px"})),g=C(()=>{const v=(e.size||0)>0?e.size:ge().size;return{width:v+"px",height:v+"px"}}),x=C(()=>t.image&&t.image.length>0),_=C(()=>t.thumb&&t.thumb.length>0),D=C(()=>(e.width||0)>0||(e.height||0)>0),y=v=>v.preventDefault();return be(async()=>{await we(),i.value&&i.value.addEventListener("dragstart",y)}),Le(()=>{i.value&&i.value.removeEventListener("dragstart",y)}),a({reset:r.resetData,clear:r.clearData,refresh:r.refresh,close:r.close}),(v,f)=>Z((T(),X("div",{class:ee(`go-captcha gc-wrapper ${e.showTheme&&"gc-theme"}`),style:B(w.value),ref_key:"rootRef",ref:h},[c("div",wt,[c("span",null,ce(e.title),1),c("div",Lt,[W(ue,{width:e.iconSize,height:e.iconSize,onClick:b(r).closeEvent},null,8,["width","height","onClick"]),W(de,{width:e.iconSize,height:e.iconSize,onClick:b(r).refreshEvent},null,8,["width","height","onClick"])])]),c("div",{class:"gc-body gc-rotate-body",ref:"containerRef",style:B(m.value)},[c("div",{class:"gc-body-inner",style:B(g.value)},[c("div",xt,[W(he)]),c("div",{class:"gc-picture gc-rotate-picture",style:B(g.value)},[Z(c("img",{src:t.image,alt:""},null,8,Et),[[J,x.value]]),yt],4),c("div",kt,[c("div",{class:"gc-rotate-thumb-block",style:B(o.value)},[Z(c("img",{src:t.thumb,alt:""},null,8,zt),[[J,_.value]])],4)])],4)],4),c("div",Ct,[c("div",{class:"gc-drag-slide-bar",ref_key:"dragBarRef",ref:L},[_t,c("div",{class:ee(["gc-drag-block",!x.value&&"disabled"]),ref_key:"dragBlockRef",ref:i,onMousedown:f[1]||(f[1]=(...k)=>b(r).dragEvent&&b(r).dragEvent(...k)),style:B({left:b(r).state.dragLeft+"px"})},[c("div",{class:"gc-drag-block-inline",onTouchstart:f[0]||(f[0]=(...k)=>b(r).dragEvent&&b(r).dragEvent(...k))},[W(Se)],32)],38)],512)])],6)),[[J,D.value]])}});oe.name="gocaptcha-rotate";oe.install=function(s){s.component("gocaptcha-rotate",oe)};const Bt=c("circle",{fill:"#3E7CFF",cx:"100",cy:"100",r:"96.3"},null,-1),Dt=c("path",{fill:"#FFFFFF",d:`M140.8,64.4l-39.6-11.9h-2.4L59.2,64.4c-1.6,0.8-2.8,2.4-2.8,4v24.1c0,25.3,15.8,45.9,42.3,54.6
	c0.4,0,0.8,0.4,1.2,0.4c0.4,0,0.8,0,1.2-0.4c26.5-8.7,42.3-28.9,42.3-54.6V68.3C143.5,66.8,142.3,65.2,140.8,64.4z`},null,-1),St=[Bt,Dt],Tt=U({__name:"btn-default-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),St,16))}}),Pt=c("path",{fill:"#FFA000",d:`M184,26.6L102.4,2.1h-4.9L16,26.6c-3.3,1.6-5.7,4.9-5.7,8.2v49.8c0,52.2,32.6,94.7,87.3,112.6
	c0.8,0,1.6,0.8,2.4,0.8s1.6,0,2.4-0.8c54.7-18,87.3-59.6,87.3-112.6V34.7C189.8,31.5,187.3,28.2,184,26.6z M107.3,109.1
	c-0.5,5.4-3.9,7.9-7.3,7.9c-2.5,0,0,0,0,0c-3.2-0.6-5.7-2-6.8-7.4l-4.4-50.9c0-5.1,6.2-9.7,11.5-9.7c5.3,0,11,4.7,11,9.9
	L107.3,109.1z M109.3,133.3c0,5.1-4.2,9.3-9.3,9.3c-5.1,0-9.3-4.2-9.3-9.3c0-5.1,4.2-9.3,9.3-9.3C105.1,124,109.3,128.1,109.3,133.3
	z`},null,-1),Rt=[Pt],Ft=U({__name:"btn-warn-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),Rt,16))}}),Yt=c("path",{fill:"#ED4630",d:`M184,26.6L102.4,2.1h-4.9L16,26.6c-3.3,1.6-5.7,4.9-5.7,8.2v49.8c0,52.2,32.6,94.7,87.3,112.6
	c0.8,0,1.6,0.8,2.4,0.8s1.6,0,2.4-0.8c54.7-18,87.3-59.6,87.3-112.6V34.7C189.8,31.5,187.3,28.2,184,26.6z M134.5,123.1
	c3.1,3.1,3.1,8.2,0,11.3c-1.6,1.6-3.6,2.3-5.7,2.3s-4.1-0.8-5.7-2.3L100,111.3l-23.1,23.1c-1.6,1.6-3.6,2.3-5.7,2.3
	c-2,0-4.1-0.8-5.7-2.3c-3.1-3.1-3.1-8.2,0-11.3L88.7,100L65.5,76.9c-3.1-3.1-3.1-8.2,0-11.3c3.1-3.1,8.2-3.1,11.3,0L100,88.7
	l23.1-23.1c3.1-3.1,8.2-3.1,11.3,0c3.1,3.1,3.1,8.2,0,11.3L111.3,100L134.5,123.1z`},null,-1),Mt=[Yt],Xt=U({__name:"btn-error-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),Mt,16))}}),$t=c("path",{fill:"#5EAA2F",d:`M183.3,27.2L102.4,2.9h-4.9L16.7,27.2C13.4,28.8,11,32,11,35.3v49.4c0,51.8,32.4,93.9,86.6,111.7
	c0.8,0,1.6,0.8,2.4,0.8c0.8,0,1.6,0,2.4-0.8c54.2-17.8,86.6-59.1,86.6-111.7V35.3C189,32,186.6,28.8,183.3,27.2z M146.1,81.4
	l-48.5,48.5c-1.6,1.6-3.2,2.4-5.7,2.4c-2.4,0-4-0.8-5.7-2.4L62,105.7c-3.2-3.2-3.2-8.1,0-11.3c3.2-3.2,8.1-3.2,11.3,0l18.6,18.6
	l42.9-42.9c3.2-3.2,8.1-3.2,11.3,0C149.4,73.3,149.4,78.2,146.1,81.4L146.1,81.4z`},null,-1),Ot=[$t],jt=U({__name:"btn-success-icon",emits:["click"],setup(s,{emit:a}){const l=a;function u(n){l("click",n)}return(n,p)=>(T(),X("svg",ne({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",width:"20",height:"20"},n.$attrs,{onClick:u}),Ot,16))}}),De=()=>({width:330,height:44,verticalPadding:12,horizontalPadding:16}),pe=U({__name:"index",props:{config:{default:De},clickEvent:{},disabled:{type:Boolean,default:!1},type:{default:"default"},title:{default:"点击按键进行验证"}},emits:["click-event"],setup(s,{emit:a}){const l=s,{type:u,title:n,disabled:p,config:t}=Re(l),d=R({...De(),...N(t)});M(()=>l.config,(r,w)=>{Object.assign(d,r)},{deep:!0});const e=C(()=>["go-captcha","gc-btn-block",`gc-${u.value}`,p.value?"gc-disabled":""]),h=C(()=>({width:d.width+"px",height:d.height+"px",paddingLeft:d.horizontalPadding+"px",paddingRight:d.horizontalPadding+"px",paddingTop:d.verticalPadding+"px",paddingBottom:d.verticalPadding+"px"})),L=a;function i(r){L("click-event",r)}return(r,w)=>(T(),X("div",{class:ee(e.value),style:B(h.value),onClick:i},[c("div",{class:ee(b(u)==="default"?"gc-ripple":"")},[b(u)==="default"?(T(),re(Tt,{key:0})):b(u)==="warn"?(T(),re(Ft,{key:1})):b(u)==="error"?(T(),re(Xt,{key:2})):b(u)==="success"?(T(),re(jt,{key:3})):Fe("",!0)],2),c("span",null,ce(b(n)),1)],6))}});pe.name="gocaptcha-button";pe.install=function(s){s.component("gocaptcha-button",pe)};async function Wt(s={}){const{$i18n:a}=Ye(),{title:l=a.t("captcha.title"),zIndex:u=1001,onOpenChange:n=null}=s;let p;try{p=await xe("/api/captcha/request_angle")}catch(t){throw console.error("Failed to load captcha:",t),Ee(t),t}return new Promise((t,d)=>{const e=I(!0),h=I(p);let L=null,i=null;const r=()=>{L&&(L.unmount(),L=null),i&&i.parentNode&&(i.parentNode.removeChild(i),i=null)},w=_=>{if(h.value){const D={captchaId:h.value.id,captchaCode:_===null?"":_+""};e.value=!1,r(),t(D)}},o=()=>{e.value=!1,r(),d(new Error("User cancelled captcha"))},m=async()=>{try{const _=await xe("/api/captcha/request_angle");h.value=_}catch(_){console.error("Failed to refresh captcha:",_),Ee(_)}},g=_=>{n&&n(_)},x={setup(){return()=>ie($e,{open:e.value,"onUpdate:open":g},{default:()=>ie(Xe,{class:"w-auto max-w-none p-0 bg-white rounded-lg overflow-hidden",style:{zIndex:u+1}},{default:()=>[ie("div",{class:"p-0"},h.value?ie(oe,{config:{title:l},data:{image:h.value.imageBase64,thumb:h.value.thumbBase64},events:{refresh:m,close:o,confirm:w}}):ie("div",{class:"p-6 text-center"},"Loading captcha..."))]})})}};i=document.createElement("div"),document.body.appendChild(i),L=Me(x),L.mount(i)})}export{Wt as u};
