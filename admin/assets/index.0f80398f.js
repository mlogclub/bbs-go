import{f as A,F as U,a as v,B as j,A as H}from"./index.e2988b1b.js";import{d as L,j as z,r as C,o as M,b6 as O,bE as G,ac as K,aX as P,ba as X,a6 as q,bA as J,bL as Q,D as R,E as f,aI as a,aH as t,u as o,C as y,aK as r,aL as d,aE as V,b7 as W,bG as Y,bM as Z}from"./arco.b0f81cee.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import{_ as x}from"./Edit.vue_vue_type_script_setup_true_lang.0a07ab27.js";import"./chart.37105098.js";import"./vue.76373e4c.js";const ee={class:"container"},ae={class:"container-header"},te={class:"action-btns"},oe={class:"container-main"},w=0,ve=L({__name:"index",setup(le){const p=A(),_=z(!1),b=z(),n=C({name:void 0,code:void 0,status:0}),h=C({results:[]});M(()=>{U()});const m=async()=>{_.value=!0;try{const e=await v.postForm("/api/admin/role/list",j(n));h.results=e}finally{_.value=!1}};m();const T=()=>{b.value.show()},D=e=>{b.value.showEdit(e)},F=async e=>{const s=[];e.forEach(u=>{s.push(u.id)}),await v.post("/api/admin/role/update_sort",s),await m()};return(e,s)=>{const u=O,c=W,$=Y,E=G,S=K,g=P,B=X,I=q,i=Z,k=J,N=Q;return y(),R("div",ee,[f("div",ae,[a(B,{model:o(n),layout:"inline",size:o(p).table.size},{default:t(()=>[a(c,null,{default:t(()=>[a(u,{modelValue:o(n).name,"onUpdate:modelValue":s[0]||(s[0]=l=>o(n).name=l),placeholder:e.$t("pages.role.name")},null,8,["modelValue","placeholder"])]),_:1}),a(c,null,{default:t(()=>[a(u,{modelValue:o(n).code,"onUpdate:modelValue":s[1]||(s[1]=l=>o(n).code=l),placeholder:e.$t("pages.role.code")},null,8,["modelValue","placeholder"])]),_:1}),a(c,null,{default:t(()=>[a(E,{modelValue:o(n).status,"onUpdate:modelValue":s[2]||(s[2]=l=>o(n).status=l),placeholder:e.$t("pages.role.status"),"allow-clear":"",onChange:m},{default:t(()=>[a($,{value:0,label:e.$t("pages.role.statusNormal")},null,8,["label"]),a($,{value:1,label:e.$t("pages.role.statusDisabled")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),a(c,null,{default:t(()=>[a(g,{type:"primary","html-type":"submit",onClick:m},{icon:t(()=>[a(S)]),default:t(()=>[r(" "+d(e.$t("pages.role.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),f("div",te,[a(g,{type:"primary",size:o(p).table.size,onClick:T},{icon:t(()=>[a(I)]),default:t(()=>[r(" "+d(e.$t("pages.role.add")),1)]),_:1},8,["size"])])]),f("div",oe,[a(N,{loading:o(_),data:o(h).results,size:o(p).table.size,bordered:o(p).table.bordered,pagination:!1,"sticky-header":!0,style:{height:"100%"},"column-resizable":"",draggable:{type:"handle",width:40},"row-key":"id",onChange:F},{columns:t(()=>[a(i,{title:e.$t("pages.role.id"),"data-index":"id"},null,8,["title"]),a(i,{title:e.$t("pages.role.name"),"data-index":"name"},null,8,["title"]),a(i,{title:e.$t("pages.role.code"),"data-index":"code"},null,8,["title"]),a(i,{title:e.$t("pages.role.type"),"data-index":"name"},{cell:t(({record:l})=>[l.type===w?(y(),V(k,{key:0,color:"blue"},{default:t(()=>[r(d(e.$t("pages.role.typeSystem")),1)]),_:1})):(y(),V(k,{key:1},{default:t(()=>[r(d(e.$t("pages.role.typeCustom")),1)]),_:1}))]),_:1},8,["title"]),a(i,{title:e.$t("pages.role.remark"),"data-index":"remark"},null,8,["title"]),a(i,{title:e.$t("pages.role.status"),"data-index":"status"},{cell:t(({record:l})=>[r(d(l.status===0?e.$t("pages.role.statusNormal"):e.$t("pages.role.statusDisabled")),1)]),_:1},8,["title"]),a(i,{title:e.$t("pages.role.createTime"),"data-index":"createTime"},{cell:t(({record:l})=>[r(d(("useFormatDate"in e?e.useFormatDate:o(H))(l.createTime)),1)]),_:1},8,["title"]),a(i,{title:e.$t("pages.role.actions")},{cell:t(({record:l})=>[a(g,{type:"primary",size:o(p).table.size,disabled:l.type===w,onClick:se=>D(l.id)},{default:t(()=>[r(d(e.$t("pages.role.edit")),1)]),_:2},1032,["size","disabled","onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered"])]),a(x,{ref_key:"edit",ref:b,onOk:m},null,512)])}}});export{ve as default};
