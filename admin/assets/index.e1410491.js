import{f as x,v as V,G as $,a as v,C as k,E as I,h as N}from"./index.51e009fb.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as S,j as T,r as U,o as B,a6 as j,aX as D,b9 as H,aU as A,b6 as F,bL as M,D as G,E as f,aI as a,aH as s,u as l,C as K,aK as m,aL as u,bM as P}from"./arco.c0e72183.js";import"./chart.eb223df5.js";import"./vue.2f126dbd.js";const X={class:"container"},q={class:"container-header"},J={class:"container-main"},de=S({__name:"index",setup(O){const n=x(),{t:g}=V.exports.useI18n(),p=T(!1),t=U([]);B(()=>{$()});const _=async()=>{const o=(await v.postForm("/api/admin/level-config/list",k({page:1,limit:200,status:0}))).results||[];t.splice(0,t.length,...o)};_();const h=()=>{const e=t.length+1,o=t.length&&t[t.length-1].needExp||0;t.push({level:e,needExp:o+100,title:`${g("pages.growthLevelConfig.level")} ${e}`,status:0})},b=()=>{t.length<=1||t.pop()},C=async()=>{p.value=!0;try{const e=t.map(o=>({level:o.level,needExp:o.needExp,title:o.title}));await v.post("/api/admin/level-config/save_all",e),I(g("pages.growthLevelConfig.saveSuccess")),await _()}catch(e){N(e)}finally{p.value=!1}};return(e,o)=>{const y=j,r=D,L=H,d=P,w=A,z=F,E=M;return K(),G("div",X,[f("div",q,[a(L,null,{default:s(()=>[a(r,{type:"primary",size:l(n).table.size,onClick:h},{icon:s(()=>[a(y)]),default:s(()=>[m(" "+u(e.$t("pages.growthLevelConfig.add")),1)]),_:1},8,["size"]),a(r,{type:"primary",status:"danger",size:l(n).table.size,disabled:l(t).length<=1,onClick:b},{default:s(()=>[m(u(e.$t("pages.growthLevelConfig.removeLast")),1)]),_:1},8,["size","disabled"]),a(r,{type:"primary",size:l(n).table.size,loading:l(p),onClick:C},{default:s(()=>[m(u(e.$t("pages.growthLevelConfig.save")),1)]),_:1},8,["size","loading"])]),_:1})]),f("div",J,[a(E,{data:l(t),size:l(n).table.size,bordered:l(n).table.bordered,pagination:!1,"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"level"},{columns:s(()=>[a(d,{title:e.$t("pages.growthLevelConfig.level"),"data-index":"level"},null,8,["title"]),a(d,{title:e.$t("pages.growthLevelConfig.needExp"),"data-index":"needExp"},{cell:s(({record:i})=>[a(w,{modelValue:i.needExp,"onUpdate:modelValue":c=>i.needExp=c,min:0,mode:"button"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["title"]),a(d,{title:e.$t("pages.growthLevelConfig.title"),"data-index":"title"},{cell:s(({record:i})=>[a(z,{modelValue:i.title,"onUpdate:modelValue":c=>i.title=c},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["title"])]),_:1},8,["data","size","bordered"])])])}}});export{de as default};
