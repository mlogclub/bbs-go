import{_ as P,v as H,I as G,j as K,B as M,a as f,C as $,E as h,h as k,A as I}from"./index.51e009fb.js";import{bA as X,bo as Z,bB as q,bZ as Q,aX as W,bC as Y,bD as x,D as d,aM as v,aJ as w,aE as c,C as n,E as a,aH as o,aK as r,aL as s,aF as u,aI as m,u as z,b_ as ee}from"./arco.c0e72183.js";/* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               */import te from"./TopicVoteCard.b658f722.js";import"./chart.eb223df5.js";import"./vue.2f126dbd.js";const ae={class:"topics"},se={class:"topic-status"},ne={class:"topic-header"},oe=["href"],ie=["src"],ce={class:"topic-head-info"},re={class:"nickname"},me=["href"],le={class:"topic-metas"},de={class:"meta-item"},ue={class:"meta-item"},pe={class:"meta-item"},_e={class:"meta-item"},ge={class:"meta-item"},ye={key:0,class:"topic-summary"},fe={key:1,class:"topic-summary"},he={class:"topic-image-list"},ke={class:"topic-footer"},ve={class:"topic-tags"},be={class:"topic-actions"},$e={__name:"TopicList",props:{results:{type:Array,default(){return[]}}},emits:["change"],setup(L,{emit:C}){const{t:g}=H.exports.useI18n(),y=C,O=async t=>{try{await f.form("/api/admin/topic/delete",$({id:t})),h(g("pages.topic.notify.deleteSuccess")),y("change")}catch(i){k(i)}},T=async t=>{try{await f.form("/api/admin/topic/undelete",$({id:t})),h(g("pages.topic.notify.undeleteSuccess")),y("change")}catch(i){k(i)}},U=async t=>{try{await f.form("/api/admin/topic/recommend",$({id:t})),h(g("pages.topic.notify.recommendSuccess")),y("change")}catch(i){k(i)}},R=async t=>{try{await f.delete(`/api/admin/topic/recommend?id=${t}`),h(g("pages.topic.notify.cancelRecommendSuccess")),y("change")}catch(i){k(i)}},E=async t=>{try{await f.form("/api/admin/topic/audit",$({id:t})),h(g("pages.topic.notify.auditSuccess")),y("change")}catch(i){k(i)}},S=t=>I(`/topic/${t.idEncode||t.id}`),B=t=>{var i;return I(`/user/${((i=t.user)==null?void 0:i.id)||0}`)};return(t,i)=>{const b=X,F=G,N=Z,V=q,A=ee,D=Q,p=W,_=Y,J=x;return n(),d("div",ae,[L.results&&L.results.length?(n(!0),d(v,{key:0},w(L.results,e=>(n(),d("div",{key:e.id,class:"topic-item"},[a("div",se,[e.recommend?(n(),c(b,{key:0,color:"green"},{default:o(()=>[r(s(t.$t("pages.topic.table.recommended")),1)]),_:1})):u("",!0),e.status===1?(n(),c(b,{key:1,color:"red"},{default:o(()=>[r(s(t.$t("pages.topic.table.deleted")),1)]),_:1})):u("",!0)]),a("div",ne,[a("a",{href:B(e),target:"_blank",class:"user-link"},[m(N,{size:40},{default:o(()=>[e.user.avatar?(n(),d("img",{key:0,src:("useJoinBaseURL"in t?t.useJoinBaseURL:z(K))(e.user.avatar)},null,8,ie)):(n(),c(F,{key:1}))]),_:2},1024)],8,oe),a("div",ce,[a("div",re,[a("a",{href:B(e),target:"_blank",class:"user-link"},s(e.user.nickname),9,me)]),a("div",le,[a("div",de,[i[0]||(i[0]=a("span",null,"ID:",-1)),a("span",null,s(e.id),1)]),a("div",ue,[a("span",null,s(t.$t("pages.topic.table.time"))+":",1),a("span",null,s(("useFormatDate"in t?t.useFormatDate:z(M))(e.createTime)),1)]),a("div",pe,[a("span",null,s(t.$t("pages.topic.table.view"))+":",1),a("span",null,s(e.viewCount),1)]),a("div",_e,[a("span",null,s(t.$t("pages.topic.table.like"))+":",1),a("span",null,s(e.likeCount),1)]),a("div",ge,[a("span",null,s(t.$t("pages.topic.table.comment"))+":",1),a("span",null,s(e.commentCount),1)])])])]),e.type===0&&e.summary?(n(),d("div",ye,s(e.summary),1)):u("",!0),e.type===1&&e.content?(n(),d("div",fe,s(e.content),1)):u("",!0),e.vote?(n(),c(te,{key:2,vote:e.vote},null,8,["vote"])):u("",!0),e.imageList&&e.imageList.length?(n(),c(A,{key:3,infinite:""},{default:o(()=>[a("div",he,[(n(!0),d(v,null,w(e.imageList,(l,j)=>(n(),c(V,{key:j,width:"150",height:"150",class:"image-item","show-loader":"",src:l.url,fit:"cover"},null,8,["src"]))),128))])]),_:2},1024)):u("",!0),a("div",ke,[a("div",ve,[e.node?(n(),c(b,{key:0,color:"green",size:"mini"},{default:o(()=>[r(s(e.node.name),1)]),_:2},1024)):u("",!0),e.tags&&e.tags.length?(n(!0),d(v,{key:1},w(e.tags,l=>(n(),c(b,{key:l.id,size:"mini"},{default:o(()=>[r("#\xA0"+s(l.name),1)]),_:2},1024))),128)):u("",!0)]),a("div",be,[e.status===0?(n(),d(v,{key:0},[m(D,{class:"action-item",href:S(e),target:"_blank"},{default:o(()=>[r(s(t.$t("pages.topic.table.detail")),1)]),_:2},1032,["href"]),e.recommend?(n(),c(_,{key:0,content:t.$t("pages.topic.popconfirm.cancelRecommend"),onOk:l=>R(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.cancelRecommend")),1)]),_:1})]),_:2},1032,["content","onOk"])):!e.recommend&&e.status===0?(n(),c(_,{key:1,content:t.$t("pages.topic.popconfirm.recommend"),onOk:l=>U(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.recommend")),1)]),_:1})]),_:2},1032,["content","onOk"])):u("",!0),m(_,{content:t.$t("pages.topic.popconfirm.delete"),onOk:l=>O(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])],64)):e.status===1?(n(),c(_,{key:1,content:t.$t("pages.topic.popconfirm.undelete"),onOk:l=>T(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.undelete")),1)]),_:1})]),_:2},1032,["content","onOk"])):e.status===2?(n(),d(v,{key:2},[m(D,{class:"action-item",href:S(e),target:"_blank"},{default:o(()=>[r(s(t.$t("pages.topic.table.detail")),1)]),_:2},1032,["href"]),m(_,{content:t.$t("pages.topic.popconfirm.delete"),onOk:l=>O(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.delete")),1)]),_:1})]),_:2},1032,["content","onOk"]),m(_,{content:t.$t("pages.topic.popconfirm.audit"),onOk:l=>E(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.auditPass")),1)]),_:1})]),_:2},1032,["content","onOk"])],64)):u("",!0)])])]))),128)):(n(),c(J,{key:1}))])}}},Ue=P($e,[["__scopeId","data-v-a0cd6447"]]);export{Ue as default};
