import{f as R,G as W,a as v,C as V,B as Y}from"./index.51e009fb.js";import{d as Z,j as y,r as D,c as x,o as ee,b6 as te,bE as ae,ac as oe,aX as le,ba as ne,a6 as se,bC as ie,b9 as pe,bL as re,D as $,E as z,aI as t,aH as o,u as l,C as k,aM as F,aJ as N,aE as O,aK as r,aL as d,b7 as de,bG as ue,bM as ge}from"./arco.c0e72183.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import{_ as me}from"./Edit.vue_vue_type_script_setup_true_lang.47c30fef.js";import"./chart.eb223df5.js";import"./vue.2f126dbd.js";/* empty css                */const ce={class:"container"},fe={class:"container-header"},he={class:"action-btns"},ke={class:"container-main"},Ue=Z({__name:"index",setup(we){const u=R(),b=y(!1),_=y(),s=D({limit:20,page:1,title:"",groupName:void 0,eventType:void 0,period:void 0,status:0}),g=D({page:{page:1,limit:20,total:0},results:[]}),w=y([]),f=y([]),S=async()=>{const e=await v.get("/api/admin/common/task_event_types");w.value=e||[]},E=async()=>{const e=await v.get("/api/admin/task-config/groups");f.value=e||[],!s.groupName&&f.value.length},I=e=>{const n=w.value.find(h=>h.value===e);return n?`${n.title||n.value}`:e},B=e=>{const n=f.value.find(h=>h.key===e);return n?n.name:e},L=x(()=>({total:g.page.total,current:g.page.page,pageSize:g.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));ee(async()=>{W(),await S(),await E()});const p=async()=>{b.value=!0;try{const e=await v.postForm("/api/admin/task-config/list",V(s));g.page=e.page,g.results=e.results}finally{b.value=!1}};p();const P=()=>{_.value.show()},U=e=>{_.value.showEdit(e)},G=async e=>{await v.postForm("/api/admin/task-config/delete",V({ids:[e]})),await p()},M=e=>{s.page=e,p()},j=e=>{s.limit=e,p()};return(e,n)=>{const h=te,m=de,c=ue,C=ae,A=oe,T=le,H=ne,J=se,i=ge,K=ie,X=pe,q=re;return k(),$("div",ce,[z("div",fe,[t(H,{model:l(s),layout:"inline",size:l(u).table.size},{default:o(()=>[t(m,null,{default:o(()=>[t(h,{modelValue:l(s).title,"onUpdate:modelValue":n[0]||(n[0]=a=>l(s).title=a),placeholder:e.$t("pages.growthTaskConfig.title")},null,8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:o(()=>[t(C,{modelValue:l(s).groupName,"onUpdate:modelValue":n[1]||(n[1]=a=>l(s).groupName=a),placeholder:e.$t("pages.growthTaskConfig.groupName"),"allow-clear":"",style:{width:"180px"},onChange:p},{default:o(()=>[(k(!0),$(F,null,N(l(f),a=>(k(),O(c,{key:a.key,value:a.key,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:o(()=>[t(C,{modelValue:l(s).eventType,"onUpdate:modelValue":n[2]||(n[2]=a=>l(s).eventType=a),placeholder:e.$t("pages.growthTaskConfig.eventType"),"allow-clear":"",style:{width:"180px"},onChange:p},{default:o(()=>[(k(!0),$(F,null,N(l(w),a=>(k(),O(c,{key:a.value,value:a.value,label:a.title||a.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:o(()=>[t(C,{modelValue:l(s).period,"onUpdate:modelValue":n[3]||(n[3]=a=>l(s).period=a),placeholder:e.$t("pages.growthTaskConfig.period"),"allow-clear":"",style:{width:"140px"},onChange:p},{default:o(()=>[t(c,{value:0,label:e.$t("pages.growthTaskConfig.periodOnce")},null,8,["label"]),t(c,{value:1,label:e.$t("pages.growthTaskConfig.periodDaily")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:o(()=>[t(C,{modelValue:l(s).status,"onUpdate:modelValue":n[4]||(n[4]=a=>l(s).status=a),placeholder:e.$t("pages.growthTaskConfig.status"),"allow-clear":"",style:{width:"140px"},onChange:p},{default:o(()=>[t(c,{value:0,label:e.$t("pages.growthTaskConfig.statusOk")},null,8,["label"]),t(c,{value:1,label:e.$t("pages.growthTaskConfig.statusDeleted")},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),t(m,null,{default:o(()=>[t(T,{type:"primary","html-type":"submit",onClick:p},{icon:o(()=>[t(A)]),default:o(()=>[r(" "+d(e.$t("pages.growthTaskConfig.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),z("div",he,[t(T,{type:"primary",size:l(u).table.size,onClick:P},{icon:o(()=>[t(J)]),default:o(()=>[r(" "+d(e.$t("pages.growthTaskConfig.add")),1)]),_:1},8,["size"])])]),z("div",ke,[t(q,{loading:l(b),data:l(g).results,size:l(u).table.size,bordered:l(u).table.bordered,pagination:l(L),"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"id",onPageChange:M,onPageSizeChange:j},{columns:o(()=>[t(i,{title:e.$t("pages.growthTaskConfig.id"),"data-index":"id"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.groupName"),"data-index":"groupName"},{cell:o(({record:a})=>[r(d(B(a.groupName)),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.title"),"data-index":"title"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.eventType"),"data-index":"eventType"},{cell:o(({record:a})=>[r(d(I(a.eventType)),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.period"),"data-index":"period"},{cell:o(({record:a})=>[r(d(a.period===1?e.$t("pages.growthTaskConfig.periodDaily"):e.$t("pages.growthTaskConfig.periodOnce")),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.score"),"data-index":"score"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.exp"),"data-index":"exp"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.badgeId"),"data-index":"badgeId"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.eventCount"),"data-index":"eventCount"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.maxFinishCount"),"data-index":"maxFinishCount"},null,8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.status"),"data-index":"status"},{cell:o(({record:a})=>[r(d(a.status===0?e.$t("pages.growthTaskConfig.statusOk"):e.$t("pages.growthTaskConfig.statusDeleted")),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.updateTime"),"data-index":"updateTime"},{cell:o(({record:a})=>[r(d(("useFormatDate"in e?e.useFormatDate:l(Y))(a.updateTime)),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthTaskConfig.actions")},{cell:o(({record:a})=>[t(X,null,{default:o(()=>[t(T,{type:"primary",size:l(u).table.size,onClick:Q=>U(a.id)},{default:o(()=>[r(d(e.$t("pages.growthTaskConfig.edit")),1)]),_:2},1032,["size","onClick"]),t(K,{content:e.$t("pages.growthTaskConfig.confirmDelete"),onOk:Q=>G(a.id)},{default:o(()=>[t(T,{type:"primary",status:"danger",size:l(u).table.size,disabled:a.status===1},{default:o(()=>[r(d(e.$t("pages.growthTaskConfig.delete")),1)]),_:2},1032,["size","disabled"])]),_:2},1032,["content","onOk"])]),_:2},1024)]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])]),t(me,{ref_key:"edit",ref:_,"event-type-options":l(w),"group-options":l(f),onOk:p},null,8,["event-type-options","group-options"])])}}});export{Ue as default};
