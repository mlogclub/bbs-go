import{v as V,_ as C,u as L,I as T,a as j,D as B,b as A}from"./index.e2988b1b.js";/* empty css              */import{d as S,c as O,b4 as Q,C as p,D as f,E as n,aI as a,aH as t,aM as z,aJ as G,aE as F,aL as g,b5 as H,j as h,r as J,u as r,aF as K,aK as P,aW as W,b6 as X,b7 as Y,b8 as Z,ae as ee,aX as ae,b9 as oe,ba as se,o as ne,bb as te}from"./arco.b0f81cee.js";import{F as re}from"./index.f6a2dc4d.js";/* empty css              *//* empty css               */import{f as k}from"./vue.76373e4c.js";import"./chart.37105098.js";const w="/admin/assets/logo364x364.fc4aff0c.png",le={class:"banner"},ce={class:"banner-inner"},ie={class:"carousel-content"},de={class:"carousel-content-title"},ue={class:"carousel-content-sub-title"},_e=S({__name:"banner",setup(b){const{t:e}=V.exports.useI18n(),i=O(()=>[{slogan:e("pages.login.banner.slogan1"),subSlogan:e("pages.login.banner.subSlogan1"),image:w},{slogan:e("pages.login.banner.slogan2"),subSlogan:e("pages.login.banner.subSlogan2"),image:w},{slogan:e("pages.login.banner.slogan3"),subSlogan:e("pages.login.banner.subSlogan3"),image:w}]);return(d,u)=>{const c=H,_=Q;return p(),f("div",le,[n("div",ce,[a(_,{class:"carousel","auto-play":!0,"show-arrow":"hover","animation-name":"slide"},{default:t(()=>[(p(!0),f(z,null,G(i.value,o=>(p(),F(c,{key:o.slogan},{default:t(()=>[(p(),f("div",{key:o.slogan,class:"carousel-item"},[n("div",ie,[n("div",de,g(o.slogan),1),n("div",ue,g(o.subSlogan),1)])]))]),_:2},1024))),128))]),_:1})])])}}});const pe=C(_e,[["__scopeId","data-v-b1fa89f5"]]);function ge(b=!1){const e=h(b);return{loading:e,setLoading:u=>{e.value=u},toggle:()=>{e.value=!e.value}}}const me={class:"login-form-wrapper"},fe={class:"login-form-title"},be={class:"login-form-sub-title"},he={class:"login-form-error-msg"},ve=["src"],ye=S({__name:"login-form",setup(b){const e=k(),{t:i}=V.exports.useI18n(),d=h(""),{loading:u,setLoading:c}=ge(),_=L(),o=J({username:"",password:"",captchaId:"",captchaCode:""}),v=h(""),y=async()=>{const s=await j.get("/api/captcha/request");o.captchaId=s.captchaId,o.captchaCode="",v.value=s.captchaBase64};y();const q=async({errors:s})=>{if(!u.value&&!s){c(!0);try{await _.login(o);const{redirect:l,...$}=e.currentRoute.value.query;e.push({name:l||B,query:{...$}}),W.success(i("pages.login.form.login.success"))}catch(l){y(),d.value=l.message}finally{c(!1)}}};return(s,l)=>{const $=A,x=X,I=Y,M=T,N=Z,U=ee,E=ae,D=oe,R=se;return p(),f("div",me,[n("div",fe,g(s.$t("pages.login.form.title")),1),n("div",be,g(s.$t("pages.login.form.subtitle")),1),n("div",he,g(r(d)),1),a(R,{ref:"loginForm",model:r(o),class:"login-form",layout:"vertical",onSubmit:q},{default:t(()=>[a(I,{field:"username",rules:[{required:!0,message:s.$t("pages.login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[a(x,{modelValue:r(o).username,"onUpdate:modelValue":l[0]||(l[0]=m=>r(o).username=m),placeholder:s.$t("pages.login.form.userName.placeholder")},{prefix:t(()=>[a($)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),a(I,{field:"password",rules:[{required:!0,message:s.$t("pages.login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[a(N,{modelValue:r(o).password,"onUpdate:modelValue":l[1]||(l[1]=m=>r(o).password=m),placeholder:s.$t("pages.login.form.password.placeholder"),"allow-clear":""},{prefix:t(()=>[a(M)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),r(v)?(p(),F(I,{key:0,field:"captchaCode",rules:[{required:!0,message:s.$t("pages.login.form.captchaCode.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[a(x,{modelValue:r(o).captchaCode,"onUpdate:modelValue":l[2]||(l[2]=m=>r(o).captchaCode=m),placeholder:s.$t("pages.login.form.captchaCode.placeholder"),"allow-clear":"",class:"captcha-code"},{prefix:t(()=>[a(U)]),append:t(()=>[n("img",{src:`data:image/png;base64,${r(v)}`,onClick:y},null,8,ve)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"])):K("",!0),a(D,{size:16,direction:"vertical"},{default:t(()=>[a(E,{type:"primary","html-type":"submit",long:"",loading:r(u)},{default:t(()=>[P(g(s.$t("pages.login.form.login.submit")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}});const $e=C(ye,[["__scopeId","data-v-ee75ffb5"]]),Ie={class:"login-container"},we={class:"content"},Ce={class:"content-inner"},Se={class:"footer"},xe=S({__name:"index",setup(b){const e=L(),i=k(),d=h(!0);return ne(async()=>{try{if(await e.info()){const{redirect:c,..._}=i.currentRoute.value.query;i.push({name:c||B,query:{..._}})}}finally{d.value=!1}}),(u,c)=>{const _=te;return p(),f("div",Ie,[c[0]||(c[0]=n("div",{class:"logo"},[n("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"}),n("div",{class:"logo-text"},"BBS-GO")],-1)),a(pe),n("div",we,[n("div",Ce,[a(_,{loading:r(d),tip:"Loading"},{default:t(()=>[a($e)]),_:1},8,["loading"])]),n("div",Se,[a(re)])])])}}});const Ue=C(xe,[["__scopeId","data-v-0a0b5e30"]]);export{Ue as default};
