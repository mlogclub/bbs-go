import{f as R,F as W,a as y,B,p as j,A}from"./index.080c3c87.js";import{d as H,j as I,r as U,c as J,o as O,aU as G,bE as K,b6 as X,ac as q,aX as Q,ba as Y,bB as Z,bL as x,D as b,E as w,aI as t,aH as s,u as o,C as d,aM as ee,aJ as te,aE as T,aL as p,aK as m,b7 as ae,bG as oe,bM as se}from"./arco.fe08071c.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import"./chart.a7740a30.js";import"./vue.ce9ec506.js";const le={class:"container"},ie={class:"container-header"},ne={class:"container-main"},re={key:1},Se=H({__name:"index",setup(de){const c=R(),h=I(!1),_=I([]),l=U({limit:20,page:1,userId:void 0,badgeId:void 0,sourceType:""}),n=U({page:{page:1,limit:20,total:0},results:[]}),$=J(()=>({total:n.page.total,current:n.page.page,pageSize:n.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));O(()=>{W()});const v=async()=>{const e=await y.postForm("/api/admin/badge/list",B({page:1,limit:5e3}));_.value=e.results||[]},u=async()=>{h.value=!0;try{const e=await y.postForm("/api/admin/user-badge/list",B(l));n.page=e.page,n.results=e.results}finally{h.value=!1}};Promise.all([v(),u()]);const S=e=>{l.page=e,u()},V=e=>{l.limit=e,u()};return(e,r)=>{const z=G,g=ae,F=oe,k=K,C=X,L=q,D=Q,E=Y,i=se,N=Z,P=x;return d(),b("div",le,[w("div",ie,[t(E,{model:o(l),layout:"inline",size:o(c).table.size},{default:s(()=>[t(g,null,{default:s(()=>[t(z,{modelValue:o(l).userId,"onUpdate:modelValue":r[0]||(r[0]=a=>o(l).userId=a),min:1,placeholder:e.$t("pages.growthUserBadge.userId")},null,8,["modelValue","placeholder"])]),_:1}),t(g,null,{default:s(()=>[t(k,{modelValue:o(l).badgeId,"onUpdate:modelValue":r[1]||(r[1]=a=>o(l).badgeId=a),placeholder:e.$t("pages.growthUserBadge.badgeId"),"allow-clear":"","allow-search":"",style:{width:"200px"}},{default:s(()=>[(d(!0),b(ee,null,te(o(_),a=>(d(),T(F,{key:a.id,value:a.id,label:a.title},{default:s(()=>[w("span",null,p(a.title),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),t(g,null,{default:s(()=>[t(C,{modelValue:o(l).sourceType,"onUpdate:modelValue":r[2]||(r[2]=a=>o(l).sourceType=a),placeholder:e.$t("pages.growthUserBadge.sourceType")},null,8,["modelValue","placeholder"])]),_:1}),t(g,null,{default:s(()=>[t(D,{type:"primary","html-type":"submit",onClick:u},{icon:s(()=>[t(L)]),default:s(()=>[m(" "+p(e.$t("pages.growthUserBadge.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"])]),w("div",ne,[t(P,{loading:o(h),data:o(n).results,size:o(c).table.size,bordered:o(c).table.bordered,pagination:o($),"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"id",onPageChange:S,onPageSizeChange:V},{columns:s(()=>[t(i,{title:e.$t("pages.growthUserBadge.id"),"data-index":"id"},null,8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.userId"),"data-index":"userId"},null,8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.badgeId"),"data-index":"badgeId"},null,8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.badgeTitle"),"data-index":"badgeTitle"},{cell:s(({record:a})=>{var f;return[m(p(((f=o(_).find(M=>M.id===a.badgeId))==null?void 0:f.title)||"-"),1)]}),_:1},8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.badgeIcon"),"data-index":"badgeIcon"},{cell:s(({record:a})=>[a.icon?(d(),T(N,{key:0,src:("useSiteURL"in e?e.useSiteURL:o(j))(a.icon),width:32,height:32,fit:"contain",preview:!0},null,8,["src"])):(d(),b("span",re,"-"))]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.sourceType"),"data-index":"sourceType"},null,8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.sourceId"),"data-index":"sourceId"},null,8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.isWorn"),"data-index":"isWorn"},{cell:s(({record:a})=>[m(p(a.isWorn?e.$t("pages.growthUserBadge.yes"):e.$t("pages.growthUserBadge.no")),1)]),_:1},8,["title"]),t(i,{title:e.$t("pages.growthUserBadge.createTime"),"data-index":"createTime"},{cell:s(({record:a})=>[m(p(("useFormatDate"in e?e.useFormatDate:o(A))(a.createTime)),1)]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])])])}}});export{Se as default};
