import{f as P,h as f,a as v,B as S,C as z}from"./index.080c3c87.js";/* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               */import{d as A,j as b,r as M,bE as O,b6 as R,ba as j,aE as F,aH as u,u as e,b1 as q,C as c,aI as t,D as H,aJ as N,aM as G,bG as J,b7 as L}from"./arco.fe08071c.js";import{I as T}from"./ImageUpload.8b5cdc17.js";const te=A({__name:"Edit",emits:["ok"],setup($,{expose:B,emit:g}){const C=g,E=P(),r=b(),i=M({visible:!1,isCreate:!1,title:""}),o=b({type:0,username:void 0,email:void 0,nickname:void 0,avatar:void 0,gender:void 0,homePage:void 0,description:void 0,roleIds:void 0}),V=b(),k={type:[{required:!0,message:"\u8BF7\u9009\u62E9\u7528\u6237\u7C7B\u578B"}],nickname:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"}]},y=async()=>{r.value.resetFields(),i.isCreate=!0,i.title="\u65B0\u589E";try{await _()}catch(n){f(n)}i.visible=!0},U=async n=>{r.value.resetFields(),i.isCreate=!1,i.title="\u7F16\u8F91";try{o.value=await v.get(`/api/admin/user/${n}`),await _()}catch(a){f(a)}i.visible=!0},_=async()=>{V.value=await v.get("/api/admin/role/roles")},w=()=>{r.value.resetFields()},I=async n=>{if(await r.value.validate()){n(!1);return}try{const s=i.isCreate?"/api/admin/user/create":"/api/admin/user/update";await v.postForm(s,S(o.value)),z("\u63D0\u4EA4\u6210\u529F"),C("ok"),n(!0)}catch(s){f(s),n(!1)}};return B({show:y,showEdit:U}),(n,a)=>{const s=J,p=O,d=L,m=R,D=j,x=q;return c(),F(x,{visible:e(i).visible,"onUpdate:visible":a[9]||(a[9]=l=>e(i).visible=l),title:e(i).title,size:e(E).table.size,onCancel:w,onBeforeOk:I},{default:u(()=>[t(D,{ref_key:"formRef",ref:r,model:e(o),rules:k},{default:u(()=>[t(d,{label:"\u7C7B\u578B",field:"type"},{default:u(()=>[t(p,{modelValue:e(o).type,"onUpdate:modelValue":a[0]||(a[0]=l=>e(o).type=l),placeholder:"\u7528\u6237\u7C7B\u578B"},{default:u(()=>[t(s,{value:0,label:"\u7528\u6237"}),t(s,{value:1,label:"\u5458\u5DE5"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"\u6635\u79F0",field:"nickname"},{default:u(()=>[t(m,{modelValue:e(o).nickname,"onUpdate:modelValue":a[1]||(a[1]=l=>e(o).nickname=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u5934\u50CF",field:"avatar"},{default:u(()=>[t(T,{modelValue:e(o).avatar,"onUpdate:modelValue":a[2]||(a[2]=l=>e(o).avatar=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u7528\u6237\u540D",field:"username"},{default:u(()=>[t(m,{modelValue:e(o).username,"onUpdate:modelValue":a[3]||(a[3]=l=>e(o).username=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u90AE\u7BB1",field:"email"},{default:u(()=>[t(m,{modelValue:e(o).email,"onUpdate:modelValue":a[4]||(a[4]=l=>e(o).email=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u6027\u522B",field:"gender"},{default:u(()=>[t(p,{modelValue:e(o).gender,"onUpdate:modelValue":a[5]||(a[5]=l=>e(o).gender=l)},{default:u(()=>[t(s,{value:"Male",label:"\u7537"}),t(s,{value:"Female",label:"\u5973"})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"\u4E3B\u9875",field:"homePage"},{default:u(()=>[t(m,{modelValue:e(o).homePage,"onUpdate:modelValue":a[6]||(a[6]=l=>e(o).homePage=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u63CF\u8FF0",field:"description"},{default:u(()=>[t(m,{modelValue:e(o).description,"onUpdate:modelValue":a[7]||(a[7]=l=>e(o).description=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"\u89D2\u8272",field:"roles"},{default:u(()=>[t(p,{modelValue:e(o).roleIds,"onUpdate:modelValue":a[8]||(a[8]=l=>e(o).roleIds=l),multiple:"",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:u(()=>[(c(!0),H(G,null,N(e(V),l=>(c(),F(s,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}});export{te as _};
