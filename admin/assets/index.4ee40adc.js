import{f as j,G as M,a as f,C as y,j as R,B as W}from"./index.51e009fb.js";import{d as G,j as I,r as U,c as H,o as O,aU as A,bE as K,b6 as X,ac as q,aX as Q,ba as Y,bB as Z,bL as x,D as b,E as w,aI as a,aH as s,u as o,C as d,aM as ee,aJ as ae,aE as T,aL as p,aK as m,b7 as te,bG as oe,bM as se}from"./arco.c0e72183.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              */import"./chart.eb223df5.js";import"./vue.2f126dbd.js";const le={class:"container"},ne={class:"container-header"},ie={class:"container-main"},re={key:1},ve=G({__name:"index",setup(de){const c=j(),h=I(!1),_=I([]),l=U({limit:20,page:1,userId:void 0,badgeId:void 0,sourceType:""}),i=U({page:{page:1,limit:20,total:0},results:[]}),$=H(()=>({total:i.page.total,current:i.page.page,pageSize:i.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));O(()=>{M()});const v=async()=>{const e=await f.postForm("/api/admin/badge/list",y({page:1,limit:5e3}));_.value=e.results||[]},u=async()=>{h.value=!0;try{const e=await f.postForm("/api/admin/user-badge/list",y(l));i.page=e.page,i.results=e.results}finally{h.value=!1}};Promise.all([v(),u()]);const V=e=>{l.page=e,u()},z=e=>{l.limit=e,u()};return(e,r)=>{const k=A,g=te,F=oe,S=K,C=X,L=q,D=Q,J=Y,n=se,E=Z,N=x;return d(),b("div",le,[w("div",ne,[a(J,{model:o(l),layout:"inline",size:o(c).table.size},{default:s(()=>[a(g,null,{default:s(()=>[a(k,{modelValue:o(l).userId,"onUpdate:modelValue":r[0]||(r[0]=t=>o(l).userId=t),min:1,placeholder:e.$t("pages.growthUserBadge.userId")},null,8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:s(()=>[a(S,{modelValue:o(l).badgeId,"onUpdate:modelValue":r[1]||(r[1]=t=>o(l).badgeId=t),placeholder:e.$t("pages.growthUserBadge.badgeId"),"allow-clear":"","allow-search":"",style:{width:"200px"}},{default:s(()=>[(d(!0),b(ee,null,ae(o(_),t=>(d(),T(F,{key:t.id,value:t.id,label:t.title},{default:s(()=>[w("span",null,p(t.title),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:s(()=>[a(C,{modelValue:o(l).sourceType,"onUpdate:modelValue":r[2]||(r[2]=t=>o(l).sourceType=t),placeholder:e.$t("pages.growthUserBadge.sourceType")},null,8,["modelValue","placeholder"])]),_:1}),a(g,null,{default:s(()=>[a(D,{type:"primary","html-type":"submit",onClick:u},{icon:s(()=>[a(L)]),default:s(()=>[m(" "+p(e.$t("pages.growthUserBadge.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"])]),w("div",ie,[a(N,{loading:o(h),data:o(i).results,size:o(c).table.size,bordered:o(c).table.bordered,pagination:o($),"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"id",onPageChange:V,onPageSizeChange:z},{columns:s(()=>[a(n,{title:e.$t("pages.growthUserBadge.id"),"data-index":"id"},null,8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.userId"),"data-index":"userId"},null,8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.badgeId"),"data-index":"badgeId"},null,8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.badgeTitle"),"data-index":"badgeTitle"},{cell:s(({record:t})=>{var B;return[m(p(((B=o(_).find(P=>P.id===t.badgeId))==null?void 0:B.title)||"-"),1)]}),_:1},8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.badgeIcon"),"data-index":"badgeIcon"},{cell:s(({record:t})=>[t.icon?(d(),T(E,{key:0,src:("useJoinBaseURL"in e?e.useJoinBaseURL:o(R))(t.icon),width:32,height:32,fit:"contain",preview:!0},null,8,["src"])):(d(),b("span",re,"-"))]),_:1},8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.sourceType"),"data-index":"sourceType"},null,8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.sourceId"),"data-index":"sourceId"},null,8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.isWorn"),"data-index":"isWorn"},{cell:s(({record:t})=>[m(p(t.isWorn?e.$t("pages.growthUserBadge.yes"):e.$t("pages.growthUserBadge.no")),1)]),_:1},8,["title"]),a(n,{title:e.$t("pages.growthUserBadge.createTime"),"data-index":"createTime"},{cell:s(({record:t})=>[m(p(("useFormatDate"in e?e.useFormatDate:o(W))(t.createTime)),1)]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])])])}}});export{ve as default};
