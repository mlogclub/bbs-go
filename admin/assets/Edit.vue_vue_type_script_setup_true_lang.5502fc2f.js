import{v as S,f as U,a as c,h as f,B as y,C as B}from"./index.080c3c87.js";/* empty css              *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               */import{d as N,j as v,r as O,b6 as P,bE as $,ba as j,aE as q,aH as r,u as t,b1 as x,C as z,aI as e,b7 as A,bG as D}from"./arco.fe08071c.js";const X=N({__name:"Edit",emits:["ok"],setup(G,{expose:b,emit:_}){const{t:n}=S.exports.useI18n(),h=_,E=U(),m=v(),o=O({visible:!1,isCreate:!1,title:""}),s=v({name:void 0,method:void 0,path:void 0,createTime:void 0,updateTime:void 0}),g={name:[{required:!0,message:n("pages.api.pleaseInputName")}],method:[{required:!0,message:n("pages.api.pleaseInputMethod")}],path:[{required:!0,message:n("pages.api.pleaseInputPath")}]},T=()=>{m.value.resetFields(),o.isCreate=!0,o.title=n("pages.api.new"),o.visible=!0},C=async l=>{m.value.resetFields(),o.isCreate=!1,o.title=n("pages.api.editTitle");try{s.value=await c.get(`/api/admin/api/${l}`)}catch(a){f(a)}o.visible=!0},V=()=>{m.value.resetFields()},I=async l=>{if(await m.value.validate()){l(!1);return}try{const p=o.isCreate?"/api/admin/api/create":"/api/admin/api/update";await c.postForm(p,y(s.value)),B(n("pages.api.submitSuccess")),h("ok"),l(!0)}catch(p){f(p),l(!1)}};return b({show:T,showEdit:C}),(l,a)=>{const p=P,d=A,u=D,k=$,w=j,F=x;return z(),q(F,{visible:t(o).visible,"onUpdate:visible":a[3]||(a[3]=i=>t(o).visible=i),title:t(o).title,size:t(E).table.size,onCancel:V,onBeforeOk:I},{default:r(()=>[e(w,{ref_key:"formRef",ref:m,model:t(s),rules:g},{default:r(()=>[e(d,{label:l.$t("pages.api.name"),field:"name"},{default:r(()=>[e(p,{modelValue:t(s).name,"onUpdate:modelValue":a[0]||(a[0]=i=>t(s).name=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{label:l.$t("pages.api.method"),field:"method"},{default:r(()=>[e(k,{modelValue:t(s).method,"onUpdate:modelValue":a[1]||(a[1]=i=>t(s).method=i)},{default:r(()=>[e(u,{value:"GET",label:"GET"}),e(u,{value:"POST",label:"POST"}),e(u,{value:"DELETE",label:"DELETE"}),e(u,{value:"PUT",label:"PUT"}),e(u,{value:"ANY",label:"ANY"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(d,{label:l.$t("pages.api.path"),field:"path"},{default:r(()=>[e(p,{modelValue:t(s).path,"onUpdate:modelValue":a[2]||(a[2]=i=>t(s).path=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}});export{X as _};
