import{_ as b,p as k,a as z,E as C,C as V}from"./index.080c3c87.js";import{j as w,c as B,C as c,aE as f,bI as N,aH as P,E as n,F as R,u as t,G as m,D as g,aI as y,aF as $,ag as D,bJ as F,a6 as L,bK as q}from"./arco.fe08071c.js";/* empty css               *//* empty css               *//* empty css                */const j=["src"],G={class:"arco-upload-list-picture-mask"},H={class:"arco-upload-picture-card-text"},J={__name:"ImageUpload",props:{customUploadButton:{type:Boolean,default:!0},modelValue:{type:String,default:""},size:{type:Number,default:0}},emits:["update:modelValue"],setup(r,{emit:h}){const I=h,l=r,o=w(),i=B(()=>{if(!(!l.size||l.size<=0))return{width:`${l.size}px`,height:`${l.size}px`}}),U=({onProgress:s,onError:a,onSuccess:u,fileItem:p,name:d})=>{z.post("/api/upload",(()=>{const e=new FormData;return e.append(d,p.file),e})(),{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let _=0;e.total>0&&(_=Math.round(e.loaded/e.total*100)),s({percent:_})}}).then(e=>{u(e)}).catch(e=>{a(e)})},v=(s,a)=>{o.value={...a}},x=s=>{o.value=s},S=()=>{C("\u4E0A\u4F20\u5931\u8D25")},E=s=>{const a=s.response;I("update:modelValue",a.url),V("\u4E0A\u4F20\u6210\u529F")};return(s,a)=>{const u=D,p=F,d=L,e=q;return c(),f(e,{"custom-request":U,"file-list":t(o)?[t(o)]:[],"show-file-list":!1,accept:"image/*",name:"image","with-credentials":"",onChange:v,onProgress:x,onSuccess:E,onError:S},N({_:2},[r.customUploadButton?{name:"upload-button",fn:P(()=>[n("div",{class:R(`arco-upload-list-item${t(o)&&t(o).status==="error"?" arco-upload-list-item-error":""}`),style:m(t(i))},[r.modelValue?(c(),g("div",{key:0,class:"arco-upload-list-picture custom-upload-avatar",style:m(t(i))},[n("img",{src:("useSiteURL"in s?s.useSiteURL:t(k))(r.modelValue)},null,8,j),n("div",G,[y(u)]),t(o)&&t(o).status==="uploading"&&t(o).percent<100?(c(),f(p,{key:0,percent:t(o).percent,type:"circle",size:"mini",style:{position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"}},null,8,["percent"])):$("",!0)],4)):(c(),g("div",{key:1,class:"arco-upload-picture-card",style:m(t(i))},[n("div",H,[y(d),a[0]||(a[0]=n("div",{style:{"margin-top":"10px","font-weight":"600"}},"Upload",-1))])],4))],6)]),key:"0"}:void 0]),1032,["file-list"])}}},A=b(J,[["__scopeId","data-v-e0b03957"]]);export{A as I};
