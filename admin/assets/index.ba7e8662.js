import{f as k,F as D,a as B,B as j,A as I}from"./index.080c3c87.js";import{d as M,j as y,r as L,c as A,o as N,b6 as P,bE as U,ac as H,aX as O,ba as R,bA as G,bL as J,D as K,E as $,aI as t,aH as a,u as o,C as X,aK as p,aL as m,b7 as q,bG as Q,bM as W}from"./arco.fe08071c.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import Y from"./Detail.6fb087d9.js";import"./chart.a7740a30.js";import"./vue.ce9ec506.js";/* empty css                *//* empty css                */const Z={class:"container"},x={class:"container-header"},ee={class:"container-main"},ze=M({__name:"index",setup(te){const g=k(),c=y(!1),_=y(),i=L({limit:20,page:1,toEmail:"",bizType:"",status:void 0}),r=L({page:{page:1,limit:20,total:0},results:[]}),z=A(()=>({total:r.page.total,current:r.page.page,pageSize:r.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));N(()=>{D()});const u=async()=>{c.value=!0;try{const e=await B.postForm("/api/admin/email-log/list",j(i));r.page=e.page,r.results=e.results}finally{c.value=!1}};u();const T=e=>{i.page=e,u()},v=e=>{i.limit=e,u()},V=e=>{var s;(s=_.value)==null||s.show(e)};return(e,s)=>{const b=P,d=q,f=Q,w=U,S=H,h=O,C=R,n=W,F=G,E=J;return X(),K("div",Z,[$("div",x,[t(C,{model:o(i),layout:"inline",size:o(g).table.size},{default:a(()=>[t(d,null,{default:a(()=>[t(b,{modelValue:o(i).toEmail,"onUpdate:modelValue":s[0]||(s[0]=l=>o(i).toEmail=l),placeholder:e.$t("pages.emailLog.toEmail")},null,8,["modelValue","placeholder"])]),_:1}),t(d,null,{default:a(()=>[t(b,{modelValue:o(i).bizType,"onUpdate:modelValue":s[1]||(s[1]=l=>o(i).bizType=l),placeholder:e.$t("pages.emailLog.bizType")},null,8,["modelValue","placeholder"])]),_:1}),t(d,null,{default:a(()=>[t(w,{modelValue:o(i).status,"onUpdate:modelValue":s[2]||(s[2]=l=>o(i).status=l),"allow-clear":"",placeholder:e.$t("pages.emailLog.status"),style:{width:"140px"}},{default:a(()=>[t(f,{value:0},{default:a(()=>[p(m(e.$t("pages.emailLog.statusSuccess")),1)]),_:1}),t(f,{value:1},{default:a(()=>[p(m(e.$t("pages.emailLog.statusFailed")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),t(d,null,{default:a(()=>[t(h,{type:"primary","html-type":"submit",onClick:u},{icon:a(()=>[t(S)]),default:a(()=>[p(" "+m(e.$t("pages.emailLog.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"])]),$("div",ee,[t(E,{loading:o(c),data:o(r).results,size:o(g).table.size,bordered:o(g).table.bordered,pagination:o(z),"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"id",onPageChange:T,onPageSizeChange:v},{columns:a(()=>[t(n,{title:e.$t("pages.emailLog.id"),"data-index":"id"},null,8,["title"]),t(n,{title:e.$t("pages.emailLog.toEmail"),"data-index":"toEmail"},null,8,["title"]),t(n,{title:e.$t("pages.emailLog.bizType"),"data-index":"bizType"},null,8,["title"]),t(n,{title:e.$t("pages.emailLog.status"),"data-index":"status"},{cell:a(({record:l})=>[t(F,{color:l.status===0?"green":"red"},{default:a(()=>[p(m(l.status===0?e.$t("pages.emailLog.statusSuccess"):e.$t("pages.emailLog.statusFailed")),1)]),_:2},1032,["color"])]),_:1},8,["title"]),t(n,{title:e.$t("pages.emailLog.subject"),"data-index":"subject",ellipsis:!0,tooltip:!0},null,8,["title"]),t(n,{title:e.$t("pages.emailLog.errorMsg"),"data-index":"errorMsg",ellipsis:!0,tooltip:!0},null,8,["title"]),t(n,{title:e.$t("pages.emailLog.createTime"),"data-index":"createTime"},{cell:a(({record:l})=>[p(m(("useFormatDate"in e?e.useFormatDate:o(I))(l.createTime)),1)]),_:1},8,["title"]),t(n,{title:e.$t("pages.emailLog.operations"),width:140,align:"center"},{cell:a(({record:l})=>[t(h,{type:"text",onClick:ae=>V(l.id)},{default:a(()=>[p(m(e.$t("pages.emailLog.viewContent")),1)]),_:2},1032,["onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])]),t(Y,{ref_key:"detailRef",ref:_},null,512)])}}});export{ze as default};
