import{v as x,a as r,G as k,E as U,C as W,h as S}from"./index.4abcea7d.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as B,j as _,b6 as E,aV as D,a5 as T,aX as j,a6 as A,b9 as H,bL as L,D as $,aI as t,aH as o,u,E as G,C as K,aK as M,aL as O}from"./arco.4903a8b5.js";const P={style:{"margin-top":"20px"}},le=B({__name:"NavSettings",setup(X){const{t:l}=x.exports.useI18n(),p=_(!1),s=_([]),g=[{title:l("pages.settings.nav.tableTitle"),dataIndex:"title",slotName:"name"},{title:l("pages.settings.nav.tableUrl"),dataIndex:"url",slotName:"url"},{title:l("pages.settings.nav.tableOpenInNewWindow"),dataIndex:"openInNewWindow",slotName:"openInNewWindow"},{title:"",dataIndex:"operation",slotName:"operation"}],d=async()=>{const e=await r.get("/api/admin/sys-config/configs");s.value=e.siteNavs};d();const v=e=>{s.value=e},f=(e,i)=>{s.value.splice(i,1)},w=(e,i)=>{s.value.splice(i+1,0,{title:"",url:"",openInNewWindow:!1})},N=async()=>{p.value=!0;try{if(s.value.some(e=>k(e.title,e.url))){U(l("pages.settings.nav.message.validation"));return}await r.post("/api/admin/sys-config/save",{siteNavs:s.value}),await d(),W(l("pages.settings.nav.message.submitSuccess"))}catch(e){S(e)}finally{p.value=!1}};return(e,i)=>{const m=E,h=D,y=T,c=j,I=A,V=H,b=L;return K(),$("div",null,[t(b,{columns:g,data:u(s),pagination:!1,draggable:{type:"handle",width:40},onChange:v},{name:o(({record:a})=>[t(m,{modelValue:a.title,"onUpdate:modelValue":n=>a.title=n},null,8,["modelValue","onUpdate:modelValue"])]),url:o(({record:a})=>[t(m,{modelValue:a.url,"onUpdate:modelValue":n=>a.url=n},null,8,["modelValue","onUpdate:modelValue"])]),openInNewWindow:o(({record:a})=>[t(h,{modelValue:a.openInNewWindow,"onUpdate:modelValue":n=>a.openInNewWindow=n},null,8,["modelValue","onUpdate:modelValue"])]),operation:o(({record:a,rowIndex:n})=>[t(V,null,{default:o(()=>[t(c,{type:"primary",status:"danger",shape:"circle",onClick:C=>f(a,n)},{default:o(()=>[t(y)]),_:2},1032,["onClick"]),t(c,{type:"primary",status:"success",shape:"circle",onClick:C=>w(a,n)},{default:o(()=>[t(I)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data"]),G("div",P,[t(c,{type:"primary",loading:u(p),onClick:N},{default:o(()=>[M(O(u(l)("pages.settings.nav.submit")),1)]),_:1},8,["loading"])])])}}});export{le as _};
