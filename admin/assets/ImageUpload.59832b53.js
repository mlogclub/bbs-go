import{_ as E,j as k,a as z,F as V,E as w}from"./index.51e009fb.js";import{j as C,c as S,C as c,aE as _,bI as N,aH as P,E as n,F,u as t,G as m,D as g,aI as y,aF as J,ag as R,bJ as $,a6 as D,bK as L}from"./arco.c0e72183.js";/* empty css               *//* empty css               *//* empty css                */const j=["src"],q={class:"arco-upload-list-picture-mask"},G={class:"arco-upload-picture-card-text"},H={__name:"ImageUpload",props:{customUploadButton:{type:Boolean,default:!0},modelValue:{type:String,default:""},size:{type:Number,default:0}},emits:["update:modelValue"],setup(r,{emit:h}){const I=h,l=r,o=C(),i=S(()=>{if(!(!l.size||l.size<=0))return{width:`${l.size}px`,height:`${l.size}px`}}),U=({onProgress:s,onError:a,onSuccess:u,fileItem:p,name:d})=>{z.post("/api/upload",(()=>{const e=new FormData;return e.append(d,p.file),e})(),{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let f=0;e.total>0&&(f=Math.round(e.loaded/e.total*100)),s({percent:f})}}).then(e=>{u(e)}).catch(e=>{a(e)})},b=(s,a)=>{o.value={...a}},v=s=>{o.value=s},x=()=>{V("\u4E0A\u4F20\u5931\u8D25")},B=s=>{const a=s.response;I("update:modelValue",a.url),w("\u4E0A\u4F20\u6210\u529F")};return(s,a)=>{const u=R,p=$,d=D,e=L;return c(),_(e,{"custom-request":U,"file-list":t(o)?[t(o)]:[],"show-file-list":!1,accept:"image/*",name:"image","with-credentials":"",onChange:b,onProgress:v,onSuccess:B,onError:x},N({_:2},[r.customUploadButton?{name:"upload-button",fn:P(()=>[n("div",{class:F(`arco-upload-list-item${t(o)&&t(o).status==="error"?" arco-upload-list-item-error":""}`),style:m(t(i))},[r.modelValue?(c(),g("div",{key:0,class:"arco-upload-list-picture custom-upload-avatar",style:m(t(i))},[n("img",{src:("useJoinBaseURL"in s?s.useJoinBaseURL:t(k))(r.modelValue)},null,8,j),n("div",q,[y(u)]),t(o)&&t(o).status==="uploading"&&t(o).percent<100?(c(),_(p,{key:0,percent:t(o).percent,type:"circle",size:"mini",style:{position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"}},null,8,["percent"])):J("",!0)],4)):(c(),g("div",{key:1,class:"arco-upload-picture-card",style:m(t(i))},[n("div",G,[y(d),a[0]||(a[0]=n("div",{style:{"margin-top":"10px","font-weight":"600"}},"Upload",-1))])],4))],6)]),key:"0"}:void 0]),1032,["file-list"])}}},A=E(H,[["__scopeId","data-v-81bdf31b"]]);export{A as I};
