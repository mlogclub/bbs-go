import{_ as H,v as G,b as J,p as w,A as K,a as f,B as $,C as h,h as k}from"./index.080c3c87.js";import{bA as M,bo as X,bB as q,c3 as Q,aX as W,bC as Y,bD as Z,D as d,aM as v,aJ as L,aE as c,C as n,E as a,aH as o,aK as r,aL as s,aF as u,aI as m,u as I,c4 as x}from"./arco.fe08071c.js";/* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                */import ee from"./TopicVoteCard.4c5948c3.js";import"./chart.a7740a30.js";import"./vue.ce9ec506.js";const te={class:"topics"},ae={class:"topic-status"},se={class:"topic-header"},ne=["href"],oe=["src"],ie={class:"topic-head-info"},ce={class:"nickname"},re=["href"],me={class:"topic-metas"},le={class:"meta-item"},de={class:"meta-item"},ue={class:"meta-item"},pe={class:"meta-item"},_e={class:"meta-item"},ge={key:0,class:"topic-summary"},ye={key:1,class:"topic-summary"},fe={class:"topic-image-list"},he={class:"topic-footer"},ke={class:"topic-tags"},ve={class:"topic-actions"},be={__name:"TopicList",props:{results:{type:Array,default(){return[]}}},emits:["change"],setup(S,{emit:T}){const{t:g}=G.exports.useI18n(),y=T,O=async t=>{try{await f.form("/api/admin/topic/delete",$({id:t})),h(g("pages.topic.notify.deleteSuccess")),y("change")}catch(i){k(i)}},U=async t=>{try{await f.form("/api/admin/topic/undelete",$({id:t})),h(g("pages.topic.notify.undeleteSuccess")),y("change")}catch(i){k(i)}},B=async t=>{try{await f.form("/api/admin/topic/recommend",$({id:t})),h(g("pages.topic.notify.recommendSuccess")),y("change")}catch(i){k(i)}},R=async t=>{try{await f.delete(`/api/admin/topic/recommend?id=${t}`),h(g("pages.topic.notify.cancelRecommendSuccess")),y("change")}catch(i){k(i)}},E=async t=>{try{await f.form("/api/admin/topic/audit",$({id:t})),h(g("pages.topic.notify.auditSuccess")),y("change")}catch(i){k(i)}},D=t=>w(`/topic/${t.idEncode||t.id}`),z=t=>{var i;return w(`/user/${((i=t.user)==null?void 0:i.id)||0}`)};return(t,i)=>{const b=M,F=J,N=X,V=q,A=x,C=Q,p=W,_=Y,P=Z;return n(),d("div",te,[S.results&&S.results.length?(n(!0),d(v,{key:0},L(S.results,e=>(n(),d("div",{key:e.id,class:"topic-item"},[a("div",ae,[e.recommend?(n(),c(b,{key:0,color:"green"},{default:o(()=>[r(s(t.$t("pages.topic.table.recommended")),1)]),_:1})):u("",!0),e.status===1?(n(),c(b,{key:1,color:"red"},{default:o(()=>[r(s(t.$t("pages.topic.table.deleted")),1)]),_:1})):u("",!0)]),a("div",se,[a("a",{href:z(e),target:"_blank",class:"user-link"},[m(N,{size:40},{default:o(()=>[e.user.avatar?(n(),d("img",{key:0,src:("useSiteURL"in t?t.useSiteURL:I(w))(e.user.avatar)},null,8,oe)):(n(),c(F,{key:1}))]),_:2},1024)],8,ne),a("div",ie,[a("div",ce,[a("a",{href:z(e),target:"_blank",class:"user-link"},s(e.user.nickname),9,re)]),a("div",me,[a("div",le,[i[0]||(i[0]=a("span",null,"ID:",-1)),a("span",null,s(e.id),1)]),a("div",de,[a("span",null,s(t.$t("pages.topic.table.time"))+":",1),a("span",null,s(("useFormatDate"in t?t.useFormatDate:I(K))(e.createTime)),1)]),a("div",ue,[a("span",null,s(t.$t("pages.topic.table.view"))+":",1),a("span",null,s(e.viewCount),1)]),a("div",pe,[a("span",null,s(t.$t("pages.topic.table.like"))+":",1),a("span",null,s(e.likeCount),1)]),a("div",_e,[a("span",null,s(t.$t("pages.topic.table.comment"))+":",1),a("span",null,s(e.commentCount),1)])])])]),e.type===0&&e.summary?(n(),d("div",ge,s(e.summary),1)):u("",!0),e.type===1&&e.content?(n(),d("div",ye,s(e.content),1)):u("",!0),e.vote?(n(),c(ee,{key:2,vote:e.vote},null,8,["vote"])):u("",!0),e.imageList&&e.imageList.length?(n(),c(A,{key:3,infinite:""},{default:o(()=>[a("div",fe,[(n(!0),d(v,null,L(e.imageList,(l,j)=>(n(),c(V,{key:j,width:"150",height:"150",class:"image-item","show-loader":"",src:l.url,fit:"cover"},null,8,["src"]))),128))])]),_:2},1024)):u("",!0),a("div",he,[a("div",ke,[e.node?(n(),c(b,{key:0,color:"green",size:"mini"},{default:o(()=>[r(s(e.node.name),1)]),_:2},1024)):u("",!0),e.tags&&e.tags.length?(n(!0),d(v,{key:1},L(e.tags,l=>(n(),c(b,{key:l.id,size:"mini"},{default:o(()=>[r("#\xA0"+s(l.name),1)]),_:2},1024))),128)):u("",!0)]),a("div",ve,[e.status===0?(n(),d(v,{key:0},[m(C,{class:"action-item",href:D(e),target:"_blank"},{default:o(()=>[r(s(t.$t("pages.topic.table.detail")),1)]),_:2},1032,["href"]),e.recommend?(n(),c(_,{key:0,content:t.$t("pages.topic.popconfirm.cancelRecommend"),onOk:l=>R(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.cancelRecommend")),1)]),_:1})]),_:2},1032,["content","onOk"])):!e.recommend&&e.status===0?(n(),c(_,{key:1,content:t.$t("pages.topic.popconfirm.recommend"),onOk:l=>B(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.recommend")),1)]),_:1})]),_:2},1032,["content","onOk"])):u("",!0),m(_,{content:t.$t("pages.topic.popconfirm.delete"),onOk:l=>O(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.delete")),1)]),_:1})]),_:2},1032,["content","onOk"])],64)):e.status===1?(n(),c(_,{key:1,content:t.$t("pages.topic.popconfirm.undelete"),onOk:l=>U(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.undelete")),1)]),_:1})]),_:2},1032,["content","onOk"])):e.status===2?(n(),d(v,{key:2},[m(C,{class:"action-item",href:D(e),target:"_blank"},{default:o(()=>[r(s(t.$t("pages.topic.table.detail")),1)]),_:2},1032,["href"]),m(_,{content:t.$t("pages.topic.popconfirm.delete"),onOk:l=>O(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.delete")),1)]),_:1})]),_:2},1032,["content","onOk"]),m(_,{content:t.$t("pages.topic.popconfirm.audit"),onOk:l=>E(e.id)},{default:o(()=>[m(p,{class:"action-item",size:"mini",type:"primary"},{default:o(()=>[r(s(t.$t("pages.topic.table.auditPass")),1)]),_:1})]),_:2},1032,["content","onOk"])],64)):u("",!0)])])]))),128)):(n(),c(P,{key:1}))])}}},Be=H(be,[["__scopeId","data-v-e9199e4b"]]);export{Be as default};
