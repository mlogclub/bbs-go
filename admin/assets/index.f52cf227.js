import{f as B,F as I,a as A,B as E,A as P}from"./index.4abcea7d.js";import{d as N,j as z,r as y,c as j,o as H,b6 as L,ac as M,aX as O,ba as U,a6 as J,bA as K,bL as X,D as q,E as f,aI as t,aH as a,u as o,C as G,aK as d,aL as m,b7 as Q,bM as R}from"./arco.4903a8b5.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import{_ as W}from"./Edit.vue_vue_type_script_setup_true_lang.8edaa6cc.js";import"./chart.b84bc7b2.js";import"./vue.655af03a.js";const Y={class:"container"},Z={class:"container-header"},x={class:"action-btns"},ee={class:"container-main"},ye=N({__name:"index",setup(te){const p=B(),u=z(!1),_=z(),s=y({limit:20,page:1,name:void 0,path:void 0}),n=y({page:{page:1,limit:20,total:0},results:[]}),w=j(()=>({total:n.page.total,current:n.page.page,pageSize:n.page.limit,showTotal:!0,showJumper:!0,showPageSize:!0,pageSizeOptions:[20,50,100,200,300,500]}));H(()=>{I()});const r=async()=>{u.value=!0;try{const e=await A.postForm("/api/admin/api/list",E(s));n.page=e.page,n.results=e.results}finally{u.value=!1}};r();const $=()=>{_.value.show()},v=e=>{_.value.showEdit(e)},k=e=>{s.page=e,r()},C=e=>{s.limit=e,r()};return(e,c)=>{const b=L,g=Q,T=M,h=O,V=U,F=J,l=R,S=K,D=X;return G(),q("div",Y,[f("div",Z,[t(V,{model:o(s),layout:"inline",size:o(p).table.size},{default:a(()=>[t(g,null,{default:a(()=>[t(b,{modelValue:o(s).name,"onUpdate:modelValue":c[0]||(c[0]=i=>o(s).name=i),placeholder:e.$t("pages.api.name")},null,8,["modelValue","placeholder"])]),_:1}),t(g,null,{default:a(()=>[t(b,{modelValue:o(s).path,"onUpdate:modelValue":c[1]||(c[1]=i=>o(s).path=i),placeholder:e.$t("pages.api.path")},null,8,["modelValue","placeholder"])]),_:1}),t(g,null,{default:a(()=>[t(h,{type:"primary","html-type":"submit",onClick:r},{icon:a(()=>[t(T)]),default:a(()=>[d(" "+m(e.$t("pages.api.search")),1)]),_:1})]),_:1})]),_:1},8,["model","size"]),f("div",x,[t(h,{type:"primary",size:o(p).table.size,onClick:$},{icon:a(()=>[t(F)]),default:a(()=>[d(" "+m(e.$t("pages.api.add")),1)]),_:1},8,["size"])])]),f("div",ee,[t(D,{loading:o(u),data:o(n).results,size:o(p).table.size,bordered:o(p).table.bordered,pagination:o(w),"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"id",onPageChange:k,onPageSizeChange:C},{columns:a(()=>[t(l,{title:e.$t("pages.api.id"),"data-index":"id",width:100},null,8,["title"]),t(l,{title:e.$t("pages.api.method"),"data-index":"method",width:100},{cell:a(({record:i})=>[t(S,null,{default:a(()=>[d(m(i.method),1)]),_:2},1024)]),_:1},8,["title"]),t(l,{title:e.$t("pages.api.path"),"data-index":"path"},null,8,["title"]),t(l,{title:e.$t("pages.api.name"),"data-index":"name"},null,8,["title"]),t(l,{title:e.$t("pages.api.createTime"),"data-index":"createTime",width:200},{cell:a(({record:i})=>[d(m(("useFormatDate"in e?e.useFormatDate:o(P))(i.createTime)),1)]),_:1},8,["title"]),t(l,{title:e.$t("pages.api.actions"),width:100},{cell:a(({record:i})=>[t(h,{type:"primary",size:o(p).table.size,onClick:ae=>v(i.id)},{default:a(()=>[d(m(e.$t("pages.api.edit")),1)]),_:2},1032,["size","onClick"])]),_:1},8,["title"])]),_:1},8,["loading","data","size","bordered","pagination"])]),t(W,{ref_key:"edit",ref:_,onOk:r},null,512)])}}});export{ye as default};
