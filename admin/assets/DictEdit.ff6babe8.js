import{v as N,H as j,f as z,a as c,h as g,B as H,C as O}from"./index.e2988b1b.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css                */import{j as f,r as L,bW as R,b6 as A,bE as G,ba as M,aE as P,aH as n,u as e,b1 as W,C as y,aI as s,D as h,aL as V,aF as J,b7 as K,bG as Q}from"./arco.b0f81cee.js";import"./chart.37105098.js";import"./vue.76373e4c.js";const X={key:0},ue={__name:"DictEdit",emits:["ok"],setup(Y,{expose:I,emit:C}){const{t:r}=N.exports.useI18n(),$=C,u=j(),k=z(),p=f(),i=L({visible:!1,isCreate:!1,title:""}),l=f({typeId:void 0,parentId:void 0,label:void 0,value:void 0,status:0}),w={name:[{required:!0,message:r("pages.dict.pleaseInputName")}],label:[{required:!0,message:r("pages.dict.pleaseInputLabel")}],value:[{required:!0,message:r("pages.dict.pleaseInputValue")}],status:[{required:!0}]},b=f([]),v=async()=>{b.value=await c.get(`/api/admin/dict/dicts?typeId=${u.currentType.id}`)},S=async()=>{p.value.resetFields(),i.isCreate=!0,i.title=r("pages.dict.add"),await v(),i.visible=!0},E=async a=>{p.value.resetFields(),i.isCreate=!1,i.title=r("pages.dict.edit"),await v();try{l.value=await c.get(`/api/admin/dict/${a}`)}catch(t){g(t)}i.visible=!0},F=()=>{p.value.resetFields()},T=async a=>{if(await p.value.validate()){a(!1);return}try{const d=i.isCreate?"/api/admin/dict/create":"/api/admin/dict/update";i.isCreate&&(l.value.typeId=u.currentTypeId),await c.postForm(d,H(l.value)),O(r("pages.dict.submitSuccess")),$("ok"),a(!0)}catch(d){g(d),a(!1)}};return I({show:S,showEdit:E}),(a,t)=>{const d=K,B=R,m=A,_=Q,D=G,U=M,q=W;return y(),P(q,{visible:e(i).visible,"onUpdate:visible":t[5]||(t[5]=o=>e(i).visible=o),title:e(i).title,size:e(k).table.size,onCancel:F,onBeforeOk:T},{default:n(()=>[s(U,{ref_key:"formRef",ref:p,model:e(l),rules:w},{default:n(()=>[s(d,{label:a.$t("pages.dict.type"),field:"typeId"},{default:n(()=>[e(u).currentType?(y(),h("span",X,V(e(u).currentType.code)+"\xA0("+V(e(u).currentType.name)+")",1)):J("",!0)]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.parent"),field:"parentId"},{default:n(()=>[s(B,{modelValue:e(l).parentId,"onUpdate:modelValue":t[0]||(t[0]=o=>e(l).parentId=o),"allow-clear":"",data:e(b),"field-names":{key:"id",title:"label"},placeholder:a.$t("pages.dict.pleaseSelectParent")},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.name"),field:"name"},{default:n(()=>[s(m,{modelValue:e(l).name,"onUpdate:modelValue":t[1]||(t[1]=o=>e(l).name=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.label"),field:"label"},{default:n(()=>[s(m,{modelValue:e(l).label,"onUpdate:modelValue":t[2]||(t[2]=o=>e(l).label=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.value"),field:"value"},{default:n(()=>[s(m,{modelValue:e(l).value,"onUpdate:modelValue":t[3]||(t[3]=o=>e(l).value=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:a.$t("pages.dict.status"),field:"status"},{default:n(()=>[s(D,{modelValue:e(l).status,"onUpdate:modelValue":t[4]||(t[4]=o=>e(l).status=o)},{default:n(()=>[s(_,{value:0,label:a.$t("pages.dict.enabled")},null,8,["label"]),s(_,{value:1,label:a.$t("pages.dict.disabled")},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}};export{ue as default};
