import{v as U,f as B,a as f,h as c,C as j,E as q}from"./index.51e009fb.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{d as z,j as b,r as D,b6 as O,bE as T,ba as H,aE as R,aH as i,u as a,b1 as x,C as A,aI as l,aK as v,aL as _,b7 as G,bG as K}from"./arco.c0e72183.js";const h=z({__name:"Edit",emits:["ok"],setup(L,{expose:g,emit:V}){const{t:u}=U.exports.useI18n(),k=V,C=B(),m=b(),o=D({visible:!1,isCreate:!1,title:""}),s=b({name:void 0,code:void 0,sortNo:0,remark:void 0,status:0}),E={name:[{required:!0,message:u("pages.role.pleaseInputName")}],code:[{required:!0,message:u("pages.role.pleaseInputCode")}],status:[{required:!0,message:u("pages.role.pleaseSelectStatus")}]},S=()=>{m.value.resetFields(),o.isCreate=!0,o.title=u("pages.role.new"),o.visible=!0},w=async t=>{m.value.resetFields(),o.isCreate=!1,o.title=u("pages.role.editTitle");try{s.value=await f.get(`/api/admin/role/${t}`)}catch(e){c(e)}o.visible=!0},F=()=>{m.value.resetFields()},I=async t=>{if(await m.value.validate()){t(!1);return}try{const n=o.isCreate?"/api/admin/role/create":"/api/admin/role/update";await f.postForm(n,j(s.value)),q(u("role.submitSuccess")),k("ok"),t(!0)}catch(n){c(n),t(!1)}};return g({show:S,showEdit:w}),(t,e)=>{const n=O,d=G,p=K,$=T,y=H,N=x;return A(),R(N,{visible:a(o).visible,"onUpdate:visible":e[4]||(e[4]=r=>a(o).visible=r),title:a(o).title,size:a(C).table.size,onCancel:F,onBeforeOk:I},{default:i(()=>[l(y,{ref_key:"formRef",ref:m,model:a(s),rules:E},{default:i(()=>[l(d,{label:t.$t("pages.role.name"),field:"name"},{default:i(()=>[l(n,{modelValue:a(s).name,"onUpdate:modelValue":e[0]||(e[0]=r=>a(s).name=r)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:t.$t("pages.role.code"),field:"code"},{default:i(()=>[l(n,{modelValue:a(s).code,"onUpdate:modelValue":e[1]||(e[1]=r=>a(s).code=r)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:t.$t("pages.role.remark"),field:"remark"},{default:i(()=>[l(n,{modelValue:a(s).remark,"onUpdate:modelValue":e[2]||(e[2]=r=>a(s).remark=r)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:t.$t("pages.role.status"),field:"status"},{default:i(()=>[l($,{modelValue:a(s).status,"onUpdate:modelValue":e[3]||(e[3]=r=>a(s).status=r)},{default:i(()=>[l(p,{value:0},{default:i(()=>[v(_(t.$t("pages.role.statusNormal")),1)]),_:1}),l(p,{value:1},{default:i(()=>[v(_(t.$t("pages.role.statusDisabled")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}});export{h as _};
