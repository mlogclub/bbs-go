import{v as U,f as B,a as c,h as f,C as j,E as z}from"./index.51e009fb.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css               */import{d as D,j as b,r as O,b6 as T,bE as H,ba as R,aE as q,aH as n,u as a,b1 as A,C as G,aI as s,aK as v,aL as _,b7 as K,bG as L}from"./arco.c0e72183.js";import{I as M}from"./ImageUpload.59832b53.js";const te=D({__name:"Edit",emits:["ok"],setup(J,{expose:g,emit:N}){const{t:u}=U.exports.useI18n(),V=N,C=B(),r=b(),l=O({visible:!1,isCreate:!1,title:""}),o=b({name:void 0,description:void 0,logo:void 0,status:void 0,createTime:void 0}),E={name:[{required:!0,message:u("pages.topicNode.pleaseInputName")}]},F=()=>{r.value.resetFields(),l.isCreate=!0,l.title="\u65B0\u589E",l.visible=!0},$=async e=>{r.value.resetFields(),l.isCreate=!1,l.title="\u7F16\u8F91";try{o.value=await c.get(`/api/admin/topic-node/${e}`)}catch(t){f(t)}l.visible=!0},I=()=>{r.value.resetFields()},k=async e=>{if(await r.value.validate()){e(!1);return}try{const d=l.isCreate?"/api/admin/topic-node/create":"/api/admin/topic-node/update";await c.postForm(d,j(o.value)),z(u("pages.topicNode.modal.submitSuccess")),V("ok"),e(!0)}catch(d){f(d),e(!1)}};return g({show:F,showEdit:$}),(e,t)=>{const d=T,p=K,m=L,w=H,y=R,S=A;return G(),q(S,{visible:a(l).visible,"onUpdate:visible":t[4]||(t[4]=i=>a(l).visible=i),title:a(l).isCreate?e.$t("pages.topicNode.modal.add"):e.$t("pages.topicNode.modal.edit"),size:a(C).table.size,onCancel:I,onBeforeOk:k},{default:n(()=>[s(y,{ref_key:"formRef",ref:r,model:a(o),rules:E},{default:n(()=>[s(p,{label:e.$t("pages.topicNode.table.name"),field:"name"},{default:n(()=>[s(d,{modelValue:a(o).name,"onUpdate:modelValue":t[0]||(t[0]=i=>a(o).name=i)},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{label:e.$t("pages.topicNode.table.description"),field:"description"},{default:n(()=>[s(d,{modelValue:a(o).description,"onUpdate:modelValue":t[1]||(t[1]=i=>a(o).description=i)},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{label:e.$t("pages.topicNode.table.logo"),field:"logo"},{default:n(()=>[s(M,{modelValue:a(o).logo,"onUpdate:modelValue":t[2]||(t[2]=i=>a(o).logo=i)},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{field:"status",label:e.$t("pages.topicNode.table.status")},{default:n(()=>[s(w,{modelValue:a(o).status,"onUpdate:modelValue":t[3]||(t[3]=i=>a(o).status=i)},{default:n(()=>[s(m,{value:0},{default:n(()=>[v(_(e.$t("pages.topicNode.table.statusNormal")),1)]),_:1}),s(m,{value:1},{default:n(()=>[v(_(e.$t("pages.topicNode.table.statusDeleted")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title","size"])}}});export{te as _};
