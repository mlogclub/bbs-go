import{f as E,v as V,F as $,a as v,B as k,C as I,h as N}from"./index.e2988b1b.js";/* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               */import{d as S,j as B,r as T,o as U,a6 as j,aX as D,b9 as F,aU as H,b6 as A,bL as M,D as K,E as f,aI as a,aH as s,u as l,C as P,aK as m,aL as u,bM as X}from"./arco.b0f81cee.js";import"./chart.37105098.js";import"./vue.76373e4c.js";const q={class:"container"},G={class:"container-header"},J={class:"container-main"},de=S({__name:"index",setup(O){const n=E(),{t:g}=V.exports.useI18n(),p=B(!1),t=T([]);U(()=>{$()});const _=async()=>{const o=(await v.postForm("/api/admin/level-config/list",k({page:1,limit:200,status:0}))).results||[];t.splice(0,t.length,...o)};_();const h=()=>{const e=t.length+1,o=t.length&&t[t.length-1].needExp||0;t.push({level:e,needExp:o+100,title:`${g("pages.growthLevelConfig.level")} ${e}`,status:0})},b=()=>{t.length<=1||t.pop()},C=async()=>{p.value=!0;try{const e=t.map(o=>({level:o.level,needExp:o.needExp,title:o.title}));await v.post("/api/admin/level-config/save_all",e),I(g("pages.growthLevelConfig.saveSuccess")),await _()}catch(e){N(e)}finally{p.value=!1}};return(e,o)=>{const y=j,r=D,L=F,d=X,w=H,z=A,x=M;return P(),K("div",q,[f("div",G,[a(L,null,{default:s(()=>[a(r,{type:"primary",size:l(n).table.size,onClick:h},{icon:s(()=>[a(y)]),default:s(()=>[m(" "+u(e.$t("pages.growthLevelConfig.add")),1)]),_:1},8,["size"]),a(r,{type:"primary",status:"danger",size:l(n).table.size,disabled:l(t).length<=1,onClick:b},{default:s(()=>[m(u(e.$t("pages.growthLevelConfig.removeLast")),1)]),_:1},8,["size","disabled"]),a(r,{type:"primary",size:l(n).table.size,loading:l(p),onClick:C},{default:s(()=>[m(u(e.$t("pages.growthLevelConfig.save")),1)]),_:1},8,["size","loading"])]),_:1})]),f("div",J,[a(x,{data:l(t),size:l(n).table.size,bordered:l(n).table.bordered,pagination:!1,"sticky-header":!0,style:{height:"100%"},"column-resizable":"","row-key":"level"},{columns:s(()=>[a(d,{title:e.$t("pages.growthLevelConfig.level"),"data-index":"level"},null,8,["title"]),a(d,{title:e.$t("pages.growthLevelConfig.needExp"),"data-index":"needExp"},{cell:s(({record:i})=>[a(w,{modelValue:i.needExp,"onUpdate:modelValue":c=>i.needExp=c,min:0,mode:"button"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["title"]),a(d,{title:e.$t("pages.growthLevelConfig.title"),"data-index":"title"},{cell:s(({record:i})=>[a(z,{modelValue:i.title,"onUpdate:modelValue":c=>i.title=c},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["title"])]),_:1},8,["data","size","bordered"])])])}}});export{de as default};
